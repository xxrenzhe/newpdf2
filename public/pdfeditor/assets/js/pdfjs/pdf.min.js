/*! For license information please see pdf.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf",[],e):"object"==typeof exports?exports["pdfjs-dist/build/pdf"]=e():t["pdfjs-dist/build/pdf"]=t.pdfjsLib=e()}(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e,r)=>{"use strict";function n(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=T,e.arraysToBytes=function(t){var e=t.length;if(1===e&&t[0]instanceof Uint8Array)return t[0];for(var r=0,n=0;n<e;n++)r+=T(t[n]);for(var a=0,i=new Uint8Array(r),o=0;o<e;o++){var s=t[o];s instanceof Uint8Array||(s="string"==typeof s?P(s):new Uint8Array(s));var l=s.byteLength;i.set(s,a),a+=l}return i},e.assert=function(t,e){t||m(e)},e.bytesToString=function(t){"object"===o(t)&&null!==t&&void 0!==t.length||m("Invalid argument for bytesToString");var e=t.length,r=8192;if(e<r)return String.fromCharCode.apply(null,t);for(var n=[],a=0;a<e;a+=r){var i=Math.min(a+r,e),s=t.subarray(a,i);n.push(String.fromCharCode.apply(null,s))}return n.join("")},e.createPromiseCapability=function(){var t=Object.create(null),e=!1;return Object.defineProperty(t,"settled",{get:function(){return e}}),t.promise=new Promise(function(r,n){t.resolve=function(t){e=!0,r(t)},t.reject=function(t){e=!0,n(t)}}),t},e.createValidAbsoluteUrl=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;try{if(r&&"string"==typeof t){if(r.addDefaultProtocol&&t.startsWith("www.")){var n=t.match(/\./g);n&&n.length>=2&&(t="http://".concat(t))}if(r.tryConvertEncoding)try{t=R(t)}catch(t){}}var a=e?new URL(t,e):new URL(t);if(function(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(a))return a}catch(t){}return null},e.escapeString=function(t){return t.replace(/([()\\\n\r])/g,function(t){return"\n"===t?"\\n":"\r"===t?"\\r":"\\".concat(t)})},e.getModificationDate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")},e.getVerbosityLevel=function(){return v},e.info=function(t){v>=p.INFOS&&console.log("Info: ".concat(t))},e.isArrayBuffer=function(t){return"object"===o(t)&&null!==t&&void 0!==t.byteLength},e.isArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0},e.isAscii=function(t){return/^[\x00-\x7F]*$/.test(t)},e.objectFromMap=function(t){var e,r,n=Object.create(null),i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=a(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){l=!0,o=t},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw o}}}}(t);try{for(i.s();!(e=i.n()).done;){var o=(r=e.value,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(r,2)||a(r,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=o[0],l=o[1];n[s]=l}}catch(t){i.e(t)}finally{i.f()}return n},e.objectSize=function(t){return Object.keys(t).length},e.setVerbosityLevel=function(t){Number.isInteger(t)&&(v=t)},e.shadow=g,e.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},e.stringToBytes=P,e.stringToPDFString=function(t){var e;if(t[0]>="ï"&&("þ"===t[0]&&"ÿ"===t[1]?e="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?e="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(e="utf-8"),e))try{var r=new TextDecoder(e,{fatal:!0}),n=P(t);return r.decode(n)}catch(t){y('stringToPDFString: "'.concat(t,'".'))}for(var a=[],i=0,o=t.length;i<o;i++){var s=F[t.charCodeAt(i)];a.push(s?String.fromCharCode(s):t.charAt(i))}return a.join("")},e.stringToUTF16BEString=function(t){for(var e=["þÿ"],r=0,n=t.length;r<n;r++){var a=t.charCodeAt(r);e.push(String.fromCharCode(a>>8&255),String.fromCharCode(255&a))}return e.join("")},e.stringToUTF8String=R,e.unreachable=m,e.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},e.warn=y,r(2),e.IDENTITY_MATRIX=[1,0,0,1,0,0],e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],e.LINE_FACTOR=1.35,e.LINE_DESCENT_FACTOR=.35,e.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},e.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},e.AnnotationEditorPrefix="pdfjs_internal_editor_",e.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},e.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},e.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},e.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},e.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},e.AnnotationReplyType={GROUP:"Group",REPLY:"R"},e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},e.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},e.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},e.PageActionEventType={O:"PageOpen",C:"PageClose"},e.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},e.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};var p={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=p,e.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},e.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var v=p.WARNINGS;function y(t){v>=p.WARNINGS&&console.log("Warning: ".concat(t))}function m(t){throw new Error(t)}function g(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!1}),r}var b=function(){function t(e,r){this.constructor===t&&m("Cannot initialize BaseException."),this.message=e,this.name=r}return t.prototype=new Error,t.constructor=t,t}();e.BaseException=b;var _=function(t){c(r,t);var e=f(r);function r(t,n){var a;return u(this,r),(a=e.call(this,t,"PasswordException")).code=n,a}return l(r)}(b);e.PasswordException=_;var w=function(t){c(r,t);var e=f(r);function r(t,n){var a;return u(this,r),(a=e.call(this,t,"UnknownErrorException")).details=n,a}return l(r)}(b);e.UnknownErrorException=w;var A=function(t){c(r,t);var e=f(r);function r(t){return u(this,r),e.call(this,t,"InvalidPDFException")}return l(r)}(b);e.InvalidPDFException=A;var k=function(t){c(r,t);var e=f(r);function r(t){return u(this,r),e.call(this,t,"MissingPDFException")}return l(r)}(b);e.MissingPDFException=k;var S=function(t){c(r,t);var e=f(r);function r(t,n){var a;return u(this,r),(a=e.call(this,t,"UnexpectedResponseException")).status=n,a}return l(r)}(b);e.UnexpectedResponseException=S;var x=function(t){c(r,t);var e=f(r);function r(t){return u(this,r),e.call(this,t,"FormatError")}return l(r)}(b);e.FormatError=x;var E=function(t){c(r,t);var e=f(r);function r(t){return u(this,r),e.call(this,t,"AbortException")}return l(r)}(b);function P(t){"string"!=typeof t&&m("Invalid argument for stringToBytes");for(var e=t.length,r=new Uint8Array(e),n=0;n<e;++n)r[n]=255&t.charCodeAt(n);return r}function T(t){return void 0!==t.length?t.length:void 0!==t.byteLength?t.byteLength:void m("Invalid argument for arrayByteLength")}e.AbortException=E;var C=function(){function t(){u(this,t)}return l(t,null,[{key:"isLittleEndian",get:function(){return g(this,"isLittleEndian",function(){var t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}},{key:"isEvalSupported",get:function(){return g(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(t){return!1}}())}},{key:"isOffscreenCanvasSupported",get:function(){return g(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}}]),t}();e.FeatureTest=C;var O=n(Array(256).keys()).map(function(t){return t.toString(16).padStart(2,"0")}),M=function(){function t(){u(this,t)}return l(t,null,[{key:"makeHexColor",value:function(t,e,r){return"#".concat(O[t]).concat(O[e]).concat(O[r])}},{key:"scaleMinMax",value:function(t,e){var r;t[0]?(t[0]<0&&(r=e[0],e[0]=e[1],e[1]=r),e[0]*=t[0],e[1]*=t[0],t[3]<0&&(r=e[2],e[2]=e[3],e[3]=r),e[2]*=t[3],e[3]*=t[3]):(r=e[0],e[0]=e[2],e[2]=r,r=e[1],e[1]=e[3],e[3]=r,t[1]<0&&(r=e[2],e[2]=e[3],e[3]=r),e[2]*=t[1],e[3]*=t[1],t[2]<0&&(r=e[0],e[0]=e[1],e[1]=r),e[0]*=t[2],e[1]*=t[2]),e[0]+=t[4],e[1]+=t[4],e[2]+=t[5],e[3]+=t[5]}},{key:"transform",value:function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}},{key:"applyTransform",value:function(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}},{key:"applyInverseTransform",value:function(t,e){var r=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/r,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/r]}},{key:"getAxialAlignedBoundingBox",value:function(e,r){var n=t.applyTransform(e,r),a=t.applyTransform(e.slice(2,4),r),i=t.applyTransform([e[0],e[3]],r),o=t.applyTransform([e[2],e[1]],r);return[Math.min(n[0],a[0],i[0],o[0]),Math.min(n[1],a[1],i[1],o[1]),Math.max(n[0],a[0],i[0],o[0]),Math.max(n[1],a[1],i[1],o[1])]}},{key:"inverseTransform",value:function(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}},{key:"apply3dTransform",value:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]}},{key:"singularValueDecompose2dScale",value:function(t){var e=[t[0],t[2],t[1],t[3]],r=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],a=t[2]*e[0]+t[3]*e[2],i=t[2]*e[1]+t[3]*e[3],o=(r+i)/2,s=Math.sqrt(Math.pow(r+i,2)-4*(r*i-a*n))/2,l=o+s||1,u=o-s||1;return[Math.sqrt(l),Math.sqrt(u)]}},{key:"normalizeRect",value:function(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}},{key:"intersect",value:function(t,e){var r=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(r>n)return null;var a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),i=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>i?null:[r,a,n,i]}},{key:"bezierBoundingBox",value:function(t,e,r,a,i,o,s,l){for(var u,c,h,f,d,p,v,y,m=[],g=[[],[]],b=0;b<2;++b)if(0===b?(c=6*t-12*r+6*i,u=-3*t+9*r-9*i+3*s,h=3*r-3*t):(c=6*e-12*a+6*o,u=-3*e+9*a-9*o+3*l,h=3*a-3*e),Math.abs(u)<1e-12){if(Math.abs(c)<1e-12)continue;0<(f=-h/c)&&f<1&&m.push(f)}else v=c*c-4*h*u,y=Math.sqrt(v),v<0||(0<(d=(-c+y)/(2*u))&&d<1&&m.push(d),0<(p=(-c-y)/(2*u))&&p<1&&m.push(p));for(var _,w=m.length,A=w;w--;)_=1-(f=m[w]),g[0][w]=_*_*_*t+3*_*_*f*r+3*_*f*f*i+f*f*f*s,g[1][w]=_*_*_*e+3*_*_*f*a+3*_*f*f*o+f*f*f*l;return g[0][A]=t,g[1][A]=e,g[0][A+1]=s,g[1][A+1]=l,g[0].length=g[1].length=A+2,[Math.min.apply(Math,n(g[0])),Math.min.apply(Math,n(g[1])),Math.max.apply(Math,n(g[0])),Math.max.apply(Math,n(g[1]))]}}]),t}();e.Util=M;var F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function R(t){return decodeURIComponent(escape(t))}},(t,e,r)=>{"use strict";var n=r(3);globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,!globalThis.btoa&&n.isNodeJS&&(globalThis.btoa=function(t){return Buffer.from(t,"binary").toString("base64")}),!globalThis.atob&&n.isNodeJS&&(globalThis.atob=function(t){return Buffer.from(t,"base64").toString("binary")}),!globalThis.DOMMatrix&&n.isNodeJS&&(globalThis.DOMMatrix=require("dommatrix/dist/dommatrix.js")),!globalThis.ReadableStream&&n.isNodeJS&&(globalThis.ReadableStream=require("web-streams-polyfill/dist/ponyfill.js").ReadableStream),Array.prototype.at||r(4),Uint8Array.prototype.at||r(76),globalThis.structuredClone||r(86))},(t,e)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;var n=!("object"!==("undefined"==typeof process?"undefined":r(process))||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);e.isNodeJS=n},(t,e,r)=>{r(5);var n=r(75);t.exports=n("Array","at")},(t,e,r)=>{"use strict";var n=r(6),a=r(41),i=r(65),o=r(63),s=r(70);n({target:"Array",proto:!0},{at:function(t){var e=a(this),r=i(e),n=o(t),s=n>=0?n:r+n;return s<0||s>=r?void 0:e[s]}}),s("at")},(t,e,r)=>{var n=r(7),a=r(8).f,i=r(45),o=r(49),s=r(39),l=r(57),u=r(69);t.exports=function(t,e){var r,c,h,f,d,p=t.target,v=t.global,y=t.stat;if(r=v?n:y?n[p]||s(p,{}):(n[p]||{}).prototype)for(c in e){if(f=e[c],h=t.dontCallGetSet?(d=a(r,c))&&d.value:r[c],!u(v?c:p+(y?".":"#")+c,t.forced)&&void 0!==h){if(typeof f==typeof h)continue;l(f,h)}(t.sham||h&&h.sham)&&i(f,"sham",!0),o(r,c,f,t)}}},t=>{var e=function(t){return t&&t.Math==Math&&t};t.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof global&&global)||function(){return this}()||Function("return this")()},(t,e,r)=>{var n=r(9),a=r(11),i=r(13),o=r(14),s=r(15),l=r(20),u=r(40),c=r(43),h=Object.getOwnPropertyDescriptor;e.f=n?h:function(t,e){if(t=s(t),e=l(e),c)try{return h(t,e)}catch(t){}if(u(t,e))return o(!a(i.f,t,e),t[e])}},(t,e,r)=>{var n=r(10);t.exports=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},(t,e,r)=>{var n=r(12),a=Function.prototype.call;t.exports=n?a.bind(a):function(){return a.apply(a,arguments)}},(t,e,r)=>{var n=r(10);t.exports=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},(t,e)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,a=n&&!r.call({1:2},1);e.f=a?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},(t,e,r)=>{var n=r(16),a=r(19);t.exports=function(t){return n(a(t))}},(t,e,r)=>{var n=r(17),a=r(10),i=r(18),o=Object,s=n("".split);t.exports=a(function(){return!o("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?s(t,""):o(t)}:o},(t,e,r)=>{var n=r(12),a=Function.prototype,i=a.bind,o=a.call,s=n&&i.bind(o,o);t.exports=n?function(t){return t&&s(t)}:function(t){return t&&function(){return o.apply(t,arguments)}}},(t,e,r)=>{var n=r(17),a=n({}.toString),i=n("".slice);t.exports=function(t){return i(a(t),8,-1)}},t=>{var e=TypeError;t.exports=function(t){if(null==t)throw e("Can't call method on "+t);return t}},(t,e,r)=>{var n=r(21),a=r(24);t.exports=function(t){var e=n(t,"string");return a(e)?e:e+""}},(t,e,r)=>{var n=r(11),a=r(22),i=r(24),o=r(31),s=r(34),l=r(35),u=TypeError,c=l("toPrimitive");t.exports=function(t,e){if(!a(t)||i(t))return t;var r,l=o(t,c);if(l){if(void 0===e&&(e="default"),r=n(l,t,e),!a(r)||i(r))return r;throw u("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},(t,e,r)=>{var n=r(23);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},t=>{t.exports=function(t){return"function"==typeof t}},(t,e,r)=>{var n=r(25),a=r(23),i=r(26),o=r(27),s=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return a(e)&&i(e.prototype,s(t))}},(t,e,r)=>{var n=r(7),a=r(23);t.exports=function(t,e){return arguments.length<2?function(t){return a(t)?t:void 0}(n[t]):n[t]&&n[t][e]}},(t,e,r)=>{var n=r(17);t.exports=n({}.isPrototypeOf)},(t,e,r)=>{var n=r(28);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(t,e,r)=>{var n=r(29),a=r(10);t.exports=!!Object.getOwnPropertySymbols&&!a(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},(t,e,r)=>{var n,a,i=r(7),o=r(30),s=i.process,l=i.Deno,u=s&&s.versions||l&&l.version,c=u&&u.v8;c&&(a=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!a&&o&&(!(n=o.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/))&&(a=+n[1]),t.exports=a},(t,e,r)=>{var n=r(25);t.exports=n("navigator","userAgent")||""},(t,e,r)=>{var n=r(32);t.exports=function(t,e){var r=t[e];return null==r?void 0:n(r)}},(t,e,r)=>{var n=r(23),a=r(33),i=TypeError;t.exports=function(t){if(n(t))return t;throw i(a(t)+" is not a function")}},t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},(t,e,r)=>{var n=r(11),a=r(23),i=r(22),o=TypeError;t.exports=function(t,e){var r,s;if("string"===e&&a(r=t.toString)&&!i(s=n(r,t)))return s;if(a(r=t.valueOf)&&!i(s=n(r,t)))return s;if("string"!==e&&a(r=t.toString)&&!i(s=n(r,t)))return s;throw o("Can't convert object to primitive value")}},(t,e,r)=>{var n=r(7),a=r(36),i=r(40),o=r(42),s=r(28),l=r(27),u=a("wks"),c=n.Symbol,h=c&&c.for,f=l?c:c&&c.withoutSetter||o;t.exports=function(t){if(!i(u,t)||!s&&"string"!=typeof u[t]){var e="Symbol."+t;s&&i(c,t)?u[t]=c[t]:u[t]=l&&h?h(e):f(e)}return u[t]}},(t,e,r)=>{var n=r(37),a=r(38);(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.23.5",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.5/LICENSE",source:"https://github.com/zloirock/core-js"})},t=>{t.exports=!1},(t,e,r)=>{var n=r(7),a=r(39),i="__core-js_shared__",o=n[i]||a(i,{});t.exports=o},(t,e,r)=>{var n=r(7),a=Object.defineProperty;t.exports=function(t,e){try{a(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},(t,e,r)=>{var n=r(17),a=r(41),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(a(t),e)}},(t,e,r)=>{var n=r(19),a=Object;t.exports=function(t){return a(n(t))}},(t,e,r)=>{var n=r(17),a=0,i=Math.random(),o=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++a+i,36)}},(t,e,r)=>{var n=r(9),a=r(10),i=r(44);t.exports=!n&&!a(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},(t,e,r)=>{var n=r(7),a=r(22),i=n.document,o=a(i)&&a(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},(t,e,r)=>{var n=r(9),a=r(46),i=r(14);t.exports=n?function(t,e,r){return a.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},(t,e,r)=>{var n=r(9),a=r(43),i=r(47),o=r(48),s=r(20),l=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor;e.f=n?i?function(t,e,r){if(o(t),e=s(e),o(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=c(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return u(t,e,r)}:u:function(t,e,r){if(o(t),e=s(e),o(r),a)try{return u(t,e,r)}catch(t){}if("get"in r||"set"in r)throw l("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},(t,e,r)=>{var n=r(9),a=r(10);t.exports=n&&a(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},(t,e,r)=>{var n=r(22),a=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw i(a(t)+" is not an object")}},(t,e,r)=>{var n=r(23),a=r(46),i=r(50),o=r(39);t.exports=function(t,e,r,s){s||(s={});var l=s.enumerable,u=void 0!==s.name?s.name:e;if(n(r)&&i(r,u,s),s.global)l?t[e]=r:o(e,r);else{try{s.unsafe?t[e]&&(l=!0):delete t[e]}catch(t){}l?t[e]=r:a.f(t,e,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},(t,e,r)=>{var n=r(10),a=r(23),i=r(40),o=r(9),s=r(51).CONFIGURABLE,l=r(52),u=r(53),c=u.enforce,h=u.get,f=Object.defineProperty,d=o&&!n(function(){return 8!==f(function(){},"length",{value:8}).length}),p=String(String).split("String"),v=t.exports=function(t,e,r){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!i(t,"name")||s&&t.name!==e)&&(o?f(t,"name",{value:e,configurable:!0}):t.name=e),d&&r&&i(r,"arity")&&t.length!==r.arity&&f(t,"length",{value:r.arity});try{r&&i(r,"constructor")&&r.constructor?o&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=c(t);return i(n,"source")||(n.source=p.join("string"==typeof e?e:"")),t};Function.prototype.toString=v(function(){return a(this)&&h(this).source||l(this)},"toString")},(t,e,r)=>{var n=r(9),a=r(40),i=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,s=a(i,"name"),l=s&&"something"===function(){}.name,u=s&&(!n||n&&o(i,"name").configurable);t.exports={EXISTS:s,PROPER:l,CONFIGURABLE:u}},(t,e,r)=>{var n=r(17),a=r(23),i=r(38),o=n(Function.toString);a(i.inspectSource)||(i.inspectSource=function(t){return o(t)}),t.exports=i.inspectSource},(t,e,r)=>{var n,a,i,o=r(54),s=r(7),l=r(17),u=r(22),c=r(45),h=r(40),f=r(38),d=r(55),p=r(56),v="Object already initialized",y=s.TypeError,m=s.WeakMap;if(o||f.state){var g=f.state||(f.state=new m),b=l(g.get),_=l(g.has),w=l(g.set);n=function(t,e){if(_(g,t))throw new y(v);return e.facade=t,w(g,t,e),e},a=function(t){return b(g,t)||{}},i=function(t){return _(g,t)}}else{var A=d("state");p[A]=!0,n=function(t,e){if(h(t,A))throw new y(v);return e.facade=t,c(t,A,e),e},a=function(t){return h(t,A)?t[A]:{}},i=function(t){return h(t,A)}}t.exports={set:n,get:a,has:i,enforce:function(t){return i(t)?a(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=a(e)).type!==t)throw y("Incompatible receiver, "+t+" required");return r}}}},(t,e,r)=>{var n=r(7),a=r(23),i=r(52),o=n.WeakMap;t.exports=a(o)&&/native code/.test(i(o))},(t,e,r)=>{var n=r(36),a=r(42),i=n("keys");t.exports=function(t){return i[t]||(i[t]=a(t))}},t=>{t.exports={}},(t,e,r)=>{var n=r(40),a=r(58),i=r(8),o=r(46);t.exports=function(t,e,r){for(var s=a(e),l=o.f,u=i.f,c=0;c<s.length;c++){var h=s[c];n(t,h)||r&&n(r,h)||l(t,h,u(e,h))}}},(t,e,r)=>{var n=r(25),a=r(17),i=r(59),o=r(68),s=r(48),l=a([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(s(t)),r=o.f;return r?l(e,r(t)):e}},(t,e,r)=>{var n=r(60),a=r(67).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,a)}},(t,e,r)=>{var n=r(17),a=r(40),i=r(15),o=r(61).indexOf,s=r(56),l=n([].push);t.exports=function(t,e){var r,n=i(t),u=0,c=[];for(r in n)!a(s,r)&&a(n,r)&&l(c,r);for(;e.length>u;)a(n,r=e[u++])&&(~o(c,r)||l(c,r));return c}},(t,e,r)=>{var n=r(15),a=r(62),i=r(65),o=function(t){return function(e,r,o){var s,l=n(e),u=i(l),c=a(o,u);if(t&&r!=r){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===r)return t||c||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},(t,e,r)=>{var n=r(63),a=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?a(r+e,0):i(r,e)}},(t,e,r)=>{var n=r(64);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},t=>{var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},(t,e,r)=>{var n=r(66);t.exports=function(t){return n(t.length)}},(t,e,r)=>{var n=r(63),a=Math.min;t.exports=function(t){return t>0?a(n(t),9007199254740991):0}},t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(t,e)=>{e.f=Object.getOwnPropertySymbols},(t,e,r)=>{var n=r(10),a=r(23),i=/#|\.prototype\./,o=function(t,e){var r=l[s(t)];return r==c||r!=u&&(a(e)?n(e):!!e)},s=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},l=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},(t,e,r)=>{var n=r(35),a=r(71),i=r(46).f,o=n("unscopables"),s=Array.prototype;null==s[o]&&i(s,o,{configurable:!0,value:a(null)}),t.exports=function(t){s[o][t]=!0}},(t,e,r)=>{var n,a=r(48),i=r(72),o=r(67),s=r(56),l=r(74),u=r(44),c=r(55)("IE_PROTO"),h=function(){},f=function(t){return"<script>"+t+"<\/script>"},d=function(t){t.write(f("")),t.close();var e=t.parentWindow.Object;return t=null,e},p=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}p="undefined"!=typeof document?document.domain&&n?d(n):function(){var t,e=u("iframe");return e.style.display="none",l.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(f("document.F=Object")),t.close(),t.F}():d(n);for(var t=o.length;t--;)delete p.prototype[o[t]];return p()};s[c]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(h.prototype=a(t),r=new h,h.prototype=null,r[c]=t):r=p(),void 0===e?r:i.f(r,e)}},(t,e,r)=>{var n=r(9),a=r(47),i=r(46),o=r(48),s=r(15),l=r(73);e.f=n&&!a?Object.defineProperties:function(t,e){o(t);for(var r,n=s(e),a=l(e),u=a.length,c=0;u>c;)i.f(t,r=a[c++],n[r]);return t}},(t,e,r)=>{var n=r(60),a=r(67);t.exports=Object.keys||function(t){return n(t,a)}},(t,e,r)=>{var n=r(25);t.exports=n("document","documentElement")},(t,e,r)=>{var n=r(7),a=r(17);t.exports=function(t,e){return a(n[t].prototype[e])}},(t,e,r)=>{r(77)},(t,e,r)=>{"use strict";var n=r(78),a=r(65),i=r(63),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("at",function(t){var e=o(this),r=a(e),n=i(t),s=n>=0?n:r+n;return s<0||s>=r?void 0:e[s]})},(t,e,r)=>{"use strict";var n,a,i,o=r(79),s=r(9),l=r(7),u=r(23),c=r(22),h=r(40),f=r(80),d=r(33),p=r(45),v=r(49),y=r(46).f,m=r(26),g=r(82),b=r(84),_=r(35),w=r(42),A=r(53),k=A.enforce,S=A.get,x=l.Int8Array,E=x&&x.prototype,P=l.Uint8ClampedArray,T=P&&P.prototype,C=x&&g(x),O=E&&g(E),M=Object.prototype,F=l.TypeError,R=_("toStringTag"),I=w("TYPED_ARRAY_TAG"),L=o&&!!b&&"Opera"!==f(l.opera),j=!1,D={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},N={BigInt64Array:8,BigUint64Array:8},U=function(t){var e=g(t);if(c(e)){var r=S(e);return r&&h(r,"TypedArrayConstructor")?r.TypedArrayConstructor:U(e)}},W=function(t){if(!c(t))return!1;var e=f(t);return h(D,e)||h(N,e)};for(n in D)(i=(a=l[n])&&a.prototype)?k(i).TypedArrayConstructor=a:L=!1;for(n in N)(i=(a=l[n])&&a.prototype)&&(k(i).TypedArrayConstructor=a);if((!L||!u(C)||C===Function.prototype)&&(C=function(){throw F("Incorrect invocation")},L))for(n in D)l[n]&&b(l[n],C);if((!L||!O||O===M)&&(O=C.prototype,L))for(n in D)l[n]&&b(l[n].prototype,O);if(L&&g(T)!==O&&b(T,O),s&&!h(O,R))for(n in j=!0,y(O,R,{get:function(){return c(this)?this[I]:void 0}}),D)l[n]&&p(l[n],I,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:j&&I,aTypedArray:function(t){if(W(t))return t;throw F("Target is not a typed array")},aTypedArrayConstructor:function(t){if(u(t)&&(!b||m(C,t)))return t;throw F(d(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(s){if(r)for(var a in D){var i=l[a];if(i&&h(i.prototype,t))try{delete i.prototype[t]}catch(r){try{i.prototype[t]=e}catch(t){}}}O[t]&&!r||v(O,t,r?e:L&&E[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,a;if(s){if(b){if(r)for(n in D)if((a=l[n])&&h(a,t))try{delete a[t]}catch(t){}if(C[t]&&!r)return;try{return v(C,t,r?e:L&&C[t]||e)}catch(t){}}for(n in D)!(a=l[n])||a[t]&&!r||v(a,t,e)}},getTypedArrayConstructor:U,isView:function(t){if(!c(t))return!1;var e=f(t);return"DataView"===e||h(D,e)||h(N,e)},isTypedArray:W,TypedArray:C,TypedArrayPrototype:O}},t=>{t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},(t,e,r)=>{var n=r(81),a=r(23),i=r(18),o=r(35)("toStringTag"),s=Object,l="Arguments"==i(function(){return arguments}());t.exports=n?i:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=s(t),o))?r:l?i(e):"Object"==(n=i(e))&&a(e.callee)?"Arguments":n}},(t,e,r)=>{var n={};n[r(35)("toStringTag")]="z",t.exports="[object z]"===String(n)},(t,e,r)=>{var n=r(40),a=r(23),i=r(41),o=r(55),s=r(83),l=o("IE_PROTO"),u=Object,c=u.prototype;t.exports=s?u.getPrototypeOf:function(t){var e=i(t);if(n(e,l))return e[l];var r=e.constructor;return a(r)&&e instanceof r?r.prototype:e instanceof u?c:null}},(t,e,r)=>{var n=r(10);t.exports=!n(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},(t,e,r)=>{var n=r(17),a=r(48),i=r(85);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return a(r),i(n),e?t(r,n):r.__proto__=n,r}}():void 0)},(t,e,r)=>{var n=r(23),a=String,i=TypeError;t.exports=function(t){if("object"==typeof t||n(t))return t;throw i("Can't set "+a(t)+" as a prototype")}},(t,e,r)=>{r(87),r(93),r(95),r(117),r(119);var n=r(128);t.exports=n.structuredClone},(t,e,r)=>{"use strict";var n=r(15),a=r(70),i=r(88),o=r(53),s=r(46).f,l=r(89),u=r(37),c=r(9),h="Array Iterator",f=o.set,d=o.getterFor(h);t.exports=l(Array,"Array",function(t,e){f(this,{type:h,target:n(t),index:0,kind:e})},function(){var t=d(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}},"values");var p=i.Arguments=i.Array;if(a("keys"),a("values"),a("entries"),!u&&c&&"values"!==p.name)try{s(p,"name",{value:"values"})}catch(t){}},t=>{t.exports={}},(t,e,r)=>{"use strict";var n=r(6),a=r(11),i=r(37),o=r(51),s=r(23),l=r(90),u=r(82),c=r(84),h=r(92),f=r(45),d=r(49),p=r(35),v=r(88),y=r(91),m=o.PROPER,g=o.CONFIGURABLE,b=y.IteratorPrototype,_=y.BUGGY_SAFARI_ITERATORS,w=p("iterator"),A="keys",k="values",S="entries",x=function(){return this};t.exports=function(t,e,r,o,p,y,E){l(r,e,o);var P,T,C,O=function(t){if(t===p&&L)return L;if(!_&&t in R)return R[t];switch(t){case A:case k:case S:return function(){return new r(this,t)}}return function(){return new r(this)}},M=e+" Iterator",F=!1,R=t.prototype,I=R[w]||R["@@iterator"]||p&&R[p],L=!_&&I||O(p),j="Array"==e&&R.entries||I;if(j&&(P=u(j.call(new t)))!==Object.prototype&&P.next&&(i||u(P)===b||(c?c(P,b):s(P[w])||d(P,w,x)),h(P,M,!0,!0),i&&(v[M]=x)),m&&p==k&&I&&I.name!==k&&(!i&&g?f(R,"name",k):(F=!0,L=function(){return a(I,this)})),p)if(T={values:O(k),keys:y?L:O(A),entries:O(S)},E)for(C in T)(_||F||!(C in R))&&d(R,C,T[C]);else n({target:e,proto:!0,forced:_||F},T);return i&&!E||R[w]===L||d(R,w,L,{name:p}),v[e]=L,T}},(t,e,r)=>{"use strict";var n=r(91).IteratorPrototype,a=r(71),i=r(14),o=r(92),s=r(88),l=function(){return this};t.exports=function(t,e,r,u){var c=e+" Iterator";return t.prototype=a(n,{next:i(+!u,r)}),o(t,c,!1,!0),s[c]=l,t}},(t,e,r)=>{"use strict";var n,a,i,o=r(10),s=r(23),l=r(71),u=r(82),c=r(49),h=r(35),f=r(37),d=h("iterator"),p=!1;[].keys&&("next"in(i=[].keys())?(a=u(u(i)))!==Object.prototype&&(n=a):p=!0),null==n||o(function(){var t={};return n[d].call(t)!==t})?n={}:f&&(n=l(n)),s(n[d])||c(n,d,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},(t,e,r)=>{var n=r(46).f,a=r(40),i=r(35)("toStringTag");t.exports=function(t,e,r){t&&!r&&(t=t.prototype),t&&!a(t,i)&&n(t,i,{configurable:!0,value:e})}},(t,e,r)=>{var n=r(81),a=r(49),i=r(94);n||a(Object.prototype,"toString",i,{unsafe:!0})},(t,e,r)=>{"use strict";var n=r(81),a=r(80);t.exports=n?{}.toString:function(){return"[object "+a(this)+"]"}},(t,e,r)=>{r(96)},(t,e,r)=>{"use strict";r(97)("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},r(114))},(t,e,r)=>{"use strict";var n=r(6),a=r(7),i=r(17),o=r(69),s=r(49),l=r(98),u=r(105),c=r(111),h=r(23),f=r(22),d=r(10),p=r(112),v=r(92),y=r(113);t.exports=function(t,e,r){var m=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),b=m?"set":"add",_=a[t],w=_&&_.prototype,A=_,k={},S=function(t){var e=i(w[t]);s(w,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!f(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return g&&!f(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!f(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(o(t,!h(_)||!(g||w.forEach&&!d(function(){(new _).entries().next()}))))A=r.getConstructor(e,t,m,b),l.enable();else if(o(t,!0)){var x=new A,E=x[b](g?{}:-0,1)!=x,P=d(function(){x.has(1)}),T=p(function(t){new _(t)}),C=!g&&d(function(){for(var t=new _,e=5;e--;)t[b](e,e);return!t.has(-0)});T||((A=e(function(t,e){c(t,w);var r=y(new _,t,A);return null!=e&&u(e,r[b],{that:r,AS_ENTRIES:m}),r})).prototype=w,w.constructor=A),(P||C)&&(S("delete"),S("has"),m&&S("get")),(C||E)&&S(b),g&&w.clear&&delete w.clear}return k[t]=A,n({global:!0,constructor:!0,forced:A!=_},k),v(A,t),g||r.setStrong(A,t,m),A}},(t,e,r)=>{var n=r(6),a=r(17),i=r(56),o=r(22),s=r(40),l=r(46).f,u=r(59),c=r(99),h=r(102),f=r(42),d=r(104),p=!1,v=f("meta"),y=0,m=function(t){l(t,v,{value:{objectID:"O"+y++,weakData:{}}})},g=t.exports={enable:function(){g.enable=function(){},p=!0;var t=u.f,e=a([].splice),r={};r[v]=1,t(r).length&&(u.f=function(r){for(var n=t(r),a=0,i=n.length;a<i;a++)if(n[a]===v){e(n,a,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:c.f}))},fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,v)){if(!h(t))return"F";if(!e)return"E";m(t)}return t[v].objectID},getWeakData:function(t,e){if(!s(t,v)){if(!h(t))return!0;if(!e)return!1;m(t)}return t[v].weakData},onFreeze:function(t){return d&&p&&h(t)&&!s(t,v)&&m(t),t}};i[v]=!0},(t,e,r)=>{var n=r(18),a=r(15),i=r(59).f,o=r(100),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"Window"==n(t)?function(t){try{return i(t)}catch(t){return o(s)}}(t):i(a(t))}},(t,e,r)=>{var n=r(62),a=r(65),i=r(101),o=Array,s=Math.max;t.exports=function(t,e,r){for(var l=a(t),u=n(e,l),c=n(void 0===r?l:r,l),h=o(s(c-u,0)),f=0;u<c;u++,f++)i(h,f,t[u]);return h.length=f,h}},(t,e,r)=>{"use strict";var n=r(20),a=r(46),i=r(14);t.exports=function(t,e,r){var o=n(e);o in t?a.f(t,o,i(0,r)):t[o]=r}},(t,e,r)=>{var n=r(10),a=r(22),i=r(18),o=r(103),s=Object.isExtensible,l=n(function(){s(1)});t.exports=l||o?function(t){return!!a(t)&&(!o||"ArrayBuffer"!=i(t))&&(!s||s(t))}:s},(t,e,r)=>{var n=r(10);t.exports=n(function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})},(t,e,r)=>{var n=r(10);t.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},(t,e,r)=>{var n=r(106),a=r(11),i=r(48),o=r(33),s=r(107),l=r(65),u=r(26),c=r(108),h=r(109),f=r(110),d=TypeError,p=function(t,e){this.stopped=t,this.result=e},v=p.prototype;t.exports=function(t,e,r){var y,m,g,b,_,w,A,k=r&&r.that,S=!(!r||!r.AS_ENTRIES),x=!(!r||!r.IS_RECORD),E=!(!r||!r.IS_ITERATOR),P=!(!r||!r.INTERRUPTED),T=n(e,k),C=function(t){return y&&f(y,"normal",t),new p(!0,t)},O=function(t){return S?(i(t),P?T(t[0],t[1],C):T(t[0],t[1])):P?T(t,C):T(t)};if(x)y=t.iterator;else if(E)y=t;else{if(!(m=h(t)))throw d(o(t)+" is not iterable");if(s(m)){for(g=0,b=l(t);b>g;g++)if((_=O(t[g]))&&u(v,_))return _;return new p(!1)}y=c(t,m)}for(w=x?t.next:y.next;!(A=a(w,y)).done;){try{_=O(A.value)}catch(t){f(y,"throw",t)}if("object"==typeof _&&_&&u(v,_))return _}return new p(!1)}},(t,e,r)=>{var n=r(17),a=r(32),i=r(12),o=n(n.bind);t.exports=function(t,e){return a(t),void 0===e?t:i?o(t,e):function(){return t.apply(e,arguments)}}},(t,e,r)=>{var n=r(35),a=r(88),i=n("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(a.Array===t||o[i]===t)}},(t,e,r)=>{var n=r(11),a=r(32),i=r(48),o=r(33),s=r(109),l=TypeError;t.exports=function(t,e){var r=arguments.length<2?s(t):e;if(a(r))return i(n(r,t));throw l(o(t)+" is not iterable")}},(t,e,r)=>{var n=r(80),a=r(31),i=r(88),o=r(35)("iterator");t.exports=function(t){if(null!=t)return a(t,o)||a(t,"@@iterator")||i[n(t)]}},(t,e,r)=>{var n=r(11),a=r(48),i=r(31);t.exports=function(t,e,r){var o,s;a(t);try{if(!(o=i(t,"return"))){if("throw"===e)throw r;return r}o=n(o,t)}catch(t){s=!0,o=t}if("throw"===e)throw r;if(s)throw o;return a(o),r}},(t,e,r)=>{var n=r(26),a=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw a("Incorrect invocation")}},(t,e,r)=>{var n=r(35)("iterator"),a=!1;try{var i=0,o={next:function(){return{done:!!i++}},return:function(){a=!0}};o[n]=function(){return this},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!a)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},(t,e,r)=>{var n=r(23),a=r(22),i=r(84);t.exports=function(t,e,r){var o,s;return i&&n(o=e.constructor)&&o!==r&&a(s=o.prototype)&&s!==r.prototype&&i(t,s),t}},(t,e,r)=>{"use strict";var n=r(46).f,a=r(71),i=r(115),o=r(106),s=r(111),l=r(105),u=r(89),c=r(116),h=r(9),f=r(98).fastKey,d=r(53),p=d.set,v=d.getterFor;t.exports={getConstructor:function(t,e,r,u){var c=t(function(t,n){s(t,d),p(t,{type:e,index:a(null),first:void 0,last:void 0,size:0}),h||(t.size=0),null!=n&&l(n,t[u],{that:t,AS_ENTRIES:r})}),d=c.prototype,y=v(e),m=function(t,e,r){var n,a,i=y(t),o=g(t,e);return o?o.value=r:(i.last=o={index:a=f(e,!0),key:e,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),h?i.size++:t.size++,"F"!==a&&(i.index[a]=o)),t},g=function(t,e){var r,n=y(t),a=f(e);if("F"!==a)return n.index[a];for(r=n.first;r;r=r.next)if(r.key==e)return r};return i(d,{clear:function(){for(var t=y(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,h?t.size=0:this.size=0},delete:function(t){var e=this,r=y(e),n=g(e,t);if(n){var a=n.next,i=n.previous;delete r.index[n.index],n.removed=!0,i&&(i.next=a),a&&(a.previous=i),r.first==n&&(r.first=a),r.last==n&&(r.last=i),h?r.size--:e.size--}return!!n},forEach:function(t){for(var e,r=y(this),n=o(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!g(this,t)}}),i(d,r?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),h&&n(d,"size",{get:function(){return y(this).size}}),c},setStrong:function(t,e,r){var n=e+" Iterator",a=v(e),i=v(n);u(t,e,function(t,e){p(this,{type:n,target:t,state:a(t),kind:e,last:void 0})},function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})},r?"entries":"values",!r,!0),c(e)}}},(t,e,r)=>{var n=r(49);t.exports=function(t,e,r){for(var a in e)n(t,a,e[a],r);return t}},(t,e,r)=>{"use strict";var n=r(25),a=r(46),i=r(35),o=r(9),s=i("species");t.exports=function(t){var e=n(t),r=a.f;o&&e&&!e[s]&&r(e,s,{configurable:!0,get:function(){return this}})}},(t,e,r)=>{r(118)},(t,e,r)=>{"use strict";r(97)("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},r(114))},(t,e,r)=>{var n,a=r(37),i=r(6),o=r(7),s=r(25),l=r(17),u=r(10),c=r(42),h=r(23),f=r(120),d=r(22),p=r(24),v=r(105),y=r(48),m=r(80),g=r(40),b=r(101),_=r(45),w=r(65),A=r(121),k=r(122),S=r(124),x=r(29),E=r(125),P=r(126),T=r(127),C=o.Object,O=o.Date,M=o.Error,F=o.EvalError,R=o.RangeError,I=o.ReferenceError,L=o.SyntaxError,j=o.TypeError,D=o.URIError,N=o.PerformanceMark,U=o.WebAssembly,W=U&&U.CompileError||M,B=U&&U.LinkError||M,G=U&&U.RuntimeError||M,q=s("DOMException"),z=s("Set"),H=s("Map"),V=H.prototype,X=l(V.has),Y=l(V.get),K=l(V.set),J=l(z.prototype.add),Q=s("Object","keys"),$=l([].push),Z=l((!0).valueOf),tt=l(1..valueOf),et=l("".valueOf),rt=l(O.prototype.getTime),nt=c("structuredClone"),at="DataCloneError",it="Transferring",ot=function(t){return!u(function(){var e=new o.Set([7]),r=t(e),n=t(C(7));return r==e||!r.has(7)||"object"!=typeof n||7!=n})&&t},st=function(t,e){return!u(function(){var r=new e,n=t({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof e&&n.a.stack===r.stack)})},lt=o.structuredClone,ut=a||!st(lt,M)||!st(lt,q)||(n=lt,!!u(function(){var t=n(new o.AggregateError([1],nt,{cause:3}));return"AggregateError"!=t.name||1!=t.errors[0]||t.message!=nt||3!=t.cause})),ct=!lt&&ot(function(t){return new N(nt,{detail:t}).detail}),ht=ot(lt)||ct,ft=function(t){throw new q("Uncloneable type: "+t,at)},dt=function(t,e){throw new q((e||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",at)},pt=function(t,e){if(p(t)&&ft("Symbol"),!d(t))return t;if(e){if(X(e,t))return Y(e,t)}else e=new H;var r,n,a,i,l,u,c,v,y,A,x=m(t),E=!1;switch(x){case"Array":a=[],E=!0;break;case"Object":a={},E=!0;break;case"Map":a=new H,E=!0;break;case"Set":a=new z,E=!0;break;case"RegExp":a=new RegExp(t.source,k(t));break;case"Error":switch(n=t.name){case"AggregateError":a=s("AggregateError")([]);break;case"EvalError":a=F();break;case"RangeError":a=R();break;case"ReferenceError":a=I();break;case"SyntaxError":a=L();break;case"TypeError":a=j();break;case"URIError":a=D();break;case"CompileError":a=W();break;case"LinkError":a=B();break;case"RuntimeError":a=G();break;default:a=M()}E=!0;break;case"DOMException":a=new q(t.message,t.name),E=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":r=o[x],d(r)||dt(x),a=new r(pt(t.buffer,e),t.byteOffset,"DataView"===x?t.byteLength:t.length);break;case"DOMQuad":try{a=new DOMQuad(pt(t.p1,e),pt(t.p2,e),pt(t.p3,e),pt(t.p4,e))}catch(e){ht?a=ht(t):dt(x)}break;case"FileList":if(r=o.DataTransfer,f(r)){for(i=new r,l=0,u=w(t);l<u;l++)i.items.add(pt(t[l],e));a=i.files}else ht?a=ht(t):dt(x);break;case"ImageData":try{a=new ImageData(pt(t.data,e),t.width,t.height,{colorSpace:t.colorSpace})}catch(e){ht?a=ht(t):dt(x)}break;default:if(ht)a=ht(t);else switch(x){case"BigInt":a=C(t.valueOf());break;case"Boolean":a=C(Z(t));break;case"Number":a=C(tt(t));break;case"String":a=C(et(t));break;case"Date":a=new O(rt(t));break;case"ArrayBuffer":(r=o.DataView)||"function"==typeof t.slice||dt(x);try{if("function"==typeof t.slice)a=t.slice(0);else for(u=t.byteLength,a=new ArrayBuffer(u),y=new r(t),A=new r(a),l=0;l<u;l++)A.setUint8(l,y.getUint8(l))}catch(t){throw new q("ArrayBuffer is detached",at)}break;case"SharedArrayBuffer":a=t;break;case"Blob":try{a=t.slice(0,t.size,t.type)}catch(t){dt(x)}break;case"DOMPoint":case"DOMPointReadOnly":r=o[x];try{a=r.fromPoint?r.fromPoint(t):new r(t.x,t.y,t.z,t.w)}catch(t){dt(x)}break;case"DOMRect":case"DOMRectReadOnly":r=o[x];try{a=r.fromRect?r.fromRect(t):new r(t.x,t.y,t.width,t.height)}catch(t){dt(x)}break;case"DOMMatrix":case"DOMMatrixReadOnly":r=o[x];try{a=r.fromMatrix?r.fromMatrix(t):new r(t)}catch(t){dt(x)}break;case"AudioData":case"VideoFrame":h(t.clone)||dt(x);try{a=t.clone()}catch(t){ft(x)}break;case"File":try{a=new File([t],t.name,t)}catch(t){dt(x)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":dt(x);default:ft(x)}}if(K(e,t,a),E)switch(x){case"Array":case"Object":for(c=Q(t),l=0,u=w(c);l<u;l++)v=c[l],b(a,v,pt(t[v],e));break;case"Map":t.forEach(function(t,r){K(a,pt(r,e),pt(t,e))});break;case"Set":t.forEach(function(t){J(a,pt(t,e))});break;case"Error":_(a,"message",pt(t.message,e)),g(t,"cause")&&_(a,"cause",pt(t.cause,e)),"AggregateError"==n&&(a.errors=pt(t.errors,e));case"DOMException":S&&_(a,"stack",pt(t.stack,e))}return a},vt=lt&&!u(function(){if(P&&x>92||T&&x>94||E&&x>97)return!1;var t=new ArrayBuffer(8),e=lt(t,{transfer:[t]});return 0!=t.byteLength||8!=e.byteLength});i({global:!0,enumerable:!0,sham:!vt,forced:ut},{structuredClone:function(t){var e,r=A(arguments.length,1)>1&&null!=arguments[1]?y(arguments[1]):void 0,n=r?r.transfer:void 0;return void 0!==n&&function(t,e){if(!d(t))throw j("Transfer option cannot be converted to a sequence");var r=[];v(t,function(t){$(r,y(t))});var n,a,i,s,l,u,c=0,p=w(r);if(vt)for(s=lt(r,{transfer:r});c<p;)K(e,r[c],s[c++]);else for(;c<p;){if(n=r[c++],X(e,n))throw new q("Duplicate transferable",at);switch(a=m(n)){case"ImageBitmap":i=o.OffscreenCanvas,f(i)||dt(a,it);try{(u=new i(n.width,n.height)).getContext("bitmaprenderer").transferFromImageBitmap(n),l=u.transferToImageBitmap()}catch(t){}break;case"AudioData":case"VideoFrame":h(n.clone)&&h(n.close)||dt(a,it);try{l=n.clone(),n.close()}catch(t){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":dt(a,it)}if(void 0===l)throw new q("This object cannot be transferred: "+a,at);K(e,n,l)}}(n,e=new H),pt(t,e)}})},(t,e,r)=>{var n=r(17),a=r(10),i=r(23),o=r(80),s=r(25),l=r(52),u=function(){},c=[],h=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,d=n(f.exec),p=!f.exec(u),v=function(t){if(!i(t))return!1;try{return h(u,c,t),!0}catch(t){return!1}},y=function(t){if(!i(t))return!1;switch(o(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(f,l(t))}catch(t){return!0}};y.sham=!0,t.exports=!h||a(function(){var t;return v(v.call)||!v(Object)||!v(function(){t=!0})||t})?y:v},t=>{var e=TypeError;t.exports=function(t,r){if(t<r)throw e("Not enough arguments");return t}},(t,e,r)=>{var n=r(11),a=r(40),i=r(26),o=r(123),s=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in s||a(t,"flags")||!i(s,t)?e:n(o,t)}},(t,e,r)=>{"use strict";var n=r(48);t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},(t,e,r)=>{var n=r(10),a=r(14);t.exports=!n(function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",a(1,7)),7!==t.stack)})},t=>{t.exports="object"==typeof window&&"object"!=typeof Deno},t=>{t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},(t,e,r)=>{var n=r(18),a=r(7);t.exports="process"==n(a.process)},(t,e,r)=>{var n=r(7);t.exports=n},(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.binarySearchFirstItem=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.length-1;if(n<0||!e(t[n]))return t.length;if(e(t[r]))return r;for(;r<n;){var a=r+n>>1;e(t[a])?n=a:r=a+1}return r},e.deprecated=function(t){console.log("Deprecated API usage: "+t)},e.getColorValues=function(t){var e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);var r,n=s(t.keys());try{for(n.s();!(r=n.n()).done;){var a=r.value;e.style.color=a;var i=window.getComputedStyle(e).color;t.set(a,F(i))}}catch(t){n.e(t)}finally{n.f()}e.remove()},e.getFilenameFromUrl=function(t){var e=t.indexOf("#"),r=t.indexOf("?"),n=Math.min(e>0?e:t.length,r>0?r:t.length);return t.substring(t.lastIndexOf("/",n)+1,n)},e.getPdfFilenameFromUrl=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof t)return e;if(P(t))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;var r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t),a=r.exec(n[1])||r.exec(n[2])||r.exec(n[3]);if(a&&(a=a[0]).includes("%"))try{a=r.exec(decodeURIComponent(a))[0]}catch(t){}return a||e},e.getRGB=F,e.getXfaPageViewport=function(t,e){var r=e.scale,n=void 0===r?1:r,a=e.rotation,i=void 0===a?0:a,o=t.attributes.style,s=o.width,l=o.height,u=[0,0,parseInt(s),parseInt(l)];return new x({viewBox:u,scale:n,rotation:i})},e.isDataScheme=P,e.isPdfFile=function(t){return"string"==typeof t&&/\.pdf$/i.test(t)},e.isValidFetchUrl=O,e.loadScript=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(r,n){var a=document.createElement("script");a.src=t,a.onload=function(t){e&&a.remove(),r(t)},a.onerror=function(){n(new Error("Cannot load script at: ".concat(a.src)))},(document.head||document.documentElement).append(a)})};var a=r(130),i=r(1);function o(){o=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new x(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return{value:void 0,done:!0}}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=A(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=h(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,o),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,i,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,i)&&(y=g);var b=v.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){function a(i,o,s,l){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){a("next",t,s,l)},function(t){a("throw",t,s,l)}):e.resolve(f).then(function(t){c.value=t,s(c)},function(t){return a("throw",t,s,l)})}l(u.arg)}var i;this._invoke=function(t,r){function n(){return new e(function(e,n){a(t,r,e,n)})}return i=i?i.then(n,n):n()}}function A(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=h(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),u(w.prototype,s,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new w(c(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},_(b),u(b,l,"Generator"),u(b,i,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e,r,n,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,a)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,a=d(t);if(e){var i=d(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e,r){return e&&p(t.prototype,e),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=v(function t(){y(this,t)});e.PixelsPerInch=g,m(g,"CSS",96),m(g,"PDF",72),m(g,"PDF_TO_CSS_UNITS",g.CSS/g.PDF);var b=function(t){c(r,t);var e=f(r);function r(){var t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).ownerDocument,a=void 0===n?globalThis.document:n;return y(this,r),(t=e.call(this))._document=a,t}return v(r,[{key:"_createCanvas",value:function(t,e){var r=this._document.createElement("canvas");return r.width=t,r.height=e,r}}]),r}(a.BaseCanvasFactory);function _(t){return w.apply(this,arguments)}function w(){return w=function(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var i=t.apply(e,r);function o(t){u(i,n,a,o,s,"next",t)}function s(t){u(i,n,a,o,s,"throw",t)}o(void 0)})}}(o().mark(function t(e){var r,n,a=arguments;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.length>1&&void 0!==a[1]&&a[1],!O(e,document.baseURI)){t.next=21;break}return t.next=4,fetch(e);case 4:if((n=t.sent).ok){t.next=7;break}throw new Error(n.statusText);case 7:if(!r){t.next=15;break}return t.t1=Uint8Array,t.next=11,n.arrayBuffer();case 11:t.t2=t.sent,t.t0=new t.t1(t.t2),t.next=20;break;case 15:return t.t3=i.stringToBytes,t.next=18,n.text();case 18:t.t4=t.sent,t.t0=(0,t.t3)(t.t4);case 20:return t.abrupt("return",t.t0);case 21:return t.abrupt("return",new Promise(function(t,n){var a=new XMLHttpRequest;a.open("GET",e,!0),r&&(a.responseType="arraybuffer"),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE){var e;if(200===a.status||0===a.status)if(r&&a.response?e=new Uint8Array(a.response):!r&&a.responseText&&(e=(0,i.stringToBytes)(a.responseText)),e)return void t(e);n(new Error(a.statusText))}},a.send(null)}));case 22:case"end":return t.stop()}},t)})),w.apply(this,arguments)}e.DOMCanvasFactory=b;var A=function(t){c(r,t);var e=f(r);function r(){return y(this,r),e.apply(this,arguments)}return v(r,[{key:"_fetchData",value:function(t,e){return _(t,this.isCompressed).then(function(t){return{cMapData:t,compressionType:e}})}}]),r}(a.BaseCMapReaderFactory);e.DOMCMapReaderFactory=A;var k=function(t){c(r,t);var e=f(r);function r(){return y(this,r),e.apply(this,arguments)}return v(r,[{key:"_fetchData",value:function(t){return _(t,!0)}}]),r}(a.BaseStandardFontDataFactory);e.DOMStandardFontDataFactory=k;var S=function(t){c(r,t);var e=f(r);function r(){return y(this,r),e.apply(this,arguments)}return v(r,[{key:"_createSVG",value:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}}]),r}(a.BaseSVGFactory);e.DOMSVGFactory=S;var x=function(){function t(e){var r=e.viewBox,n=e.scale,a=e.rotation,i=e.offsetX,o=void 0===i?0:i,s=e.offsetY,l=void 0===s?0:s,u=e.dontFlip,c=void 0!==u&&u;y(this,t),this.viewBox=r,this.scale=n,this.rotation=a,this.offsetX=o,this.offsetY=l;var h,f,d,p,v,m,g,b,_=(r[2]+r[0])/2,w=(r[3]+r[1])/2;switch((a%=360)<0&&(a+=360),a){case 180:h=-1,f=0,d=0,p=1;break;case 90:h=0,f=1,d=1,p=0;break;case 270:h=0,f=-1,d=-1,p=0;break;case 0:h=1,f=0,d=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(d=-d,p=-p),0===h?(v=Math.abs(w-r[1])*n+o,m=Math.abs(_-r[0])*n+l,g=Math.abs(r[3]-r[1])*n,b=Math.abs(r[2]-r[0])*n):(v=Math.abs(_-r[0])*n+o,m=Math.abs(w-r[1])*n+l,g=Math.abs(r[2]-r[0])*n,b=Math.abs(r[3]-r[1])*n),this.transform=[h*n,f*n,d*n,p*n,v-h*n*_-d*n*w,m-f*n*_-p*n*w],this.width=g,this.height=b}return v(t,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.scale,n=void 0===r?this.scale:r,a=e.rotation,i=void 0===a?this.rotation:a,o=e.offsetX,s=void 0===o?this.offsetX:o,l=e.offsetY,u=void 0===l?this.offsetY:l,c=e.dontFlip,h=void 0!==c&&c;return new t({viewBox:this.viewBox.slice(),scale:n,rotation:i,offsetX:s,offsetY:u,dontFlip:h})}},{key:"convertToViewportPoint",value:function(t,e){return i.Util.applyTransform([t,e],this.transform)}},{key:"convertToViewportRectangle",value:function(t){var e=i.Util.applyTransform([t[0],t[1]],this.transform),r=i.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],r[0],r[1]]}},{key:"convertToPdfPoint",value:function(t,e){return i.Util.applyInverseTransform([t,e],this.transform)}}]),t}();e.PageViewport=x;var E=function(t){c(r,t);var e=f(r);function r(t,n){var a;return y(this,r),(a=e.call(this,t,"RenderingCancelledException")).type=n,a}return v(r)}(i.BaseException);function P(t){for(var e=t.length,r=0;r<e&&""===t[r].trim();)r++;return"data:"===t.substring(r,r+5).toLowerCase()}e.RenderingCancelledException=E;var T,C=function(){function t(){y(this,t),this.started=Object.create(null),this.times=[]}return v(t,[{key:"time",value:function(t){t in this.started&&(0,i.warn)("Timer is already running for ".concat(t)),this.started[t]=Date.now()}},{key:"timeEnd",value:function(t){t in this.started||(0,i.warn)("Timer has not been started for ".concat(t)),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}},{key:"toString",value:function(){var t,e=[],r=0,n=s(this.times);try{for(n.s();!(t=n.n()).done;){var a=t.value.name;a.length>r&&(r=a.length)}}catch(t){n.e(t)}finally{n.f()}var i,o=s(this.times);try{for(o.s();!(i=o.n()).done;){var l=i.value,u=l.end-l.start;e.push("".concat(l.name.padEnd(r)," ").concat(u,"ms\n"))}}catch(t){o.e(t)}finally{o.f()}return e.join("")}}]),t}();function O(t,e){try{var r=(e?new URL(t,e):new URL(t)).protocol;return"http:"===r||"https:"===r}catch(t){return!1}}e.StatTimer=C;var M=function(){function t(){y(this,t)}return v(t,null,[{key:"toDateObject",value:function(t){if(!t||"string"!=typeof t)return null;T||(T=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var e=T.exec(t);if(!e)return null;var r=parseInt(e[1],10),n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;var a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;var i=parseInt(e[4],10);i=i>=0&&i<=23?i:0;var o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;var s=parseInt(e[6],10);s=s>=0&&s<=59?s:0;var l=e[7]||"Z",u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;var c=parseInt(e[9],10)||0;return c=c>=0&&c<=59?c:0,"-"===l?(i+=u,o+=c):"+"===l&&(i-=u,o-=c),new Date(Date.UTC(r,n,a,i,o,s))}}]),t}();function F(t){if(t.startsWith("#")){var e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(function(t){return parseInt(t)}):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(function(t){return parseInt(t)}).slice(0,3):((0,i.warn)('Not a valid color format: "'.concat(t,'"')),[0,0,0])}e.PDFDateString=M},(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var a=r(1);function i(){i=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new x(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return{value:void 0,done:!0}}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=A(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=h(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,o),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,o,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,o)&&(y=g);var b=v.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){function a(i,o,s,l){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){a("next",t,s,l)},function(t){a("throw",t,s,l)}):e.resolve(f).then(function(t){c.value=t,s(c)},function(t){return a("throw",t,s,l)})}l(u.arg)}var i;this._invoke=function(t,r){function n(){return new e(function(e,n){a(t,r,e,n)})}return i=i?i.then(n,n):n()}}function A(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=h(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),u(w.prototype,s,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new w(c(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},_(b),u(b,l,"Generator"),u(b,o,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function o(t,e,r,n,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,a)}function s(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var i=t.apply(e,r);function s(t){o(i,n,a,s,l,"next",t)}function l(t){o(i,n,a,s,l,"throw",t)}s(void 0)})}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var h=function(){function t(){l(this,t),this.constructor===t&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}return c(t,[{key:"create",value:function(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");var r=this._createCanvas(t,e);return{canvas:r,context:r.getContext("2d")}}},{key:"reset",value:function(t,e,r){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||r<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=r}},{key:"destroy",value:function(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}},{key:"_createCanvas",value:function(t,e){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}]),t}();e.BaseCanvasFactory=h;var f=function(){function t(e){var r=e.baseUrl,n=void 0===r?null:r,i=e.isCompressed,o=void 0!==i&&i;l(this,t),this.constructor===t&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=n,this.isCompressed=o}var e;return c(t,[{key:"fetch",value:(e=s(i().mark(function t(e){var r,n,o,s=this;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.name,this.baseUrl){t.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(r){t.next=5;break}throw new Error("CMap name must be specified.");case 5:return n=this.baseUrl+r+(this.isCompressed?".bcmap":""),o=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE,t.abrupt("return",this._fetchData(n,o).catch(function(t){throw new Error("Unable to load ".concat(s.isCompressed?"binary ":"","CMap at: ").concat(n))}));case 8:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"_fetchData",value:function(t,e){(0,a.unreachable)("Abstract method `_fetchData` called.")}}]),t}();e.BaseCMapReaderFactory=f;var d=function(){function t(e){var r=e.baseUrl,n=void 0===r?null:r;l(this,t),this.constructor===t&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=n}var e;return c(t,[{key:"fetch",value:(e=s(i().mark(function t(e){var r,n;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.filename,this.baseUrl){t.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(r){t.next=5;break}throw new Error("Font filename must be specified.");case 5:return n="".concat(this.baseUrl).concat(r),t.abrupt("return",this._fetchData(n).catch(function(t){throw new Error("Unable to load font data at: ".concat(n))}));case 7:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"_fetchData",value:function(t){(0,a.unreachable)("Abstract method `_fetchData` called.")}}]),t}();e.BaseStandardFontDataFactory=d;var p=function(){function t(){l(this,t),this.constructor===t&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}return c(t,[{key:"create",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");var n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),r||(n.setAttribute("width","".concat(t,"px")),n.setAttribute("height","".concat(e,"px"))),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox","0 0 ".concat(t," ").concat(e)),n}},{key:"createElement",value:function(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}},{key:"_createSVG",value:function(t){(0,a.unreachable)("Abstract method `_createSVG` called.")}}]),t}();e.BaseSVGFactory=p},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(132),_display_utils=__w_pdfjs_require__(129),_font_loader=__w_pdfjs_require__(136),_canvas=__w_pdfjs_require__(137),_worker_options=__w_pdfjs_require__(140),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(141),_metadata=__w_pdfjs_require__(142),_optional_content_config=__w_pdfjs_require__(143),_transport_stream=__w_pdfjs_require__(144),_xfa_text=__w_pdfjs_require__(145);function _classPrivateMethodInitSpec(t,e){_checkPrivateRedeclaration(t,e),e.add(t)}function _classPrivateMethodGet(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function _classPrivateFieldInitSpec(t,e,r){_checkPrivateRedeclaration(t,e),e.set(t,r)}function _checkPrivateRedeclaration(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,e,r){return _classApplyDescriptorSet(t,_classExtractFieldDescriptor(t,e,"set"),r),r}function _classPrivateFieldGet(t,e){return _classApplyDescriptorGet(t,_classExtractFieldDescriptor(t,e,"get"))}function _classExtractFieldDescriptor(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function _regeneratorRuntime(){_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof h?e:h,i=Object.create(a.prototype),o=new k(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return{value:void 0,done:!0}}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=_(o,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,o),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,a,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(S([])));y&&y!==e&&r.call(y,a)&&(p=y);var m=d.prototype=h.prototype=Object.create(p);function g(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function n(a,i,o,s){var l=u(t[a],t,i);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==_typeof(h)&&r.call(h,"__await")?e.resolve(h.__await).then(function(t){n("next",t,o,s)},function(t){n("throw",t,o,s)}):e.resolve(h).then(function(t){c.value=t,o(c)},function(t){return n("throw",t,o,s)})}s(l.arg)}var a;this._invoke=function(t,r){function i(){return new e(function(e,a){n(t,r,e,a)})}return a=a?a.then(i,i):i()}}function _(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return f.prototype=d,s(m,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,function(){return this}),t.AsyncIterator=b,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new b(l(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(m),s(m,o,"Generator"),s(m,a,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;A(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _classStaticPrivateFieldSpecSet(t,e,r,n){return _classCheckPrivateStaticAccess(t,e),_classCheckPrivateStaticFieldDescriptor(r,"set"),_classApplyDescriptorSet(t,r,n),n}function _classApplyDescriptorSet(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function _classStaticPrivateFieldSpecGet(t,e,r){return _classCheckPrivateStaticAccess(t,e),_classCheckPrivateStaticFieldDescriptor(r,"get"),_classApplyDescriptorGet(t,r)}function _classCheckPrivateStaticFieldDescriptor(t,e){if(void 0===t)throw new TypeError("attempted to "+e+" private static field before its declaration")}function _classCheckPrivateStaticAccess(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}function _classApplyDescriptorGet(t,e){return e.get?e.get.call(t):e.value}function asyncGeneratorStep(t,e,r,n,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,a)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var i=t.apply(e,r);function o(t){asyncGeneratorStep(i,n,a,o,s,"next",t)}function s(t){asyncGeneratorStep(i,n,a,o,s,"throw",t)}o(void 0)})}}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){var _require=__w_pdfjs_require__(146),NodeCanvasFactory=_require.NodeCanvasFactory,NodeCMapReaderFactory=_require.NodeCMapReaderFactory,NodeStandardFontDataFactory=_require.NodeStandardFontDataFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory}function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){var e,r=new PDFDocumentLoadingTask;if("string"==typeof t||t instanceof URL)e={url:t};else if((0,_util.isArrayBuffer)(t))e={data:t};else if(t instanceof PDFDataRangeTransport)e={range:t};else{if("object"!==_typeof(t))throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");e=t}var n=Object.create(null),a=null,i=null;for(var o in e){var s=e[o];switch(o){case"url":if("undefined"!=typeof window)try{n[o]=new URL(s,window.location).href;continue}catch(t){(0,_util.warn)('Cannot create valid URL: "'.concat(t,'".'))}else if("string"==typeof s||s instanceof URL){n[o]=s.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":a=s;continue;case"worker":i=s;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&s instanceof Buffer)n[o]=new Uint8Array(s);else{if(s instanceof Uint8Array)break;if("string"==typeof s)n[o]=(0,_util.stringToBytes)(s);else if("object"!==_typeof(s)||null===s||isNaN(s.length)){if(!(0,_util.isArrayBuffer)(s))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");n[o]=new Uint8Array(s)}else n[o]=new Uint8Array(s)}continue}n[o]=s}if(n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory,n.StandardFontDataFactory=n.StandardFontDataFactory||DefaultStandardFontDataFactory,n.ignoreErrors=!0!==n.stopAtErrors,n.fontExtraProperties=!0===n.fontExtraProperties,n.pdfBug=!0===n.pdfBug,n.enableXfa=!0===n.enableXfa,(!Number.isInteger(n.rangeChunkSize)||n.rangeChunkSize<1)&&(n.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof n.docBaseUrl||(0,_display_utils.isDataScheme)(n.docBaseUrl))&&(n.docBaseUrl=null),(!Number.isInteger(n.maxImageSize)||n.maxImageSize<-1)&&(n.maxImageSize=-1),"string"!=typeof n.cMapUrl&&(n.cMapUrl=null),"string"!=typeof n.standardFontDataUrl&&(n.standardFontDataUrl=null),"boolean"!=typeof n.useWorkerFetch&&(n.useWorkerFetch=n.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&n.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof n.isEvalSupported&&(n.isEvalSupported=!0),"boolean"!=typeof n.disableFontFace&&(n.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof n.useSystemFonts&&(n.useSystemFonts=!_is_node.isNodeJS&&!n.disableFontFace),"object"===_typeof(n.ownerDocument)&&null!==n.ownerDocument||(n.ownerDocument=globalThis.document),"boolean"!=typeof n.disableRange&&(n.disableRange=!1),"boolean"!=typeof n.disableStream&&(n.disableStream=!1),"boolean"!=typeof n.disableAutoFetch&&(n.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(n.verbosity),!i){var l={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};i=l.port?PDFWorker.fromPort(l):new PDFWorker(l),r._worker=i}var u=r.docId;return i.promise.then(function(){if(r.destroyed)throw new Error("Loading aborted");var t=_fetchDocument(i,n,a,u),e=new Promise(function(t){var e;a?e=new _transport_stream.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,contentDispositionFilename:n.contentDispositionFilename,disableRange:n.disableRange,disableStream:n.disableStream},a):n.data||(e=createPDFNetworkStream({url:n.url,length:n.length,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream})),t(e)});return Promise.all([t,e]).then(function(t){var e=_slicedToArray(t,2),a=e[0],o=e[1];if(r.destroyed)throw new Error("Loading aborted");var s=new _message_handler.MessageHandler(u,a,i.port),l=new WorkerTransport(s,r,o,n);r._transport=l,s.send("Ready",null)})}).catch(r._capability.reject),r}function _fetchDocument(t,e,r,n){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(_regeneratorRuntime().mark(function t(e,r,n,a){var i;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.destroyed){t.next=2;break}throw new Error("Worker was destroyed");case 2:return n&&(r.length=n.length,r.initialData=n.initialData,r.progressiveDone=n.progressiveDone,r.contentDispositionFilename=n.contentDispositionFilename),t.next=5,e.messageHandler.sendWithPromise("GetDocRequest",{docId:a,apiVersion:"2.15.349",source:{data:r.data,url:r.url,password:r.password,disableAutoFetch:r.disableAutoFetch,rangeChunkSize:r.rangeChunkSize,length:r.length},maxImageSize:r.maxImageSize,disableFontFace:r.disableFontFace,docBaseUrl:r.docBaseUrl,ignoreErrors:r.ignoreErrors,isEvalSupported:r.isEvalSupported,fontExtraProperties:r.fontExtraProperties,enableXfa:r.enableXfa,useSystemFonts:r.useSystemFonts,cMapUrl:r.useWorkerFetch?r.cMapUrl:null,standardFontDataUrl:r.useWorkerFetch?r.standardFontDataUrl:null});case 5:if(i=t.sent,r.data&&(r.data=null),!e.destroyed){t.next=9;break}throw new Error("Worker was destroyed");case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}},t)}))).apply(this,arguments)}var PDFDocumentLoadingTask=function(){function t(){var e,r;_classCallCheck(this,t),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d".concat((_classStaticPrivateFieldSpecSet(t,t,_docId,(e=_classStaticPrivateFieldSpecGet(t,t,_docId),r=e++,e)),r)),this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}var e;return _createClass(t,[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.destroyed=!0,t.next=3,null===(e=this._transport)||void 0===e?void 0:e.destroy();case 3:this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null);case 5:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})}]),t}();exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:!0,value:0},PDFDataRangeTransport=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,t),this.length=e,this.initialData=r,this.progressiveDone=n,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}return _createClass(t,[{key:"addRangeListener",value:function(t){this._rangeListeners.push(t)}},{key:"addProgressListener",value:function(t){this._progressListeners.push(t)}},{key:"addProgressiveReadListener",value:function(t){this._progressiveReadListeners.push(t)}},{key:"addProgressiveDoneListener",value:function(t){this._progressiveDoneListeners.push(t)}},{key:"onDataRange",value:function(t,e){var r,n=_createForOfIteratorHelper(this._rangeListeners);try{for(n.s();!(r=n.n()).done;)(0,r.value)(t,e)}catch(t){n.e(t)}finally{n.f()}}},{key:"onDataProgress",value:function(t,e){var r=this;this._readyCapability.promise.then(function(){var n,a=_createForOfIteratorHelper(r._progressListeners);try{for(a.s();!(n=a.n()).done;)(0,n.value)(t,e)}catch(t){a.e(t)}finally{a.f()}})}},{key:"onDataProgressiveRead",value:function(t){var e=this;this._readyCapability.promise.then(function(){var r,n=_createForOfIteratorHelper(e._progressiveReadListeners);try{for(n.s();!(r=n.n()).done;)(0,r.value)(t)}catch(t){n.e(t)}finally{n.f()}})}},{key:"onDataProgressiveDone",value:function(){var t=this;this._readyCapability.promise.then(function(){var e,r=_createForOfIteratorHelper(t._progressiveDoneListeners);try{for(r.s();!(e=r.n()).done;)(0,e.value)()}catch(t){r.e(t)}finally{r.f()}})}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(t,e){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),t}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function t(e,r){var n,a=this;_classCallCheck(this,t),this._pdfInfo=e,this._transport=r,Object.defineProperty(this,"fingerprint",{get:function(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function t(){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),t.abrupt("return",a.stats||{streamTypes:{},fontTypes:{}});case 2:case"end":return t.stop()}},t)})),function(){return n.apply(this,arguments)})})}return _createClass(t,[{key:"annotationStorage",get:function(){return this._transport.annotationStorage}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function(){return this._pdfInfo.fingerprints}},{key:"stats",get:function(){return this._transport.stats}},{key:"isPureXfa",get:function(){return!!this._transport._htmlForXfa}},{key:"allXfaHtml",get:function(){return this._transport._htmlForXfa}},{key:"getPage",value:function(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"saveDocument",value:function(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}]),t}();exports.PDFDocumentProxy=PDFDocumentProxy;var PDFPageProxy=function(){function t(e,r,n,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,t),this._pageIndex=e,this._pageInfo=r,this._ownerDocument=a,this._transport=n,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}var e;return _createClass(t,[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scale,r=t.rotation,n=void 0===r?this.rotate:r,a=t.offsetX,i=void 0===a?0:a,o=t.offsetY,s=void 0===o?0:o,l=t.dontFlip,u=void 0!==l&&l;return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:n,offsetX:i,offsetY:s,dontFlip:u})}},{key:"getAnnotations",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).intent,e=void 0===t?"display":t,r=this._transport.getRenderingIntent(e),n=this._annotationPromises.get(r.cacheKey);return n||(n=this._transport.getAnnotations(this._pageIndex,r.renderingIntent),this._annotationPromises.set(r.cacheKey,n),n=n.then(function(t){var e,r=_createForOfIteratorHelper(t);try{var n=function(){var t=e.value;void 0!==t.titleObj&&Object.defineProperty(t,"title",{get:function(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),t.titleObj.str}}),void 0!==t.contentsObj&&Object.defineProperty(t,"contents",{get:function(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),t.contentsObj.str}})};for(r.s();!(e=r.n()).done;)n()}catch(t){r.e(t)}finally{r.f()}return t})),n}},{key:"getJSActions",value:function(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}},{key:"getXfa",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null);case 1:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"render",value:function(t){var e,r,n,a=this,i=t.canvasContext,o=t.viewport,s=t.intent,l=void 0===s?"display":s,u=t.annotationMode,c=void 0===u?_util.AnnotationMode.ENABLE:u,h=t.transform,f=void 0===h?null:h,d=t.imageLayer,p=void 0===d?null:d,v=t.canvasFactory,y=void 0===v?null:v,m=t.background,g=void 0===m?null:m,b=t.optionalContentConfigPromise,_=void 0===b?null:b,w=t.annotationCanvasMap,A=void 0===w?null:w,k=t.pageColors,S=void 0===k?null:k,x=t.printAnnotationStorage,E=void 0===x?null:x;void 0!==(null===(e=arguments[0])||void 0===e?void 0:e.renderInteractiveForms)&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&c===_util.AnnotationMode.ENABLE&&(c=_util.AnnotationMode.ENABLE_FORMS)),void 0!==(null===(r=arguments[0])||void 0===r?void 0:r.includeAnnotationStorage)&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&c===_util.AnnotationMode.ENABLE&&(c=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");var P=this._transport.getRenderingIntent(l,c,E);this.pendingCleanup=!1,_||(_=this._transport.getOptionalContentConfig());var T=this._intentStates.get(P.cacheKey);T||(T=Object.create(null),this._intentStates.set(P.cacheKey,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);var C=y||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),O=!!(P.renderingIntent&_util.RenderingIntentFlag.PRINT);T.displayReadyCapability||(T.displayReadyCapability=(0,_util.createPromiseCapability)(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(P));var M=function(t){T.renderTasks.delete(F),(a.cleanupAfterRender||O)&&(a.pendingCleanup=!0),a._tryCleanup(),t?(F.capability.reject(t),a._abortOperatorList({intentState:T,reason:t instanceof Error?t:new Error(t)})):F.capability.resolve(),a._stats&&(a._stats.timeEnd("Rendering"),a._stats.timeEnd("Overall"))},F=new InternalRenderTask({callback:M,params:{canvasContext:i,viewport:o,transform:f,imageLayer:p,background:g},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:A,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:C,useRequestAnimationFrame:!O,pdfBug:this._pdfBug,pageColors:S});((n=T).renderTasks||(n.renderTasks=new Set)).add(F);var R=F.task;return Promise.all([T.displayReadyCapability.promise,_]).then(function(t){var e=_slicedToArray(t,2),r=e[0],n=e[1];a.pendingCleanup?M():(a._stats&&a._stats.time("Rendering"),F.initializeGraphics({transparency:r,optionalContentConfig:n}),F.operatorListChanged())}).catch(M),R}},{key:"getOperatorList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.intent,r=void 0===e?"display":e,n=t.annotationMode,a=void 0===n?_util.AnnotationMode.ENABLE:n,i=t.printAnnotationStorage,o=void 0===i?null:i;var s,l,u=this._transport.getRenderingIntent(r,a,o,!0),c=this._intentStates.get(u.cacheKey);(c||(c=Object.create(null),this._intentStates.set(u.cacheKey,c)),c.opListReadCapability)||((s=Object.create(null)).operatorListChanged=function(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(s))},c.opListReadCapability=(0,_util.createPromiseCapability)(),((l=c).renderTasks||(l.renderTasks=new Set)).add(s),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(u));return c.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.disableCombineTextItems,r=void 0!==e&&e,n=t.includeMarkedContent,a=void 0!==n&&n;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==r,includeMarkedContent:!0===a},{highWaterMark:100,size:function(t){return t.items.length}})}},{key:"getTextContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(function(t){return _xfa_text.XfaText.textContent(t)});var e=this.streamTextContent(t);return new Promise(function(t,r){var n=e.getReader(),a={items:[],styles:Object.create(null)};!function e(){n.read().then(function(r){var n,i=r.value;r.done?t(a):(Object.assign(a.styles,i.styles),(n=a.items).push.apply(n,_toConsumableArray(i.items)),e())},r)}()})}},{key:"getStructTree",value:function(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}},{key:"_destroy",value:function(){this.destroyed=!0;var t,e=[],r=_createForOfIteratorHelper(this._intentStates.values());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability){var a,i=_createForOfIteratorHelper(n.renderTasks);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.push(o.completed),o.cancel()}}catch(t){i.e(t)}finally{i.f()}}}}catch(t){r.e(t)}finally{r.f()}this.objs.clear();var s,l=_createForOfIteratorHelper(this._bitmaps);try{for(l.s();!(s=l.n()).done;)s.value.close()}catch(t){l.e(t)}finally{l.f()}return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}},{key:"cleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pendingCleanup=!0,this._tryCleanup(t)}},{key:"_tryCleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.pendingCleanup)return!1;var e,r=_createForOfIteratorHelper(this._intentStates.values());try{for(r.s();!(e=r.n()).done;){var n=e.value,a=n.renderTasks,i=n.operatorList;if(a.size>0||!i.lastChunk)return!1}}catch(t){r.e(t)}finally{r.f()}this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer);var o,s=_createForOfIteratorHelper(this._bitmaps);try{for(s.s();!(o=s.n()).done;){o.value.close()}}catch(t){s.e(t)}finally{s.f()}return this._bitmaps.clear(),this.pendingCleanup=!1,!0}},{key:"_startRenderPage",value:function(t,e){var r=this._intentStates.get(e);r&&(this._stats&&this._stats.timeEnd("Page Request"),r.displayReadyCapability&&r.displayReadyCapability.resolve(t))}},{key:"_renderPageChunk",value:function(t,e){for(var r=0,n=t.length;r<n;r++)e.operatorList.fnArray.push(t.fnArray[r]),e.operatorList.argsArray.push(t.argsArray[r]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;var a,i=_createForOfIteratorHelper(e.renderTasks);try{for(i.s();!(a=i.n()).done;)a.value.operatorListChanged()}catch(t){i.e(t)}finally{i.f()}t.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function(t){var e=this,r=t.renderingIntent,n=t.cacheKey,a=t.annotationStorageMap,i=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:r,cacheKey:n,annotationStorage:a}).getReader(),o=this._intentStates.get(n);o.streamReader=i,function t(){i.read().then(function(r){var n=r.value;r.done?o.streamReader=null:e._transport.destroyed||(e._renderPageChunk(n,o),t())},function(t){if(o.streamReader=null,!e._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;var r,n=_createForOfIteratorHelper(o.renderTasks);try{for(n.s();!(r=n.n()).done;)r.value.operatorListChanged()}catch(t){n.e(t)}finally{n.f()}e._tryCleanup()}if(o.displayReadyCapability)o.displayReadyCapability.reject(t);else{if(!o.opListReadCapability)throw t;o.opListReadCapability.reject(t)}}})}()}},{key:"_abortOperatorList",value:function(t){var e=this,r=t.intentState,n=t.reason,a=t.force,i=void 0!==a&&a;if(r.streamReader){if(!i){if(r.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException)return void(r.streamReaderCancelTimeout=setTimeout(function(){e._abortOperatorList({intentState:r,reason:n,force:!0}),r.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(r.streamReader.cancel(new _util.AbortException(n.message)).catch(function(){}),r.streamReader=null,!this._transport.destroyed){var o,s=_createForOfIteratorHelper(this._intentStates);try{for(s.s();!(o=s.n()).done;){var l=_slicedToArray(o.value,2),u=l[0];if(l[1]===r){this._intentStates.delete(u);break}}}catch(t){s.e(t)}finally{s.f()}this.cleanup()}}}},{key:"stats",get:function(){return this._stats}}]),t}();exports.PDFPageProxy=PDFPageProxy;var LoopbackPort=function(){function t(){_classCallCheck(this,t),this._listeners=[],this._deferred=Promise.resolve()}return _createClass(t,[{key:"postMessage",value:function(t,e){var r=this,n={data:structuredClone(t,e)};this._deferred.then(function(){var t,e=_createForOfIteratorHelper(r._listeners);try{for(e.s();!(t=e.n()).done;)t.value.call(r,n)}catch(t){e.e(t)}finally{e.f()}})}},{key:"addEventListener",value:function(t,e){this._listeners.push(e)}},{key:"removeEventListener",value:function(t,e){var r=this._listeners.indexOf(e);this._listeners.splice(r,1)}},{key:"terminate",value:function(){this._listeners.length=0}}]),t}();exports.LoopbackPort=LoopbackPort;var PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS&&"function"==typeof require)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"===("undefined"==typeof document?"undefined":_typeof(document))){var _document,_document$currentScri,pdfjsFilePath=null===(_document=document)||void 0===_document||null===(_document$currentScri=_document.currentScript)||void 0===_document$currentScri?void 0:_document$currentScri.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,e){var r;try{if(!(r=new URL(t)).origin||"null"===r.origin)return!1}catch(t){return!1}var n=new URL(e,r);return r.origin===n.origin},PDFWorkerUtil.createCDNWrapper=function(t){var e='importScripts("'.concat(t,'");');return URL.createObjectURL(new Blob([e]))};var PDFWorker=function(){function PDFWorker(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.name,r=void 0===e?null:e,n=t.port,a=void 0===n?null:n,i=t.verbosity,o=void 0===i?(0,_util.getVerbosityLevel)():i;if(_classCallCheck(this,PDFWorker),a&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(a))throw new Error("Cannot use more than one PDFWorker per port.");this.name=r,this.destroyed=!1,this.verbosity=o,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,a?(_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(a,this),this._initializeFromPort(a)):this._initialize()}return _createClass(PDFWorker,[{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"_initializeFromPort",value:function(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}},{key:"_initialize",value:function(){var t=this;if("undefined"!=typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){var e=PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,e)||(e=PDFWorkerUtil.createCDNWrapper(new URL(e,window.location).href));var r=new Worker(e),n=new _message_handler.MessageHandler("main","worker",r),a=function(){r.removeEventListener("error",i),n.destroy(),r.terminate(),t.destroyed?t._readyCapability.reject(new Error("Worker was destroyed")):t._setupFakeWorker()},i=function(){t._webWorker||a()};r.addEventListener("error",i),n.on("test",function(e){r.removeEventListener("error",i),t.destroyed?a():e?(t._messageHandler=n,t._port=r,t._webWorker=r,t._readyCapability.resolve(),n.send("configure",{verbosity:t.verbosity})):(t._setupFakeWorker(),n.destroy(),r.terminate())}),n.on("ready",function(e){if(r.removeEventListener("error",i),t.destroyed)a();else try{o()}catch(e){t._setupFakeWorker()}});var o=function(){var t=new Uint8Array;n.send("test",t,[t.buffer])};return void o()}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var t=this;PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(function(e){if(t.destroyed)t._readyCapability.reject(new Error("Worker was destroyed"));else{var r=new LoopbackPort;t._port=r;var n="fake".concat(PDFWorkerUtil.fakeWorkerId++),a=new _message_handler.MessageHandler(n+"_worker",n,r);e.setup(a,r);var i=new _message_handler.MessageHandler(n,n+"_worker",r);t._messageHandler=i,t._readyCapability.resolve(),i.send("configure",{verbosity:t.verbosity})}}).catch(function(e){t._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"fromPort",value:function(t){if(null==t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(t.port)?_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(t.port):new PDFWorker(t)}},{key:"workerSrc",get:function(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_mainThreadWorkerMessageHandler",get:function(){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(t){return null}}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this11=this,loader=function(){var _ref15=_asyncToGenerator(_regeneratorRuntime().mark(function _callee4(){var mainWorkerMessageHandler,worker;return _regeneratorRuntime().wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(mainWorkerMessageHandler=_this11._mainThreadWorkerMessageHandler,!mainWorkerMessageHandler){_context4.next=3;break}return _context4.abrupt("return",mainWorkerMessageHandler);case 3:if(!_is_node.isNodeJS||"function"!=typeof require){_context4.next=6;break}return worker=eval("require")(_this11.workerSrc),_context4.abrupt("return",worker.WorkerMessageHandler);case 6:return _context4.next=8,(0,_display_utils.loadScript)(_this11.workerSrc);case 8:return _context4.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context4.stop()}},_callee4)}));return function(){return _ref15.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}]),PDFWorker}();exports.PDFWorker=PDFWorker;var _workerPorts={writable:!0,value:new WeakMap};PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap,WorkerTransport=function(){function t(e,r,n,a){_classCallCheck(this,t),_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=e,this.loadingTask=r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:r.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this._params=a,a.useWorkerFetch||(this.CMapReaderFactory=new a.CMapReaderFactory({baseUrl:a.cMapUrl,isCompressed:a.cMapPacked}),this.StandardFontDataFactory=new a.StandardFontDataFactory({baseUrl:a.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}var e;return _createClass(t,[{key:"annotationStorage",get:function(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"stats",get:function(){return _classPrivateFieldGet(this,_docStats)}},{key:"getRenderingIntent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_util.AnnotationMode.ENABLE,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=_util.RenderingIntentFlag.DISPLAY,i=null;switch(t){case"any":a=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":a=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(t))}switch(e){case _util.AnnotationMode.DISABLE:a+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:a+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:i=((a+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE)&_util.RenderingIntentFlag.PRINT&&r instanceof _annotation_storage.PrintAnnotationStorage?r:this.annotationStorage).serializable;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(e))}return n&&(a+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:a,cacheKey:"".concat(a,"_").concat(_annotation_storage.AnnotationStorage.getHash(i)),annotationStorageMap:i}}},{key:"destroy",value:function(){var t=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var e,r=[],n=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values());try{for(n.s();!(e=n.n()).done;){var a=e.value;r.push(a._destroy())}}catch(t){n.e(t)}finally{n.f()}_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var i=this.messageHandler.sendWithPromise("Terminate",null);return r.push(i),Promise.all(r).then(function(){t.commonObjs.clear(),t.fontLoader.clear(),_classPrivateFieldSet(t,_metadataPromise,null),t._getFieldObjectsPromise=null,t._hasJSActionsPromise=null,t._networkStream&&t._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),t.messageHandler&&(t.messageHandler.destroy(),t.messageHandler=null),t.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var t=this,e=this.messageHandler,r=this.loadingTask;e.on("GetReader",function(e,r){(0,_util.assert)(t._networkStream,"GetReader - no `IPDFStream` instance available."),t._fullReader=t._networkStream.getFullReader(),t._fullReader.onProgress=function(e){t._lastProgress={loaded:e.loaded,total:e.total}},r.onPull=function(){t._fullReader.read().then(function(t){var e=t.value;t.done?r.close():((0,_util.assert)((0,_util.isArrayBuffer)(e),"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(e),1,[e]))}).catch(function(t){r.error(t)})},r.onCancel=function(e){t._fullReader.cancel(e),r.ready.catch(function(e){if(!t.destroyed)throw e})}}),e.on("ReaderHeadersReady",function(e){var n=(0,_util.createPromiseCapability)(),a=t._fullReader;return a.headersReady.then(function(){if(!a.isStreamingSupported||!a.isRangeSupported){var e;if(t._lastProgress)null===(e=r.onProgress)||void 0===e||e.call(r,t._lastProgress);a.onProgress=function(t){var e;null===(e=r.onProgress)||void 0===e||e.call(r,{loaded:t.loaded,total:t.total})}}n.resolve({isStreamingSupported:a.isStreamingSupported,isRangeSupported:a.isRangeSupported,contentLength:a.contentLength})},n.reject),n.promise}),e.on("GetRangeReader",function(e,r){(0,_util.assert)(t._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var n=t._networkStream.getRangeReader(e.begin,e.end);n?(r.onPull=function(){n.read().then(function(t){var e=t.value;t.done?r.close():((0,_util.assert)((0,_util.isArrayBuffer)(e),"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(e),1,[e]))}).catch(function(t){r.error(t)})},r.onCancel=function(e){n.cancel(e),r.ready.catch(function(e){if(!t.destroyed)throw e})}):r.close()}),e.on("GetDoc",function(e){var n=e.pdfInfo;t._numPages=n.numPages,t._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,r._capability.resolve(new PDFDocumentProxy(n,t))}),e.on("DocException",function(t){var e;switch(t.name){case"PasswordException":e=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":e=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":e=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":e=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":e=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}r._capability.reject(e)}),e.on("PasswordRequest",function(e){if(t._passwordCapability=(0,_util.createPromiseCapability)(),r.onPassword)try{r.onPassword(function(e){e instanceof Error?t._passwordCapability.reject(e):t._passwordCapability.resolve({password:e})},e.code)}catch(e){t._passwordCapability.reject(e)}else t._passwordCapability.reject(new _util.PasswordException(e.message,e.code));return t._passwordCapability.promise}),e.on("DataLoaded",function(e){var n;null===(n=r.onProgress)||void 0===n||n.call(r,{loaded:e.length,total:e.length}),t.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",function(e){t.destroyed||_classPrivateFieldGet(t,_pageCache).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",function(r){var n,a=_slicedToArray(r,3),i=a[0],o=a[1],s=a[2];if(!t.destroyed&&!t.commonObjs.has(i))switch(o){case"Font":var l=t._params;if("error"in s){var u=s.error;(0,_util.warn)("Error during font loading: ".concat(u)),t.commonObjs.resolve(i,u);break}var c=null;l.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled&&(c={registerFont:function(t,e){globalThis.FontInspector.fontAdded(t,e)}});var h=new _font_loader.FontFaceObject(s,{isEvalSupported:l.isEvalSupported,disableFontFace:l.disableFontFace,ignoreErrors:l.ignoreErrors,onUnsupportedFeature:t._onUnsupportedFeature.bind(t),fontRegistry:c});t.fontLoader.bind(h).catch(function(t){return e.sendWithPromise("FontFallback",{id:i})}).finally(function(){!l.fontExtraProperties&&h.data&&(h.data=null),t.commonObjs.resolve(i,h)});break;case"FontPath":case"Image":t.commonObjs.resolve(i,s);break;default:throw new Error("Got unknown common object type ".concat(o))}}),e.on("obj",function(e){var r=_slicedToArray(e,4),n=r[0],a=r[1],i=r[2],o=r[3];if(!t.destroyed){var s=_classPrivateFieldGet(t,_pageCache).get(a);if(!s.objs.has(n))switch(i){case"Image":if(s.objs.resolve(n,o),o){var l;if(o.bitmap){var u=o.bitmap;l=o.width*o.height*4,s._bitmaps.add(u)}else{var c;l=(null===(c=o.data)||void 0===c?void 0:c.length)||0}l>8e6&&(s.cleanupAfterRender=!0)}break;case"Pattern":s.objs.resolve(n,o);break;default:throw new Error("Got unknown object type ".concat(i))}}}),e.on("DocProgress",function(e){var n;t.destroyed||null===(n=r.onProgress)||void 0===n||n.call(r,{loaded:e.loaded,total:e.total})}),e.on("DocStats",function(e){t.destroyed||_classPrivateFieldSet(t,_docStats,Object.freeze({streamTypes:Object.freeze(e.streamTypes),fontTypes:Object.freeze(e.fontTypes)}))}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",function(e){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.CMapReaderFactory?t.CMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))}),e.on("FetchStandardFontData",function(e){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.StandardFontDataFactory?t.StandardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))})}},{key:"_onUnsupportedFeature",value:function(t){var e,r,n=t.featureId;this.destroyed||null===(e=(r=this.loadingTask).onUnsupportedFeature)||void 0===e||e.call(r,n)}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function(t){var e=this;if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));var r=t-1,n=_classPrivateFieldGet(this,_pagePromises).get(r);if(n)return n;var a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(function(t){if(e.destroyed)throw new Error("Transport destroyed");var n=new PDFPageProxy(r,t,e,e._params.ownerDocument,e._params.pdfBug);return _classPrivateFieldGet(e,_pageCache).set(r,n),n});return _classPrivateFieldGet(this,_pagePromises).set(r,a),a}},{key:"getPageIndex",value:function(t){return"object"!==_typeof(t)||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}},{key:"getAnnotations",value:function(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}},{key:"saveDocument",value:function(){var t,e,r=this;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!==(t=null===(e=this._fullReader)||void 0===e?void 0:e.filename)&&void 0!==t?t:null}).finally(function(){r.annotationStorage.resetModified()})}},{key:"getFieldObjects",value:function(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}},{key:"hasJSActions",value:function(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}},{key:"getStructTree",value:function(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(function(t){return new _optional_content_config.OptionalContentConfig(t)})}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var t=this;return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(function(e){var r,n,a,i;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:null!==(r=null===(n=t._fullReader)||void 0===n?void 0:n.filename)&&void 0!==r?r:null,contentLength:null!==(a=null===(i=t._fullReader)||void 0===i?void 0:i.contentLength)&&void 0!==a?a:null}}))}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e,r,n,a,i=arguments;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]&&i[0],t.next=3,this.messageHandler.sendWithPromise("Cleanup",null);case 3:if(!this.destroyed){t.next=5;break}return t.abrupt("return");case 5:r=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values()),t.prev=6,r.s();case 8:if((n=r.n()).done){t.next=15;break}if((a=n.value).cleanup()){t.next=13;break}throw new Error("startCleanup: Page ".concat(a.pageNumber," is currently rendering."));case 13:t.next=8;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(6),r.e(t.t0);case 20:return t.prev=20,r.f(),t.finish(20);case 23:this.commonObjs.clear(),e||this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null;case 28:case"end":return t.stop()}},t,this,[[6,17,20,23]])})),function(){return e.apply(this,arguments)})},{key:"loadingParams",get:function(){var t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}]),t}(),_objs=new WeakMap,_ensureObj=new WeakSet,PDFObjects=function(){function t(){_classCallCheck(this,t),_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var r=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,t);return r.capability.promise.then(function(){return e(r.data)}),null}var n=_classPrivateFieldGet(this,_objs)[t];if(null==n||!n.capability.settled)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return n.data}},{key:"has",value:function(t){var e=_classPrivateFieldGet(this,_objs)[t];return(null==e?void 0:e.capability.settled)||!1}},{key:"resolve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,t);r.data=e,r.capability.resolve()}},{key:"clear",value:function(){_classPrivateFieldSet(this,_objs,Object.create(null))}}]),t}();function _ensureObj2(t){return _classPrivateFieldGet(this,_objs)[t]||(_classPrivateFieldGet(this,_objs)[t]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap,RenderTask=function(){function t(e){_classCallCheck(this,t),_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,e),this.onContinue=null}return _createClass(t,[{key:"promise",get:function(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}},{key:"cancel",value:function(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}},{key:"separateAnnots",get:function(){var t=_classPrivateFieldGet(this,_internalRenderTask).operatorList.separateAnnots;if(!t)return!1;var e=_classPrivateFieldGet(this,_internalRenderTask).annotationCanvasMap;return t.form||t.canvas&&(null==e?void 0:e.size)>0}}]),t}();exports.RenderTask=RenderTask;var InternalRenderTask=function(){function t(e){var r=e.callback,n=e.params,a=e.objs,i=e.commonObjs,o=e.annotationCanvasMap,s=e.operatorList,l=e.pageIndex,u=e.canvasFactory,c=e.useRequestAnimationFrame,h=void 0!==c&&c,f=e.pdfBug,d=void 0!==f&&f,p=e.pageColors,v=void 0===p?null:p;_classCallCheck(this,t),this.callback=r,this.params=n,this.objs=a,this.commonObjs=i,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=l,this.canvasFactory=u,this._pdfBug=d,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===h&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}var e;return _createClass(t,[{key:"completed",get:function(){return this.capability.promise.catch(function(){})}},{key:"initializeGraphics",value:function(e){var r,n=e.transparency,a=void 0!==n&&n,i=e.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(_classStaticPrivateFieldSpecGet(t,t,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(t,t,_canvasInUse).add(this._canvas)}this._pdfBug&&null!==(r=globalThis.StepperManager)&&void 0!==r&&r.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var o=this.params,s=o.canvasContext,l=o.viewport,u=o.transform,c=o.imageLayer,h=o.background;this.gfx=new _canvas.CanvasGraphics(s,this.commonObjs,this.objs,this.canvasFactory,c,i,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:u,viewport:l,transparency:a,background:h}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(t,t,_canvasInUse).delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var t=this;this._useRequestAnimationFrame?window.requestAnimationFrame(function(){t._nextBound().catch(t._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function e(){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cancelled){e.next=2;break}return e.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(t,t,_canvasInUse).delete(this._canvas),this.callback()));case 4:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})}]),t}(),_canvasInUse={writable:!0,value:new WeakSet},version="2.15.349";exports.version=version;var build="b8aa9c622";exports.build=build},(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var a=r(1),i=r(133),o=r(135);function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,a=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function h(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function f(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=p(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g(t,e,r){return e&&m(t.prototype,e),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}var _=new WeakSet,w=function(){function t(){y(this,t),function(t,e){b(t,e),e.add(t)}(this,_),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}return g(t,[{key:"getValue",value:function(t,e){var r=this._storage.get(t);return void 0===r?e:Object.assign(e,r)}},{key:"getRawValue",value:function(t){return this._storage.get(t)}},{key:"removeKey",value:function(t){this._storage.delete(t),0===this._storage.size&&this.resetModified()}},{key:"setValue",value:function(t,e){var r=this._storage.get(t),n=!1;if(void 0!==r)for(var a=0,i=Object.entries(e);a<i.length;a++){var o=d(i[a],2),s=o[0],l=o[1];r[s]!==l&&(n=!0,r[s]=l)}else n=!0,this._storage.set(t,e);n&&function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(this,_,A).call(this)}},{key:"has",value:function(t){return this._storage.has(t)}},{key:"getAll",value:function(){return this._storage.size>0?(0,a.objectFromMap)(this._storage):null}},{key:"size",get:function(){return this._storage.size}},{key:"resetModified",value:function(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}},{key:"print",get:function(){return new S(this)}},{key:"serializable",get:function(){if(0===this._storage.size)return null;var t,e=new Map,r=f(this._storage);try{for(r.s();!(t=r.n()).done;){var n=d(t.value,2),a=n[0],o=n[1],s=o instanceof i.AnnotationEditor?o.serialize():o;s&&e.set(a,s)}}catch(t){r.e(t)}finally{r.f()}return e}}],[{key:"getHash",value:function(t){if(!t)return"";var e,r=new o.MurmurHash3_64,n=f(t);try{for(n.s();!(e=n.n()).done;){var a=d(e.value,2),i=a[0],s=a[1];r.update("".concat(i,":").concat(JSON.stringify(s)))}}catch(t){n.e(t)}finally{n.f()}return r.hexdigest()}}]),t}();function A(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}e.AnnotationStorage=w;var k=new WeakMap,S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(r,t);var e=l(r);function r(t){var n;return y(this,r),function(t,e,r){b(t,e),e.set(t,r)}(u(n=e.call(this)),k,{writable:!0,value:null}),function(t,e,r){(function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}})(t,h(t,e,"set"),r)}(u(n),k,structuredClone(t.serializable)),n}return g(r,[{key:"print",get:function(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}},{key:"serializable",get:function(){return function(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,h(t,e,"get"))}(this,k)}}]),r}(w);e.PrintAnnotationStorage=S},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=r(134),a=r(1);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function c(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,f(t,e,"set"),r),r}function h(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,f(t,e,"get"))}function f(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var d=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,m=new WeakMap,g=new WeakMap,b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,d,{writable:!0,value:this.focusin.bind(this)}),u(this,p,{writable:!0,value:this.focusout.bind(this)}),u(this,v,{writable:!0,value:!1}),u(this,y,{writable:!0,value:!1}),u(this,m,{writable:!0,value:!1}),u(this,g,{writable:!0,value:t._zIndex++}),this.constructor===t&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null;var r=i(this.parent.viewportBaseDimensions,2),n=r[0],o=r[1];this.x=e.x/n,this.y=e.y/o,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}return function(t,e,r){e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"setInBackground",value:function(){this.div.style.zIndex=0}},{key:"setInForeground",value:function(){this.div.style.zIndex=h(this,g)}},{key:"focusin",value:function(t){h(this,v)?c(this,v,!1):this.parent.setSelected(this)}},{key:"focusout",value:function(t){if(this.isAttachedToDOM){var e=t.relatedTarget;null!=e&&e.closest("#".concat(this.id))||(t.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}}},{key:"commitOrRemove",value:function(){this.isEmpty()?this.remove():this.commit()}},{key:"commit",value:function(){this.parent.addToAnnotationStorage(this)}},{key:"dragstart",value:function(t){var e=this.parent.div.getBoundingClientRect();this.startX=t.clientX-e.x,this.startY=t.clientY-e.y,t.dataTransfer.setData("text/plain",this.id),t.dataTransfer.effectAllowed="move"}},{key:"setAt",value:function(t,e,r,n){var a=i(this.parent.viewportBaseDimensions,2),o=a[0],s=a[1],l=i(this.screenToPageTranslation(r,n),2);r=l[0],n=l[1],this.x=(t+r)/o,this.y=(e+n)/s,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"translate",value:function(t,e){var r=i(this.parent.viewportBaseDimensions,2),n=r[0],a=r[1],o=i(this.screenToPageTranslation(t,e),2);t=o[0],e=o[1],this.x+=t/n,this.y+=e/a,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"screenToPageTranslation",value:function(t,e){switch(this.parent.viewport.rotation){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}},{key:"setDims",value:function(t,e){var r=i(this.parent.viewportBaseDimensions,2),n=r[0],a=r[1];this.div.style.width="".concat(100*t/n,"%"),this.div.style.height="".concat(100*e/a,"%")}},{key:"getInitialTranslation",value:function(){return[0,0]}},{key:"render",value:function(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",h(this,d)),this.div.addEventListener("focusout",h(this,p));var t=i(this.getInitialTranslation(),2),e=t[0],r=t[1];return this.translate(e,r),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}},{key:"pointerdown",value:function(t){var e=n.KeyboardManager.platform.isMac;0!==t.button||t.ctrlKey&&e?t.preventDefault():(t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this),c(this,v,!0))}},{key:"getRect",value:function(t,e){var r=i(this.parent.viewportBaseDimensions,2),n=r[0],a=r[1],o=i(this.parent.pageDimensions,2),s=o[0],l=o[1],u=s*t/n,c=l*e/a,h=this.x*s,f=this.y*l,d=this.width*s,p=this.height*l;switch(this.rotation){case 0:return[h+u,l-f-c-p,h+u+d,l-f-c];case 90:return[h+c,l-f+u,h+c+p,l-f+u+d];case 180:return[h-u-d,l-f+c,h-u,l-f+c+p];case 270:return[h-c-p,l-f-u-d,h-c,l-f-u];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function(t,e){var r=i(t,4),n=r[0],a=r[1],o=r[2],s=r[3],l=o-n,u=s-a;switch(this.rotation){case 0:return[n,e-s,l,u];case 90:return[n,e-a,u,l];case 180:return[o,e-a,l,u];case 270:return[o,e-s,u,l];default:throw new Error("Invalid rotation")}}},{key:"onceAdded",value:function(){}},{key:"isEmpty",value:function(){return!1}},{key:"enableEditMode",value:function(){c(this,m,!0)}},{key:"disableEditMode",value:function(){c(this,m,!1)}},{key:"isInEditMode",value:function(){return h(this,m)}},{key:"shouldGetKeyboardEvents",value:function(){return!1}},{key:"needsToBeRebuilt",value:function(){return this.div&&!this.isAttachedToDOM}},{key:"rebuild",value:function(){var t;null===(t=this.div)||void 0===t||t.addEventListener("focusin",h(this,d))}},{key:"serialize",value:function(){(0,a.unreachable)("An editor must be serializable")}},{key:"remove",value:function(){this.div.removeEventListener("focusin",h(this,d)),this.div.removeEventListener("focusout",h(this,p)),this.isEmpty()||this.commit(),this.parent.remove(this)}},{key:"select",value:function(){var t;null===(t=this.div)||void 0===t||t.classList.add("selectedEditor")}},{key:"unselect",value:function(){var t;null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor")}},{key:"updateParams",value:function(t,e){}},{key:"disableEditing",value:function(){}},{key:"enableEditing",value:function(){}},{key:"getIdForTextLayer",value:function(){return this.id}},{key:"propertiesToUpdate",get:function(){return{}}},{key:"contentDiv",get:function(){return this.div}},{key:"isEditing",get:function(){return h(this,y)},set:function(t){c(this,y,t),t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}],[{key:"_defaultLineColor",get:function(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}},{key:"deserialize",value:function(t,e){var r=new this.prototype.constructor({parent:e,id:e.getNextId()});r.rotation=t.rotation;var n=i(e.pageDimensions,2),a=n[0],o=n[1],s=i(r.getRectInCurrentCoords(t.rect,o),4),l=s[0],u=s[1],c=s[2],h=s[3];return r.x=l/a,r.y=u/o,r.width=c/a,r.height=h/o,r}}]),t}();e.AnnotationEditor=b,l(b,"_colorManager",new n.ColorManager),l(b,"_zIndex",1)},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=function(t,e,r){var n,a=g(r);try{for(a.s();!(n=a.n()).done;){var i=n.value;e.addEventListener(i,t[i].bind(t))}}catch(t){a.e(t)}finally{a.f()}},e.opacityToHex=function(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")};var n=r(1),a=r(129);function i(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){p(t,e),e.add(t)}function u(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t,e,r){p(t,e),e.set(t,r)}function p(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,m(t,e,"set"),r),r}function y(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,m(t,e,"get"))}function m(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function g(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=b(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function b(t,e){if(t){if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var w=new WeakMap,A=function(){function t(){c(this,t),d(this,w,{writable:!0,value:0})}return f(t,[{key:"getId",value:function(){var t,e;return"".concat(n.AnnotationEditorPrefix).concat((v(this,w,(t=y(this,w),e=t++,t)),e))}}]),t}(),k=new WeakMap,S=new WeakMap,x=new WeakMap,E=new WeakMap,P=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;c(this,t),d(this,k,{writable:!0,value:[]}),d(this,S,{writable:!0,value:!1}),d(this,x,{writable:!0,value:void 0}),d(this,E,{writable:!0,value:-1}),v(this,x,e)}return f(t,[{key:"add",value:function(t){var e=t.cmd,r=t.undo,n=t.mustExec,a=t.type,i=void 0===a?NaN:a,o=t.overwriteIfSameType,s=void 0!==o&&o,l=t.keepUndo,u=void 0!==l&&l;if(n&&e(),!y(this,S)){var c={cmd:e,undo:r,type:i};if(-1!==y(this,E))if(s&&y(this,k)[y(this,E)].type===i)u&&(c.undo=y(this,k)[y(this,E)].undo),y(this,k)[y(this,E)]=c;else{var h=y(this,E)+1;h===y(this,x)?y(this,k).splice(0,1):(v(this,E,h),h<y(this,k).length&&y(this,k).splice(h)),y(this,k).push(c)}else y(this,k).length>0&&(y(this,k).length=0),v(this,E,0),y(this,k).push(c)}}},{key:"undo",value:function(){-1!==y(this,E)&&(v(this,S,!0),y(this,k)[y(this,E)].undo(),v(this,S,!1),v(this,E,y(this,E)-1))}},{key:"redo",value:function(){y(this,E)<y(this,k).length-1&&(v(this,E,y(this,E)+1),v(this,S,!0),y(this,k)[y(this,E)].cmd(),v(this,S,!1))}},{key:"hasSomethingToUndo",value:function(){return-1!==y(this,E)}},{key:"hasSomethingToRedo",value:function(){return y(this,E)<y(this,k).length-1}},{key:"destroy",value:function(){v(this,k,null)}}]),t}();e.CommandManager=P;var T=new WeakSet,C=function(){function t(e){c(this,t),l(this,T),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;var r,n=t.platform.isMac,a=g(e);try{for(a.s();!(r=a.n()).done;){var i,o=s(r.value,2),u=o[0],h=o[1],f=g(u);try{for(f.s();!(i=f.n()).done;){var d=i.value,p=d.startsWith("mac+");n&&p?(this.callbacks.set(d.slice(4),h),this.allKeys.add(d.split("+").at(-1))):n||p||(this.callbacks.set(d,h),this.allKeys.add(d.split("+").at(-1)))}}catch(e){f.e(e)}finally{f.f()}}}catch(e){a.e(e)}finally{a.f()}}return f(t,[{key:"exec",value:function(t,e){if(this.allKeys.has(e.key)){var r=this.callbacks.get(u(this,T,O).call(this,e));r&&(r.bind(t)(),e.stopPropagation(),e.preventDefault())}}}],[{key:"platform",get:function(){var t="undefined"!=typeof navigator?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}]),t}();function O(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);var e=this.buffer.join("+");return this.buffer.length=0,e}e.KeyboardManager=C;var M=new WeakMap,F=function(){function t(){c(this,t),d(this,M,{writable:!0,value:null})}return f(t,[{key:"copy",value:function(t){t&&(Array.isArray(t)?v(this,M,t.map(function(t){return t.serialize()})):v(this,M,[t.serialize()]),v(this,M,y(this,M).filter(function(t){return!!t})),0===y(this,M).length&&v(this,M,null))}},{key:"paste",value:function(){return y(this,M)}},{key:"isEmpty",value:function(){return null===y(this,M)}},{key:"destroy",value:function(){v(this,M,null)}}]),t}(),R=function(){function t(){c(this,t)}return f(t,[{key:"_colors",get:function(){var t=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(t),(0,n.shadow)(this,"_colors",t)}},{key:"convert",value:function(e){var r=(0,a.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return r;var n,i=g(this._colors);try{for(i.s();!(n=i.n()).done;){var o=s(n.value,2),l=o[0];if(o[1].every(function(t,e){return t===r[e]}))return t._colorsMapping.get(l)}}catch(e){i.e(e)}finally{i.f()}return r}},{key:"getHexCode",value:function(t){var e=this._colors.get(t);return e?n.Util.makeHexColor.apply(n.Util,i(e)):t}}]),t}();e.ColorManager=R,o(R,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var I=new WeakMap,L=new WeakMap,j=new WeakMap,D=new WeakMap,N=new WeakMap,U=new WeakMap,W=new WeakMap,B=new WeakMap,G=new WeakMap,q=new WeakMap,z=new WeakMap,H=new WeakMap,V=new WeakMap,X=new WeakMap,Y=new WeakMap,K=new WeakMap,J=new WeakMap,Q=new WeakMap,$=new WeakSet,Z=new WeakSet,tt=new WeakSet,et=new WeakSet,rt=new WeakSet,nt=new WeakSet,at=new WeakSet,it=new WeakSet,ot=new WeakSet,st=function(){function t(e,r){c(this,t),l(this,ot),l(this,it),l(this,at),l(this,nt),l(this,rt),l(this,et),l(this,tt),l(this,Z),l(this,$),d(this,I,{writable:!0,value:null}),d(this,L,{writable:!0,value:new Map}),d(this,j,{writable:!0,value:new Map}),d(this,D,{writable:!0,value:new F}),d(this,N,{writable:!0,value:new P}),d(this,U,{writable:!0,value:0}),d(this,W,{writable:!0,value:null}),d(this,B,{writable:!0,value:null}),d(this,G,{writable:!0,value:new A}),d(this,q,{writable:!0,value:!1}),d(this,z,{writable:!0,value:n.AnnotationEditorType.NONE}),d(this,H,{writable:!0,value:new Set}),d(this,V,{writable:!0,value:this.keydown.bind(this)}),d(this,X,{writable:!0,value:this.onEditingAction.bind(this)}),d(this,Y,{writable:!0,value:this.onPageChanging.bind(this)}),d(this,K,{writable:!0,value:this.onTextLayerRendered.bind(this)}),d(this,J,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),d(this,Q,{writable:!0,value:null}),v(this,Q,e),v(this,B,r),y(this,B)._on("editingaction",y(this,X)),y(this,B)._on("pagechanging",y(this,Y)),y(this,B)._on("textlayerrendered",y(this,K))}return f(t,[{key:"destroy",value:function(){u(this,Z,ut).call(this),y(this,B)._off("editingaction",y(this,X)),y(this,B)._off("pagechanging",y(this,Y)),y(this,B)._off("textlayerrendered",y(this,K));var t,e=g(y(this,j).values());try{for(e.s();!(t=e.n()).done;)t.value.destroy()}catch(t){e.e(t)}finally{e.f()}y(this,j).clear(),y(this,L).clear(),v(this,I,null),y(this,H).clear(),y(this,D).destroy(),y(this,N).destroy()}},{key:"onPageChanging",value:function(t){var e=t.pageNumber;v(this,U,e-1)}},{key:"onTextLayerRendered",value:function(t){var e=t.pageNumber-1,r=y(this,j).get(e);null==r||r.onTextLayerRendered()}},{key:"focusMainContainer",value:function(){y(this,Q).focus()}},{key:"keydown",value:function(e){var r;null!==(r=this.getActive())&&void 0!==r&&r.shouldGetKeyboardEvents()||t._keyboardManager.exec(this,e)}},{key:"onEditingAction",value:function(t){["undo","redo","cut","copy","paste","delete","selectAll"].includes(t.name)&&this[t.name]()}},{key:"setEditingState",value:function(t){t?(u(this,$,lt).call(this),u(this,tt,ct).call(this,{isEditing:y(this,z)!==n.AnnotationEditorType.NONE,isEmpty:u(this,it,vt).call(this),hasSomethingToUndo:y(this,N).hasSomethingToUndo(),hasSomethingToRedo:y(this,N).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:y(this,D).isEmpty()})):(u(this,Z,ut).call(this),u(this,tt,ct).call(this,{isEditing:!1}))}},{key:"registerEditorTypes",value:function(t){v(this,W,t);var e,r=g(y(this,W));try{for(r.s();!(e=r.n()).done;){var n=e.value;u(this,et,ht).call(this,n.defaultPropertiesToUpdate)}}catch(t){r.e(t)}finally{r.f()}}},{key:"getId",value:function(){return y(this,G).getId()}},{key:"addLayer",value:function(t){y(this,j).set(t.pageIndex,t),y(this,q)?t.enable():t.disable()}},{key:"removeLayer",value:function(t){y(this,j).delete(t.pageIndex)}},{key:"updateMode",value:function(t){if(v(this,z,t),t===n.AnnotationEditorType.NONE)this.setEditingState(!1),u(this,nt,dt).call(this);else{this.setEditingState(!0),u(this,rt,ft).call(this);var e,r=g(y(this,j).values());try{for(r.s();!(e=r.n()).done;)e.value.updateMode(t)}catch(t){r.e(t)}finally{r.f()}}}},{key:"updateToolbar",value:function(t){t!==y(this,z)&&y(this,B).dispatch("switchannotationeditormode",{source:this,mode:t})}},{key:"updateParams",value:function(t,e){var r,n=g(y(this,H));try{for(n.s();!(r=n.n()).done;)r.value.updateParams(t,e)}catch(t){n.e(t)}finally{n.f()}var a,i=g(y(this,W));try{for(i.s();!(a=i.n()).done;)a.value.updateDefaultParams(t,e)}catch(t){i.e(t)}finally{i.f()}}},{key:"getEditors",value:function(t){var e,r=[],n=g(y(this,L).values());try{for(n.s();!(e=n.n()).done;){var a=e.value;a.pageIndex===t&&r.push(a)}}catch(t){n.e(t)}finally{n.f()}return r}},{key:"getEditor",value:function(t){return y(this,L).get(t)}},{key:"addEditor",value:function(t){y(this,L).set(t.id,t)}},{key:"removeEditor",value:function(t){y(this,L).delete(t.id),this.unselect(t)}},{key:"setActiveEditor",value:function(t){y(this,I)!==t&&(v(this,I,t),t&&u(this,et,ht).call(this,t.propertiesToUpdate))}},{key:"toggleSelected",value:function(t){y(this,H).has(t)?(y(this,H).delete(t),t.unselect(),u(this,tt,ct).call(this,{hasSelectedEditor:this.hasSelection})):(y(this,H).add(t),t.select(),u(this,et,ht).call(this,t.propertiesToUpdate),u(this,tt,ct).call(this,{hasSelectedEditor:!0}))}},{key:"setSelected",value:function(t){var e,r=g(y(this,H));try{for(r.s();!(e=r.n()).done;){var n=e.value;n!==t&&n.unselect()}}catch(t){r.e(t)}finally{r.f()}y(this,H).clear(),y(this,H).add(t),t.select(),u(this,et,ht).call(this,t.propertiesToUpdate),u(this,tt,ct).call(this,{hasSelectedEditor:!0})}},{key:"isSelected",value:function(t){return y(this,H).has(t)}},{key:"unselect",value:function(t){t.unselect(),y(this,H).delete(t),u(this,tt,ct).call(this,{hasSelectedEditor:this.hasSelection})}},{key:"hasSelection",get:function(){return 0!==y(this,H).size}},{key:"undo",value:function(){y(this,N).undo(),u(this,tt,ct).call(this,{hasSomethingToUndo:y(this,N).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:u(this,it,vt).call(this)})}},{key:"redo",value:function(){y(this,N).redo(),u(this,tt,ct).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:y(this,N).hasSomethingToRedo(),isEmpty:u(this,it,vt).call(this)})}},{key:"addCommands",value:function(t){y(this,N).add(t),u(this,tt,ct).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:u(this,it,vt).call(this)})}},{key:"delete",value:function(){var t=this;if(y(this,I)&&y(this,I).commitOrRemove(),this.hasSelection){var e=i(y(this,H));this.addCommands({cmd:function(){var t,r=g(e);try{for(r.s();!(t=r.n()).done;)t.value.remove()}catch(t){r.e(t)}finally{r.f()}},undo:function(){var r,n=g(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;u(t,at,pt).call(t,a)}}catch(t){n.e(t)}finally{n.f()}},mustExec:!0})}}},{key:"copy",value:function(){if(y(this,I)&&y(this,I).commitOrRemove(),this.hasSelection){var t,e=[],r=g(y(this,H));try{for(r.s();!(t=r.n()).done;){var n=t.value;n.isEmpty()||e.push(n)}}catch(t){r.e(t)}finally{r.f()}if(0===e.length)return;y(this,D).copy(e),u(this,tt,ct).call(this,{hasEmptyClipboard:!1})}}},{key:"cut",value:function(){this.copy(),this.delete()}},{key:"paste",value:function(){var t=this;if(!y(this,D).isEmpty()){this.unselectAll();var e=y(this,j).get(y(this,U)),r=y(this,D).paste().map(function(t){return e.deserialize(t)});this.addCommands({cmd:function(){var e,n=g(r);try{for(n.s();!(e=n.n()).done;){var a=e.value;u(t,at,pt).call(t,a)}}catch(t){n.e(t)}finally{n.f()}u(t,ot,yt).call(t,r)},undo:function(){var t,e=g(r);try{for(e.s();!(t=e.n()).done;)t.value.remove()}catch(t){e.e(t)}finally{e.f()}},mustExec:!0})}}},{key:"selectAll",value:function(){var t,e=g(y(this,H));try{for(e.s();!(t=e.n()).done;)t.value.commit()}catch(t){e.e(t)}finally{e.f()}u(this,ot,yt).call(this,y(this,L).values())}},{key:"unselectAll",value:function(){if(y(this,I))y(this,I).commitOrRemove();else if(0!==u(this,ot,yt).size){var t,e=g(y(this,H));try{for(e.s();!(t=e.n()).done;)t.value.unselect()}catch(t){e.e(t)}finally{e.f()}y(this,H).clear(),u(this,tt,ct).call(this,{hasSelectedEditor:!1})}}},{key:"isActive",value:function(t){return y(this,I)===t}},{key:"getActive",value:function(){return y(this,I)}},{key:"getMode",value:function(){return y(this,z)}}]),t}();function lt(){y(this,Q).addEventListener("keydown",y(this,V))}function ut(){y(this,Q).removeEventListener("keydown",y(this,V))}function ct(t){var e=this;Object.entries(t).some(function(t){var r=s(t,2),n=r[0],a=r[1];return y(e,J)[n]!==a})&&y(this,B).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(y(this,J),t)})}function ht(t){y(this,B).dispatch("annotationeditorparamschanged",{source:this,details:t})}function ft(){if(!y(this,q)){v(this,q,!0);var t,e=g(y(this,j).values());try{for(e.s();!(t=e.n()).done;)t.value.enable()}catch(t){e.e(t)}finally{e.f()}}}function dt(){if(this.unselectAll(),y(this,q)){v(this,q,!1);var t,e=g(y(this,j).values());try{for(e.s();!(t=e.n()).done;)t.value.disable()}catch(t){e.e(t)}finally{e.f()}}}function pt(t){var e=y(this,j).get(t.pageIndex);e?e.addOrRebuild(t):this.addEditor(t)}function vt(){if(0===y(this,L).size)return!0;if(1===y(this,L).size){var t,e=g(y(this,L).values());try{for(e.s();!(t=e.n()).done;)return t.value.isEmpty()}catch(t){e.e(t)}finally{e.f()}}return!1}function yt(t){y(this,H).clear();var e,r=g(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;n.isEmpty()||(y(this,H).add(n),n.select())}}catch(t){r.e(t)}finally{r.f()}u(this,tt,ct).call(this,{hasSelectedEditor:!0})}e.AnnotationEditorUIManager=st,o(st,"_keyboardManager",new C([[["ctrl+a","mac+meta+a"],st.prototype.selectAll],[["ctrl+c","mac+meta+c"],st.prototype.copy],[["ctrl+v","mac+meta+v"],st.prototype.paste],[["ctrl+x","mac+meta+x"],st.prototype.cut],[["ctrl+z","mac+meta+z"],st.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],st.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],st.prototype.delete],[["Escape","mac+Escape"],st.prototype.unselectAll]]))},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=r(1);function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=3285377520,o=4294901760,s=65535,l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.h1=e?4294967295&e:i,this.h2=e?4294967295&e:i}return function(t,e,r){e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"update",value:function(t){var e,r;if("string"==typeof t){e=new Uint8Array(2*t.length),r=0;for(var a=0,i=t.length;a<i;a++){var l=t.charCodeAt(a);l<=255?e[r++]=l:(e[r++]=l>>>8,e[r++]=255&l)}}else{if(!(0,n.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");r=(e=t.slice()).byteLength}for(var u=r>>2,c=r-4*u,h=new Uint32Array(e.buffer,0,u),f=0,d=0,p=this.h1,v=this.h2,y=3432918353,m=461845907,g=11601,b=13715,_=0;_<u;_++)1&_?p=5*(p=(p^=f=(f=(f=(f=h[_])*y&o|f*g&s)<<15|f>>>17)*m&o|f*b&s)<<13|p>>>19)+3864292196:v=5*(v=(v^=d=(d=(d=(d=h[_])*y&o|d*g&s)<<15|d>>>17)*m&o|d*b&s)<<13|v>>>19)+3864292196;switch(f=0,c){case 3:f^=e[4*u+2]<<16;case 2:f^=e[4*u+1]<<8;case 1:f=(f=(f=(f^=e[4*u])*y&o|f*g&s)<<15|f>>>17)*m&o|f*b&s,1&u?p^=f:v^=f}this.h1=p,this.h2=v}},{key:"hexdigest",value:function(){var t=this.h1,e=this.h2;t=3981806797*(t^=e>>>1)&o|36045*t&s,t=444984403*(t^=(e=4283543511*e&o|(2950163797*(e<<16|t>>>16)&o)>>>16)>>>1)&o|60499*t&s;var r=((t^=(e=3301882366*e&o|(3120437893*(e<<16|t>>>16)&o)>>>16)>>>1)>>>0).toString(16),n=(e>>>0).toString(16);return r.padStart(8,"0")+n.padStart(8,"0")}}]),t}();e.MurmurHash3_64=l},(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var a=r(1);function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,a=s(t);if(e){var i=s(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function l(){l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new x(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return{value:void 0,done:!0}}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=A(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=h(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,o),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,i,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,i)&&(y=g);var b=v.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){function a(i,o,s,l){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){a("next",t,s,l)},function(t){a("throw",t,s,l)}):e.resolve(f).then(function(t){c.value=t,s(c)},function(t){return a("throw",t,s,l)})}l(u.arg)}var i;this._invoke=function(t,r){function n(){return new e(function(e,n){a(t,r,e,n)})}return i=i?i.then(n,n):n()}}function A(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=h(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),u(w.prototype,o,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new w(c(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},_(b),u(b,s,"Generator"),u(b,i,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function u(t,e,r,n,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,a)}function c(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var v,y=function(){function t(e){var r=e.docId,n=e.onUnsupportedFeature,i=e.ownerDocument,o=void 0===i?globalThis.document:i;e.styleElement,f(this,t),this.constructor===t&&(0,a.unreachable)("Cannot initialize BaseFontLoader."),this.docId=r,this._onUnsupportedFeature=n,this._document=o,this.nativeFontFaces=[],this.styleElement=null}var e;return p(t,[{key:"addNativeFontFace",value:function(t){this.nativeFontFaces.push(t),this._document.fonts.add(t)}},{key:"insertRule",value:function(t){var e=this.styleElement;e||((e=this.styleElement=this._document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),this._document.documentElement.getElementsByTagName("head")[0].append(e));var r=e.sheet;r.insertRule(t,r.cssRules.length)}},{key:"clear",value:function(){var t,e=c(this.nativeFontFaces);try{for(e.s();!(t=e.n()).done;){var r=t.value;this._document.fonts.delete(r)}}catch(t){e.e(t)}finally{e.f()}this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:(e=function(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var i=t.apply(e,r);function o(t){u(i,n,a,o,s,"next",t)}function s(t){u(i,n,a,o,s,"throw",t)}o(void 0)})}}(l().mark(function t(e){var r,n,i=this;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.attached&&!e.missingFile){t.next=2;break}return t.abrupt("return");case 2:if(e.attached=!0,!this.isFontLoadingAPISupported){t.next=19;break}if(!(r=e.createNativeFontFace())){t.next=18;break}return this.addNativeFontFace(r),t.prev=7,t.next=10,r.loaded;case 10:t.next=18;break;case 12:throw t.prev=12,t.t0=t.catch(7),this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,a.warn)("Failed to load font '".concat(r.family,"': '").concat(t.t0,"'.")),e.disableFontFace=!0,t.t0;case 18:return t.abrupt("return");case 19:if(!(n=e.createFontFaceRule())){t.next=26;break}if(this.insertRule(n),!this.isSyncFontLoadingSupported){t.next=24;break}return t.abrupt("return");case 24:return t.next=26,new Promise(function(t){var r=i._queueLoadingCallback(t);i._prepareFontLoadEvent([n],[e],r)});case 26:case"end":return t.stop()}},t,this,[[7,12]])})),function(t){return e.apply(this,arguments)})},{key:"_queueLoadingCallback",value:function(t){(0,a.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"isFontLoadingAPISupported",get:function(){var t,e=!(null===(t=this._document)||void 0===t||!t.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",e)}},{key:"isSyncFontLoadingSupported",get:function(){(0,a.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function(){(0,a.unreachable)("Abstract method `_loadTestFont`.")}},{key:"_prepareFontLoadEvent",value:function(t,e,r){(0,a.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}]),t}();e.FontLoader=v,e.FontLoader=v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(r,t);var e=o(r);function r(t){var n;return f(this,r),(n=e.call(this,t)).loadingContext={requests:[],nextRequestId:0},n.loadTestFontId=0,n}return p(r,[{key:"isSyncFontLoadingSupported",get:function(){var t=!1;if("undefined"==typeof navigator)t=!0;else{var e=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==e?void 0:e[1])>=14&&(t=!0)}return(0,a.shadow)(this,"isSyncFontLoadingSupported",t)}},{key:"_queueLoadingCallback",value:function(t){var e=this.loadingContext,r={id:"pdfjs-font-loading-".concat(e.nextRequestId++),done:!1,complete:function(){for((0,a.assert)(!r.done,"completeRequest() cannot be called twice."),r.done=!0;e.requests.length>0&&e.requests[0].done;){var t=e.requests.shift();setTimeout(t.callback,0)}},callback:t};return e.requests.push(r),r}},{key:"_loadTestFont",get:function(){return(0,a.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}},{key:"_prepareFontLoadEvent",value:function(t,e,r){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function i(t,e,r,n){return t.substring(0,e)+n+t.substring(e+r)}var o,s,l=this._document.createElement("canvas");l.width=1,l.height=1;var u=l.getContext("2d"),h=0,f="lt".concat(Date.now()).concat(this.loadTestFontId++),d=this._loadTestFont,p=1482184792,v=n(d=i(d,976,f.length,f),16);for(o=0,s=f.length-3;o<s;o+=4)v=v-p+n(f,o)|0;o<f.length&&(v=v-p+n(f+"XXX",o)|0),d=i(d,16,4,(0,a.string32)(v));var y="url(data:font/opentype;base64,".concat(btoa(d),");"),m='@font-face {font-family:"'.concat(f,'";src:').concat(y,"}");this.insertRule(m);var g,b=[],_=c(e);try{for(_.s();!(g=_.n()).done;){var w=g.value;b.push(w.loadedName)}}catch(t){_.e(t)}finally{_.f()}b.push(f);var A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(var k=0,S=b;k<S.length;k++){var x=S[k],E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=x,A.append(E)}this._document.body.append(A),function t(e,r){++h>30?((0,a.warn)("Load test font never loaded."),r()):(u.font="30px "+e,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0?r():setTimeout(t.bind(null,e,r)))}(f,function(){A.remove(),r.complete()})}}]),r}(y);var m=function(){function t(e,r){var n=r.isEvalSupported,a=void 0===n||n,i=r.disableFontFace,o=void 0!==i&&i,s=r.ignoreErrors,l=void 0!==s&&s,u=r.onUnsupportedFeature,c=r.fontRegistry,h=void 0===c?null:c;for(var d in f(this,t),this.compiledGlyphs=Object.create(null),e)this[d]=e[d];this.isEvalSupported=!1!==a,this.disableFontFace=!0===o,this.ignoreErrors=!0===l,this._onUnsupportedFeature=u,this.fontRegistry=h}return p(t,[{key:"createNativeFontFace",value:function(){if(!this.data||this.disableFontFace)return null;var t;if(this.cssFontInfo){var e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),t}},{key:"createFontFaceRule",value:function(){if(!this.data||this.disableFontFace)return null;var t,e=(0,a.bytesToString)(this.data),r="url(data:".concat(this.mimetype,";base64,").concat(btoa(e),");");if(this.cssFontInfo){var n="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(n+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),t='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(n,"src:").concat(r,"}")}else t='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(r,"}");return this.fontRegistry&&this.fontRegistry.registerFont(this,r),t}},{key:"getPathGenerator",value:function(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];var r;try{r=t.get(this.loadedName+"_path_"+e)}catch(t){if(!this.ignoreErrors)throw t;return this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,a.warn)('getPathGenerator - ignoring character: "'.concat(t,'".')),this.compiledGlyphs[e]=function(t,e){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){var n,i=[],o=c(r);try{for(o.s();!(n=o.n()).done;){var s=n.value,l=void 0!==s.args?s.args.join(","):"";i.push("c.",s.cmd,"(",l,");\n")}}catch(t){o.e(t)}finally{o.f()}return this.compiledGlyphs[e]=new Function("c","size",i.join(""))}return this.compiledGlyphs[e]=function(t,e){var n,a=c(r);try{for(a.s();!(n=a.n()).done;){var i=n.value;"scale"===i.cmd&&(i.args=[e,-e]),t[i.cmd].apply(t,i.args)}}catch(t){a.e(t)}finally{a.f()}}}}]),t}();e.FontFaceObject=m},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=r(1),a=r(129),i=r(138),o=r(139),s=r(3);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function c(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=v(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var m=4096,g=16;function b(t){if(t._transformStack&&(t._transformStack=[]),!t.mozCurrentTransform){t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._originalResetTransform=t.resetTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[];try{var e=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),"lineWidth");t._setLineWidth=e.set,t._getLineWidth=e.get,Object.defineProperty(t,"lineWidth",{set:function(t){this._setLineWidth(1.000001*t)},get:function(){return this._getLineWidth()}})}catch(t){}Object.defineProperty(t,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function(){var t=p(this._transformMatrix,6),e=t[0],r=t[1],n=t[2],a=t[3],i=t[4],o=t[5],s=e*a-r*n,l=r*n-e*a;return[a/s,r/l,n/l,e/s,(a*i-n*o)/l,(r*i-e*o)/s]}}),t.save=function(){var t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},t.restore=function(){0===this._transformStack.length&&(0,n.warn)("Tried to restore a ctx when the stack was already empty.");var t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},t.translate=function(t,e){var r=this._transformMatrix;r[4]=r[0]*t+r[2]*e+r[4],r[5]=r[1]*t+r[3]*e+r[5],this._originalTranslate(t,e)},t.scale=function(t,e){var r=this._transformMatrix;r[0]*=t,r[1]*=t,r[2]*=e,r[3]*=e,this._originalScale(t,e)},t.transform=function(e,r,n,a,i,o){var s=this._transformMatrix;this._transformMatrix=[s[0]*e+s[2]*r,s[1]*e+s[3]*r,s[0]*n+s[2]*a,s[1]*n+s[3]*a,s[0]*i+s[2]*o+s[4],s[1]*i+s[3]*o+s[5]],t._originalTransform(e,r,n,a,i,o)},t.setTransform=function(e,r,n,a,i,o){this._transformMatrix=[e,r,n,a,i,o],t._originalSetTransform(e,r,n,a,i,o)},t.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],t._originalResetTransform()},t.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this._transformMatrix;this._transformMatrix=[n[0]*e+n[2]*r,n[1]*e+n[3]*r,n[0]*-r+n[2]*e,n[1]*-r+n[3]*e,n[4],n[5]],this._originalRotate(t)}}}var _=function(){function t(e){h(this,t),this.canvasFactory=e,this.cache=Object.create(null)}return d(t,[{key:"getCanvas",value:function(t,e,r,n){var a;return void 0!==this.cache[t]?(a=this.cache[t],this.canvasFactory.reset(a,e,r),a.context.setTransform(1,0,0,1,0,0)):(a=this.canvasFactory.create(e,r),this.cache[t]=a),n&&b(a.context),a}},{key:"delete",value:function(t){delete this.cache[t]}},{key:"clear",value:function(){for(var t in this.cache){var e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}]),t}();function w(t,e,r,n,a,i,o,s,l,u){var c=p(t.mozCurrentTransform,6),h=c[0],f=c[1],d=c[2],v=c[3],y=c[4],m=c[5];if(0===f&&0===d){var g=o*h+y,b=Math.round(g),_=s*v+m,w=Math.round(_),A=(o+l)*h+y,k=Math.abs(Math.round(A)-b)||1,S=(s+u)*v+m,x=Math.abs(Math.round(S)-w)||1;return t.setTransform(Math.sign(h),0,0,Math.sign(v),b,w),t.drawImage(e,r,n,a,i,0,0,k,x),t.setTransform(h,f,d,v,y,m),[k,x]}if(0===h&&0===v){var E=s*d+y,P=Math.round(E),T=o*f+m,C=Math.round(T),O=(s+u)*d+y,M=Math.abs(Math.round(O)-P)||1,F=(o+l)*f+m,R=Math.abs(Math.round(F)-C)||1;return t.setTransform(0,Math.sign(f),Math.sign(d),0,P,C),t.drawImage(e,r,n,a,i,0,0,R,M),t.setTransform(h,f,d,v,y,m),[R,M]}return t.drawImage(e,r,n,a,i,o,s,l,u),[Math.hypot(h,f)*l,Math.hypot(d,v)*u]}var A=function(){function t(e,r){h(this,t),this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,e,r])}return d(t,[{key:"clone",value:function(){var t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}},{key:"setCurrentPoint",value:function(t,e){this.x=t,this.y=e}},{key:"updatePathMinMax",value:function(t,e,r){var a=p(n.Util.applyTransform([e,r],t),2);e=a[0],r=a[1],this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,r)}},{key:"updateRectMinMax",value:function(t,e){var r=n.Util.applyTransform(e,t),a=n.Util.applyTransform(e.slice(2),t);this.minX=Math.min(this.minX,r[0],a[0]),this.minY=Math.min(this.minY,r[1],a[1]),this.maxX=Math.max(this.maxX,r[0],a[0]),this.maxY=Math.max(this.maxY,r[1],a[1])}},{key:"updateScalingPathMinMax",value:function(t,e){n.Util.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}},{key:"updateCurvePathMinMax",value:function(t,e,r,a,i,o,s,l,u,c){var h=n.Util.bezierBoundingBox(e,r,a,i,o,s,l,u);c?(c[0]=Math.min(c[0],h[0],h[2]),c[1]=Math.max(c[1],h[0],h[2]),c[2]=Math.min(c[2],h[1],h[3]),c[3]=Math.max(c[3],h[1],h[3])):this.updateRectMinMax(t,h)}},{key:"getPathBoundingBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.PathType.FILL,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[this.minX,this.minY,this.maxX,this.maxY];if(t===i.PathType.STROKE){e||(0,n.unreachable)("Stroke bounding box must include transform.");var a=n.Util.singularValueDecompose2dScale(e),o=a[0]*this.lineWidth/2,s=a[1]*this.lineWidth/2;r[0]-=o,r[1]-=s,r[2]+=o,r[3]+=s}return r}},{key:"updateClipFromPath",value:function(){var t=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}},{key:"isEmptyClip",value:function(){return this.minX===1/0}},{key:"startNewPathAndClipBox",value:function(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}},{key:"getClippedPathBoundingBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.PathType.FILL,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n.Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}]),t}();function k(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!=typeof ImageData&&e instanceof ImageData)t.putImageData(e,0,0);else{var a,i,o,s,l,u,c,h,f,d=e.height,p=e.width,v=d%g,y=(d-v)/g,m=0===v?y:y+1,b=t.createImageData(p,g),_=0,w=e.data,A=b.data;if(r)switch(r.length){case 1:u=r[0],c=r[0],h=r[0],f=r[0];break;case 4:u=r[0],c=r[1],h=r[2],f=r[3]}if(e.kind===n.ImageKind.GRAYSCALE_1BPP){var k=w.byteLength,S=new Uint32Array(A.buffer,0,A.byteLength>>2),x=S.length,E=p+7>>3,P=4294967295,T=n.FeatureTest.isLittleEndian?4278190080:255;if(f&&255===f[0]&&0===f[255]){var C=[T,P];P=C[0],T=C[1]}for(i=0;i<m;i++){for(s=i<y?g:v,a=0,o=0;o<s;o++){for(var O=k-_,M=0,F=O>E?p:8*O-7,R=-8&F,I=0,L=0;M<R;M+=8)L=w[_++],S[a++]=128&L?P:T,S[a++]=64&L?P:T,S[a++]=32&L?P:T,S[a++]=16&L?P:T,S[a++]=8&L?P:T,S[a++]=4&L?P:T,S[a++]=2&L?P:T,S[a++]=1&L?P:T;for(;M<F;M++)0===I&&(L=w[_++],I=128),S[a++]=L&I?P:T,I>>=1}for(;a<x;)S[a++]=0;t.putImageData(b,0,i*g)}}else if(e.kind===n.ImageKind.RGBA_32BPP){var j=!!(u||c||h);for(o=0,l=p*g*4,i=0;i<y;i++){if(A.set(w.subarray(_,_+l)),_+=l,j)for(var D=0;D<l;D+=4)u&&(A[D+0]=u[A[D+0]]),c&&(A[D+1]=c[A[D+1]]),h&&(A[D+2]=h[A[D+2]]);t.putImageData(b,0,o),o+=g}if(i<m){if(l=p*v*4,A.set(w.subarray(_,_+l)),j)for(var N=0;N<l;N+=4)u&&(A[N+0]=u[A[N+0]]),c&&(A[N+1]=c[A[N+1]]),h&&(A[N+2]=h[A[N+2]]);t.putImageData(b,0,o)}}else{if(e.kind!==n.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(e.kind));var U=!!(u||c||h);for(l=p*(s=g),i=0;i<m;i++){for(i>=y&&(l=p*(s=v)),a=0,o=l;o--;)A[a++]=w[_++],A[a++]=w[_++],A[a++]=w[_++],A[a++]=255;if(U)for(var W=0;W<a;W+=4)u&&(A[W+0]=u[A[W+0]]),c&&(A[W+1]=c[A[W+1]]),h&&(A[W+2]=h[A[W+2]]);t.putImageData(b,0,i*g)}}}}function S(t,e){if(e.bitmap)t.drawImage(e.bitmap,0,0);else for(var r=e.height,n=e.width,a=r%g,i=(r-a)/g,s=0===a?i:i+1,l=t.createImageData(n,g),u=0,c=e.data,h=l.data,f=0;f<s;f++){var d=f<i?g:a;u=(0,o.applyMaskImageData)({src:c,srcPos:u,dest:h,width:n,height:d}).srcPos,t.putImageData(l,0,f*g)}}function x(t,e){for(var r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],n=0,a=r.length;n<a;n++){var i=r[n];void 0!==t[i]&&(e[i]=t[i])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function E(t,e){t.strokeStyle=t.fillStyle=e||"#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function P(t,e,r,n){for(var a=t.length,i=3;i<a;i+=4){var o=t[i];if(0===o)t[i-3]=e,t[i-2]=r,t[i-1]=n;else if(o<255){var s=255-o;t[i-3]=t[i-3]*o+e*s>>8,t[i-2]=t[i-2]*o+r*s>>8,t[i-1]=t[i-1]*o+n*s>>8}}}function T(t,e,r){for(var n=t.length,a=3;a<n;a+=4){var i=r?r[t[a]]:t[a];e[a]=e[a]*i*.00392156862745098|0}}function C(t,e,r){for(var n=t.length,a=3;a<n;a+=4){var i=77*t[a-3]+152*t[a-2]+28*t[a-1];e[a]=r?e[a]*r[i>>8]>>8:e[a]*i>>16}}function O(t,e){var r=n.Util.singularValueDecompose2dScale(t);r[0]=Math.fround(r[0]),r[1]=Math.fround(r[1]);var i=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==e?e:r[0]<=i||r[1]<=i}var M=["butt","round","square"],F=["miter","round","bevel"],R={},I={},L=new WeakSet,j=function(){function t(e,r,n,a,i,o,s,l){h(this,t),function(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}(this,L),this.ctx=e,this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=n,this.canvasFactory=a,this.imageLayer=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=o,this.cachedCanvases=new _(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(null==l?void 0:l.background)||null,this.foregroundColor=(null==l?void 0:l.foreground)||null,e&&b(e),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}return d(t,[{key:"getObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}},{key:"beginDrawing",value:function(t){var e=t.transform,r=t.viewport,n=t.transparency,i=void 0!==n&&n,o=t.background,s=void 0===o?null:o,l=this.ctx.canvas.width,u=this.ctx.canvas.height,c=s||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;var h=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;var f,d,v=this.backgroundColor=this.ctx.fillStyle;if(this.ctx.fillStyle=c,f="string"==typeof(d=this.ctx.fillStyle)&&/^#[0-9A-Fa-f]{6}$/.test(d),"#000000"===h&&"#ffffff"===v||h===v||!f)this.foregroundColor=this.backgroundColor=null;else{var y=p((0,a.getRGB)(d),3),m=y[0],g=y[1],b=y[2],_=function(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)},w=Math.round(.2126*_(m)+.7152*_(g)+.0722*_(b));this.selectColor=function(t,e,r){var n=.2126*_(t)+.7152*_(e)+.0722*_(r);return Math.round(n)===w?v:h}}}if(this.ctx.fillStyle=this.backgroundColor||c,this.ctx.fillRect(0,0,l,u),this.ctx.restore(),i){var A=this.cachedCanvases.getCanvas("transparent",l,u,!0);this.compositeCtx=this.ctx,this.transparentCanvas=A.canvas,this.ctx=A.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),E(this.ctx,this.foregroundColor),e&&(this.ctx.transform.apply(this.ctx,e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform.apply(this.ctx,r.transform),this.viewportScale=r.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}},{key:"executeOperatorList",value:function(t,e,r,a){var i=t.argsArray,o=t.fnArray,s=e||0,l=i.length;if(l===s)return s;for(var u,h=l-s>10&&"function"==typeof r,f=h?Date.now()+15:0,d=0,p=this.commonObjs,v=this.objs;;){if(void 0!==a&&s===a.nextBreakPoint)return a.breakIt(s,r),s;if((u=o[s])!==n.OPS.dependency)this[u].apply(this,i[s]);else{var y,m=c(i[s]);try{for(m.s();!(y=m.n()).done;){var g=y.value,b=g.startsWith("g_")?p:v;if(!b.has(g))return b.get(g,r),s}}catch(t){m.e(t)}finally{m.f()}}if(++s===l)return s;if(h&&++d>10){if(Date.now()>f)return r(),s;d=0}}}},{key:"endDrawing",value:function(){u(this,L,D).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();var t,e=c(this._cachedBitmapsMap.values());try{for(e.s();!(t=e.n()).done;){var r,n=t.value,a=c(n.values());try{for(a.s();!(r=a.n()).done;){var i=r.value;"undefined"!=typeof HTMLCanvasElement&&i instanceof HTMLCanvasElement&&(i.width=i.height=0)}}catch(t){a.e(t)}finally{a.f()}n.clear()}}catch(t){e.e(t)}finally{e.f()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}},{key:"_scaleImage",value:function(t,e){for(var r,n,a=t.width,i=t.height,o=Math.max(Math.hypot(e[0],e[1]),1),s=Math.max(Math.hypot(e[2],e[3]),1),l=a,u=i,c="prescale1";o>2&&l>1||s>2&&u>1;){var h=l,f=u;o>2&&l>1&&(o/=l/(h=Math.ceil(l/2))),s>2&&u>1&&(s/=u/(f=Math.ceil(u/2))),(n=(r=this.cachedCanvases.getCanvas(c,h,f,!1)).context).clearRect(0,0,h,f),n.drawImage(t,0,0,l,u,0,0,h,f),t=r.canvas,l=h,u=f,c="prescale1"===c?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:u}}},{key:"_createMaskCanvas",value:function(t){var e,r,a,o,s=this.ctx,l=t.width,u=t.height,c=this.current.fillColor,h=this.current.patternFill,f=s.mozCurrentTransform;if((t.bitmap||t.data)&&t.count>1){var d=t.bitmap||t.data.buffer,p=f.slice(0,4);r=JSON.stringify(h?p:[p,c]),(e=this._cachedBitmapsMap.get(d))||(e=new Map,this._cachedBitmapsMap.set(d,e));var v=e.get(r);if(v&&!h)return{canvas:v,offsetX:Math.round(Math.min(f[0],f[2])+f[4]),offsetY:Math.round(Math.min(f[1],f[3])+f[5])};a=v}a||S((o=this.cachedCanvases.getCanvas("maskCanvas",l,u,!1)).context,t);var y=n.Util.transform(f,[1/l,0,0,-1/u,0,0]);y=n.Util.transform(y,[1,0,0,1,0,-u]);var m=n.Util.applyTransform([0,0],y),g=n.Util.applyTransform([l,u],y),b=n.Util.normalizeRect([m[0],m[1],g[0],g[1]]),_=Math.round(b[2]-b[0])||1,A=Math.round(b[3]-b[1])||1,k=this.cachedCanvases.getCanvas("fillCanvas",_,A,!0),x=k.context,E=Math.min(m[0],g[0]),P=Math.min(m[1],g[1]);x.translate(-E,-P),x.transform.apply(x,y),a||(a=(a=this._scaleImage(o.canvas,x.mozCurrentTransformInverse)).img,e&&h&&e.set(r,a)),x.imageSmoothingEnabled=O(x.mozCurrentTransform,t.interpolate),w(x,a,0,0,a.width,a.height,0,0,l,u),x.globalCompositeOperation="source-in";var T=n.Util.transform(x.mozCurrentTransformInverse,[1,0,0,1,-E,-P]);return x.fillStyle=h?c.getPattern(s,this,T,i.PathType.FILL):c,x.fillRect(0,0,l,u),e&&!h&&(this.cachedCanvases.delete("fillCanvas"),e.set(r,k.canvas)),{canvas:k.canvas,offsetX:Math.round(E),offsetY:Math.round(P)}}},{key:"setLineWidth",value:function(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=t,this.ctx.lineWidth=t}},{key:"setLineCap",value:function(t){this.ctx.lineCap=M[t]}},{key:"setLineJoin",value:function(t){this.ctx.lineJoin=F[t]}},{key:"setMiterLimit",value:function(t){this.ctx.miterLimit=t}},{key:"setDash",value:function(t,e){var r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(t),r.lineDashOffset=e)}},{key:"setRenderingIntent",value:function(t){}},{key:"setFlatness",value:function(t){}},{key:"setGState",value:function(t){for(var e=0,r=t.length;e<r;e++){var n=t[e],a=n[0],i=n[1];switch(a){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=n[1];break;case"ca":this.current.fillAlpha=n[1],this.ctx.globalAlpha=n[1];break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=i}}}},{key:"inSMaskMode",get:function(){return!!this.suspendedCtx}},{key:"checkSMaskState",value:function(){var t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var t=this.ctx.canvas.width,e=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(r,t,e,!0);this.suspendedCtx=this.ctx,this.ctx=n.context;var a=this.ctx;a.setTransform.apply(a,this.suspendedCtx.mozCurrentTransform),x(this.suspendedCtx,a),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=function(){t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},t.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},t.transform=function(t,r,n,a,i,o){e.transform(t,r,n,a,i,o),this.__originalTransform(t,r,n,a,i,o)},t.setTransform=function(t,r,n,a,i,o){e.setTransform(t,r,n,a,i,o),this.__originalSetTransform(t,r,n,a,i,o)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},t.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},t.bezierCurveTo=function(t,r,n,a,i,o){e.bezierCurveTo(t,r,n,a,i,o),this.__originalBezierCurveTo(t,r,n,a,i,o)},t.rect=function(t,r,n,a){e.rect(t,r,n,a),this.__originalRect(t,r,n,a)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),x(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}},{key:"compose",value:function(t){if(this.current.activeSMask){t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var e=this.current.activeSMask;!function(t,e,r,n){var a=n[0],i=n[1],o=n[2]-a,s=n[3]-i;0!==o&&0!==s&&(function(t,e,r,n,a,i,o,s,l,u,c){var h,f=!!i,d=f?i[0]:0,p=f?i[1]:0,v=f?i[2]:0;h="Luminosity"===a?C:T;for(var y=Math.min(n,Math.ceil(1048576/r)),m=0;m<n;m+=y){var g=Math.min(y,n-m),b=t.getImageData(s-u,m+(l-c),r,g),_=e.getImageData(s,m+l,r,g);f&&P(b.data,d,p,v),h(b.data,_.data,o),e.putImageData(_,s,m+l)}}(e.context,r,o,s,e.subtype,e.backdrop,e.transferMap,a,i,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(r.canvas,0,0),t.restore())}(this.suspendedCtx,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}}},{key:"save",value:function(){this.inSMaskMode?(x(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();var t=this.current;this.stateStack.push(t),this.current=t.clone()}},{key:"restore",value:function(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),x(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}},{key:"transform",value:function(t,e,r,n,a,i){this.ctx.transform(t,e,r,n,a,i),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function(t,e,r){for(var a,i,o=this.ctx,s=this.current,l=s.x,u=s.y,c=o.mozCurrentTransform,h=0===c[0]&&0===c[3]||0===c[1]&&0===c[2],f=h?r.slice(0):null,d=0,p=0,v=t.length;d<v;d++)switch(0|t[d]){case n.OPS.rectangle:l=e[p++],u=e[p++];var y=e[p++],m=e[p++],g=l+y,b=u+m;o.moveTo(l,u),0===y||0===m?o.lineTo(g,b):(o.lineTo(g,u),o.lineTo(g,b),o.lineTo(l,b)),h||s.updateRectMinMax(c,[l,u,g,b]),o.closePath();break;case n.OPS.moveTo:l=e[p++],u=e[p++],o.moveTo(l,u),h||s.updatePathMinMax(c,l,u);break;case n.OPS.lineTo:l=e[p++],u=e[p++],o.lineTo(l,u),h||s.updatePathMinMax(c,l,u);break;case n.OPS.curveTo:a=l,i=u,l=e[p+4],u=e[p+5],o.bezierCurveTo(e[p],e[p+1],e[p+2],e[p+3],l,u),s.updateCurvePathMinMax(c,a,i,e[p],e[p+1],e[p+2],e[p+3],l,u,f),p+=6;break;case n.OPS.curveTo2:a=l,i=u,o.bezierCurveTo(l,u,e[p],e[p+1],e[p+2],e[p+3]),s.updateCurvePathMinMax(c,a,i,l,u,e[p],e[p+1],e[p+2],e[p+3],f),l=e[p+2],u=e[p+3],p+=4;break;case n.OPS.curveTo3:a=l,i=u,l=e[p+2],u=e[p+3],o.bezierCurveTo(e[p],e[p+1],l,u,l,u),s.updateCurvePathMinMax(c,a,i,e[p],e[p+1],l,u,l,u,f),p+=4;break;case n.OPS.closePath:o.closePath()}h&&s.updateScalingPathMinMax(c,f),s.setCurrentPoint(l,u)}},{key:"closePath",value:function(){this.ctx.closePath()}},{key:"stroke",value:function(t){t=void 0===t||t;var e=this.ctx,r=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===l(r)&&null!=r&&r.getPattern?(e.save(),e.strokeStyle=r.getPattern(e,this,e.mozCurrentTransformInverse,i.PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"fill",value:function(t){t=void 0===t||t;var e=this.ctx,r=this.current.fillColor,n=!1;this.current.patternFill&&(e.save(),e.fillStyle=r.getPattern(e,this,e.mozCurrentTransformInverse,i.PathType.FILL),n=!0);var a=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==a&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),n&&e.restore(),t&&this.consumePath(a)}},{key:"eoFill",value:function(){this.pendingEOFill=!0,this.fill()}},{key:"fillStroke",value:function(){this.fill(!1),this.stroke(!1),this.consumePath()}},{key:"eoFillStroke",value:function(){this.pendingEOFill=!0,this.fillStroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}},{key:"endPath",value:function(){this.consumePath()}},{key:"clip",value:function(){this.pendingClip=R}},{key:"eoClip",value:function(){this.pendingClip=I}},{key:"beginText",value:function(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function(){var t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();var r,n=c(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;e.setTransform.apply(e,a.transform),e.translate(a.x,a.y),a.addToPath(e,a.fontSize)}}catch(t){n.e(t)}finally{n.f()}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}},{key:"setCharSpacing",value:function(t){this.current.charSpacing=t}},{key:"setWordSpacing",value:function(t){this.current.wordSpacing=t}},{key:"setHScale",value:function(t){this.current.textHScale=t/100}},{key:"setLeading",value:function(t){this.current.leading=-t}},{key:"setFont",value:function(t,e){var r=this.commonObjs.get(t),a=this.current;if(!r)throw new Error("Can't find font for ".concat(t));if(a.fontMatrix=r.fontMatrix||n.FONT_IDENTITY_MATRIX,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||(0,n.warn)("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=r,this.current.fontSize=e,!r.isType3Font){var i=r.loadedName||"sans-serif",o="normal";r.black?o="900":r.bold&&(o="bold");var s=r.italic?"italic":"normal",l='"'.concat(i,'", ').concat(r.fallbackName),u=e;e<16?u=16:e>100&&(u=100),this.current.fontSizeScale=e/u,this.ctx.font="".concat(s," ").concat(o," ").concat(u,"px ").concat(l)}}},{key:"setTextRenderingMode",value:function(t){this.current.textRenderingMode=t}},{key:"setTextRise",value:function(t){this.current.textRise=t}},{key:"moveText",value:function(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}},{key:"setLeadingMoveText",value:function(t,e){this.setLeading(-e),this.moveText(t,e)}},{key:"setTextMatrix",value:function(t,e,r,n,a,i){this.current.textMatrix=[t,e,r,n,a,i],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function(t,e,r,a){var i,o=this.ctx,s=this.current,l=s.font,u=s.textRenderingMode,c=s.fontSize/s.fontSizeScale,h=u&n.TextRenderingMode.FILL_STROKE_MASK,f=!!(u&n.TextRenderingMode.ADD_TO_PATH_FLAG),d=s.patternFill&&!l.missingFile;(l.disableFontFace||f||d)&&(i=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||d?(o.save(),o.translate(e,r),o.beginPath(),i(o,c),a&&o.setTransform.apply(o,a),h!==n.TextRenderingMode.FILL&&h!==n.TextRenderingMode.FILL_STROKE||o.fill(),h!==n.TextRenderingMode.STROKE&&h!==n.TextRenderingMode.FILL_STROKE||o.stroke(),o.restore()):(h!==n.TextRenderingMode.FILL&&h!==n.TextRenderingMode.FILL_STROKE||o.fillText(t,e,r),h!==n.TextRenderingMode.STROKE&&h!==n.TextRenderingMode.FILL_STROKE||o.strokeText(t,e,r)),f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:o.mozCurrentTransform,x:e,y:r,fontSize:c,addToPath:i})}},{key:"isFontSubpixelAAEnabled",get:function(){var t=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1).context;t.scale(1.5,1),t.fillText("I",0,10);for(var e=t.getImageData(0,0,10,10).data,r=!1,a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){r=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",r)}},{key:"showText",value:function(t){var e=this.current,r=e.font;if(r.isType3Font)return this.showType3Text(t);var a=e.fontSize;if(0!==a){var o,s=this.ctx,l=e.fontSizeScale,u=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,f=e.textHScale*h,d=t.length,p=r.vertical,v=p?1:-1,y=r.defaultVMetrics,m=a*e.fontMatrix[0],g=e.textRenderingMode===n.TextRenderingMode.FILL&&!r.disableFontFace&&!e.patternFill;if(s.save(),s.transform.apply(s,e.textMatrix),s.translate(e.x,e.y+e.textRise),h>0?s.scale(f,-1):s.scale(f,1),e.patternFill){s.save();var b=e.fillColor.getPattern(s,this,s.mozCurrentTransformInverse,i.PathType.FILL);o=s.mozCurrentTransform,s.restore(),s.fillStyle=b}var _=e.lineWidth,w=e.textMatrixScale;if(0===w||0===_){var A=e.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;A!==n.TextRenderingMode.STROKE&&A!==n.TextRenderingMode.FILL_STROKE||(_=this.getSinglePixelWidth())}else _/=w;1!==l&&(s.scale(l,l),_/=l),s.lineWidth=_;var k,S=0;for(k=0;k<d;++k){var x=t[k];if("number"!=typeof x){var E=!1,P=(x.isSpace?c:0)+u,T=x.fontChar,C=x.accent,O=void 0,M=void 0,F=x.width;if(p){var R=x.vmetric||y,I=-(x.vmetric?R[1]:.5*F)*m,L=R[2]*m;F=R?-R[0]:F,O=I/l,M=(S+L)/l}else O=S/l,M=0;if(r.remeasure&&F>0){var j=1e3*s.measureText(T).width/a*l;if(F<j&&this.isFontSubpixelAAEnabled){var D=F/j;E=!0,s.save(),s.scale(D,1),O/=D}else F!==j&&(O+=(F-j)/2e3*a/l)}if(this.contentVisible&&(x.isInFont||r.missingFile))if(g&&!C)s.fillText(T,O,M);else if(this.paintChar(T,O,M,o),C){var N=O+a*C.offset.x/l,U=M-a*C.offset.y/l;this.paintChar(C.fontChar,N,U,o)}S+=p?F*m-P*h:F*m+P*h,E&&s.restore()}else S+=v*x*a/1e3}p?e.y-=S:e.x+=S*f,s.restore(),this.compose()}}},{key:"showType3Text",value:function(t){var e,r,a,i,o=this.ctx,s=this.current,l=s.font,u=s.fontSize,c=s.fontDirection,h=l.vertical?1:-1,f=s.charSpacing,d=s.wordSpacing,p=s.textHScale*c,v=s.fontMatrix||n.FONT_IDENTITY_MATRIX,y=t.length;if(s.textRenderingMode!==n.TextRenderingMode.INVISIBLE&&0!==u){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,o.save(),o.transform.apply(o,s.textMatrix),o.translate(s.x,s.y),o.scale(p,c),e=0;e<y;++e)if("number"!=typeof(r=t[e])){var m=(r.isSpace?d:0)+f,g=l.charProcOperatorList[r.operatorListId];g?(this.contentVisible&&(this.processingType3=r,this.save(),o.scale(u,u),o.transform.apply(o,v),this.executeOperatorList(g),this.restore()),a=n.Util.applyTransform([r.width,0],v)[0]*u+m,o.translate(a,0),s.x+=a*p):(0,n.warn)('Type3 character "'.concat(r.operatorListId,'" is not available.'))}else i=h*r*u/1e3,this.ctx.translate(i,0),s.x+=i*p;o.restore(),this.processingType3=null}}},{key:"setCharWidth",value:function(t,e){}},{key:"setCharWidthAndBounds",value:function(t,e,r,n,a,i){this.ctx.rect(r,n,a-r,i-n),this.ctx.clip(),this.endPath()}},{key:"getColorN_Pattern",value:function(e){var r,n=this;if("TilingPattern"===e[0]){var a=e[1],o=this.baseTransform||this.ctx.mozCurrentTransform.slice(),s={createCanvasGraphics:function(e){return new t(e,n.commonObjs,n.objs,n.canvasFactory)}};r=new i.TilingPattern(e,a,this.ctx,s,o)}else r=this._getPattern(e[1],e[2]);return r}},{key:"setStrokeColorN",value:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function(t,e,r){var a,i=(null===(a=this.selectColor)||void 0===a?void 0:a.call(this,t,e,r))||n.Util.makeHexColor(t,e,r);this.ctx.strokeStyle=i,this.current.strokeColor=i}},{key:"setFillRGBColor",value:function(t,e,r){var a,i=(null===(a=this.selectColor)||void 0===a?void 0:a.call(this,t,e,r))||n.Util.makeHexColor(t,e,r);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1}},{key:"_getPattern",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(t)?e=this.cachedPatterns.get(t):(e=(0,i.getShadingPattern)(this.objs.get(t)),this.cachedPatterns.set(t,e)),r&&(e.matrix=r),e}},{key:"shadingFill",value:function(t){if(this.contentVisible){var e=this.ctx;this.save();var r=this._getPattern(t);e.fillStyle=r.getPattern(e,this,e.mozCurrentTransformInverse,i.PathType.SHADING);var a=e.mozCurrentTransformInverse;if(a){var o=e.canvas,s=o.width,l=o.height,u=n.Util.applyTransform([0,0],a),c=n.Util.applyTransform([0,l],a),h=n.Util.applyTransform([s,0],a),f=n.Util.applyTransform([s,l],a),d=Math.min(u[0],c[0],h[0],f[0]),p=Math.min(u[1],c[1],h[1],f[1]),v=Math.max(u[0],c[0],h[0],f[0]),y=Math.max(u[1],c[1],h[1],f[1]);this.ctx.fillRect(d,p,v-d,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}}},{key:"beginInlineImage",value:function(){(0,n.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function(){(0,n.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform.apply(this,t),this.baseTransform=this.ctx.mozCurrentTransform,e)){var r=e[2]-e[0],n=e[3]-e[1];this.ctx.rect(e[0],e[1],r,n),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,e),this.clip(),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}},{key:"beginGroup",value:function(t){if(this.contentVisible){this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);var e=this.ctx;t.isolated||(0,n.info)("TODO: Support non-isolated groups."),t.knockout&&(0,n.warn)("Knockout groups not supported.");var r=e.mozCurrentTransform;if(t.matrix&&e.transform.apply(e,t.matrix),!t.bbox)throw new Error("Bounding box is required.");var a=n.Util.getAxialAlignedBoundingBox(t.bbox,e.mozCurrentTransform),i=[0,0,e.canvas.width,e.canvas.height];a=n.Util.intersect(a,i)||[0,0,0,0];var o=Math.floor(a[0]),s=Math.floor(a[1]),l=Math.max(Math.ceil(a[2])-o,1),u=Math.max(Math.ceil(a[3])-s,1),c=1,h=1;l>m&&(c=l/m,l=m),u>m&&(h=u/m,u=m),this.current.startNewPathAndClipBox([0,0,l,u]);var f="groupAt"+this.groupLevel;t.smask&&(f+="_smask_"+this.smaskCounter++%2);var d=this.cachedCanvases.getCanvas(f,l,u,!0),p=d.context;p.scale(1/c,1/h),p.translate(-o,-s),p.transform.apply(p,r),t.smask?this.smaskStack.push({canvas:d.canvas,context:p,offsetX:o,offsetY:s,scaleX:c,scaleY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,s),e.scale(c,h),e.save()),x(e,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}}},{key:"endGroup",value:function(t){if(this.contentVisible){this.groupLevel--;var e=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();var a=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,a);var i=n.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(i)}}}},{key:"beginAnnotation",value:function(t,e,r,a,i){if(u(this,L,D).call(this),E(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform),Array.isArray(e)&&4===e.length){var o=e[2]-e[0],s=e[3]-e[1];if(i&&this.annotationCanvasMap){(r=r.slice())[4]-=e[0],r[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=o,e[3]=s;var l=p(n.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),2),c=l[0],h=l[1],f=this.viewportScale,d=Math.ceil(o*this.outputScaleX*f),v=Math.ceil(s*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(d,v);var y=this.annotationCanvas,m=y.canvas,g=y.context;this.annotationCanvasMap.set(t,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,b(this.ctx),this.ctx.setTransform(c,0,0,-h,0,s*h),E(this.ctx,this.foregroundColor)}else E(this.ctx,this.foregroundColor),this.ctx.rect(e[0],e[1],o,s),this.ctx.clip(),this.endPath()}this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,r),this.transform.apply(this,a)}},{key:"endAnnotation",value:function(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}},{key:"paintImageMaskXObject",value:function(t){if(this.contentVisible){var e=t.count;(t=this.getObject(t.data,t)).count=e;var r=this.ctx,n=this.processingType3;if(n&&(void 0===n.compiled&&(n.compiled=function(t){var e=t.width,r=t.height;if(e>1e3||r>1e3)return null;var n,a,i,o,l=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=e+1,h=new Uint8Array(u*(r+1)),f=e+7&-8,d=new Uint8Array(f*r),p=0,v=c(t.data);try{for(v.s();!(o=v.n()).done;)for(var y=o.value,m=128;m>0;)d[p++]=y&m?0:255,m>>=1}catch(t){v.e(t)}finally{v.f()}var g=0;for(0!==d[p=0]&&(h[0]=1,++g),a=1;a<e;a++)d[p]!==d[p+1]&&(h[a]=d[p]?2:1,++g),p++;for(0!==d[p]&&(h[a]=2,++g),n=1;n<r;n++){i=n*u,d[(p=n*f)-f]!==d[p]&&(h[i]=d[p]?1:8,++g);var b=(d[p]?4:0)+(d[p-f]?8:0);for(a=1;a<e;a++)l[b=(b>>2)+(d[p+1]?4:0)+(d[p-f+1]?8:0)]&&(h[i+a]=l[b],++g),p++;if(d[p-f]!==d[p]&&(h[i+a]=d[p]?2:4,++g),g>1e3)return null}for(i=n*u,0!==d[p=f*(r-1)]&&(h[i]=8,++g),a=1;a<e;a++)d[p]!==d[p+1]&&(h[i+a]=d[p]?4:8,++g),p++;if(0!==d[p]&&(h[i+a]=4,++g),g>1e3)return null;var _,w,A,k=new Int32Array([0,u,-1,0,-u,0,0,0,1]);for(s.isNodeJS?w=[]:_=new Path2D,n=0;g&&n<=r;n++){for(var S=n*u,x=S+e;S<x&&!h[S];)S++;if(S!==x){_?_.moveTo(S%u,n):A=[S%u,n];var E=S,P=h[S];do{var T=k[P];do{S+=T}while(!h[S]);var C=h[S];5!==C&&10!==C?(P=C,h[S]=0):(P=C&51*P>>4,h[S]&=P>>2|P<<2),_?_.lineTo(S%u,S/u|0):A.push(S%u,S/u|0),h[S]||--g}while(E!==S);_||w.push(A),--n}}return d=null,h=null,function(t){if(t.save(),t.scale(1/e,-1/r),t.translate(0,-r),_)t.fill(_);else{t.beginPath();var n,a=c(w);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.moveTo(i[0],i[1]);for(var o=2,s=i.length;o<s;o+=2)t.lineTo(i[o],i[o+1])}}catch(t){a.e(t)}finally{a.f()}t.fill()}t.beginPath(),t.restore()}}(t)),n.compiled))return void n.compiled(r);var a=this._createMaskCanvas(t),i=a.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(i,a.offsetX,a.offsetY),r.restore(),this.compose()}}},{key:"paintImageMaskXObjectRepeat",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){t=this.getObject(t.data,t);var s=this.ctx;s.save();var l=s.mozCurrentTransform;s.transform(e,r,a,i,0,0);var u=this._createMaskCanvas(t);s.setTransform(1,0,0,1,0,0);for(var c=0,h=o.length;c<h;c+=2){var f=n.Util.transform(l,[e,r,a,i,o[c],o[c+1]]),d=p(n.Util.applyTransform([0,0],f),2),v=d[0],y=d[1];s.drawImage(u.canvas,v,y)}s.restore(),this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function(t){if(this.contentVisible){var e,r=this.ctx,n=this.current.fillColor,a=this.current.patternFill,o=c(t);try{for(o.s();!(e=o.n()).done;){var s=e.value,l=s.data,u=s.width,h=s.height,f=s.transform,d=this.cachedCanvases.getCanvas("maskCanvas",u,h,!1),p=d.context;p.save(),S(p,this.getObject(l,s)),p.globalCompositeOperation="source-in",p.fillStyle=a?n.getPattern(p,this,r.mozCurrentTransformInverse,i.PathType.FILL):n,p.fillRect(0,0,u,h),p.restore(),r.save(),r.transform.apply(r,f),r.scale(1,-1),w(r,d.canvas,0,0,u,h,0,-1,1,1),r.restore()}}catch(t){o.e(t)}finally{o.f()}this.compose()}}},{key:"paintImageXObject",value:function(t){if(this.contentVisible){var e=this.getObject(t);e?this.paintInlineImageXObject(e):(0,n.warn)("Dependent image isn't ready yet")}}},{key:"paintImageXObjectRepeat",value:function(t,e,r,a){if(this.contentVisible){var i=this.getObject(t);if(i){for(var o=i.width,s=i.height,l=[],u=0,c=a.length;u<c;u+=2)l.push({transform:[e,0,0,r,a[u],a[u+1]],x:0,y:0,w:o,h:s});this.paintInlineImageXObjectGroup(i,l)}else(0,n.warn)("Dependent image isn't ready yet")}}},{key:"paintInlineImageXObject",value:function(t){if(this.contentVisible){var e,r=t.width,n=t.height,a=this.ctx;if(this.save(),a.scale(1/r,-1/n),"function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)e=t;else{var i=this.cachedCanvases.getCanvas("inlineImage",r,n,!1);k(i.context,t,this.current.transferMaps),e=i.canvas}var o=this._scaleImage(e,a.mozCurrentTransformInverse);a.imageSmoothingEnabled=O(a.mozCurrentTransform,t.interpolate);var s=p(w(a,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,r,n),2),l=s[0],u=s[1];if(this.imageLayer){var c=this.getCanvasPosition(0,-n);this.imageLayer.appendImage({imgData:t,left:c[0],top:c[1],width:l,height:u})}this.compose(),this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function(t,e){if(this.contentVisible){var r=this.ctx,n=t.width,a=t.height,i=this.cachedCanvases.getCanvas("inlineImage",n,a,!1);k(i.context,t,this.current.transferMaps);for(var o=0,s=e.length;o<s;o++){var l=e[o];if(r.save(),r.transform.apply(r,l.transform),r.scale(1,-1),w(r,i.canvas,l.x,l.y,l.w,l.h,0,-1,1,1),this.imageLayer){var u=this.getCanvasPosition(l.x,l.y);this.imageLayer.appendImage({imgData:t,left:u[0],top:u[1],width:n,height:a})}r.restore()}this.compose()}}},{key:"paintSolidColorImageMask",value:function(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}},{key:"markPoint",value:function(t){}},{key:"markPointProps",value:function(t,e){}},{key:"beginMarkedContent",value:function(t){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function(){}},{key:"endCompat",value:function(){}},{key:"consumePath",value:function(t){var e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);var r=this.ctx;this.pendingClip&&(e||(this.pendingClip===I?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}},{key:"getSinglePixelWidth",value:function(){if(!this._cachedGetSinglePixelWidth){var t=this.ctx.mozCurrentTransform;if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{var e=Math.abs(t[0]*t[3]-t[2]*t[1]),r=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(r,n)/e}}return this._cachedGetSinglePixelWidth}},{key:"getScaleForStroking",value:function(){if(!this._cachedScaleForStroking){var t,e,r=this.current.lineWidth,n=this.ctx.mozCurrentTransform;if(0===n[1]&&0===n[2]){var a=Math.abs(n[0]),i=Math.abs(n[3]);if(0===r)t=1/a,e=1/i;else{var o=a*r,s=i*r;t=o<1?1/o:1,e=s<1?1/s:1}}else{var l=Math.abs(n[0]*n[3]-n[2]*n[1]),u=Math.hypot(n[0],n[1]),c=Math.hypot(n[2],n[3]);if(0===r)t=c/l,e=u/l;else{var h=r*l;t=c>h?c/h:1,e=u>h?u/h:1}}this._cachedScaleForStroking=[t,e]}return this._cachedScaleForStroking}},{key:"rescaleAndStroke",value:function(t){var e=this.ctx,r=this.current.lineWidth,n=p(this.getScaleForStroking(),2),a=n[0],i=n[1];if(e.lineWidth=r||1,1!==a||1!==i){var o,s,l;t&&(o=e.mozCurrentTransform.slice(),s=e.getLineDash().slice(),l=e.lineDashOffset),e.scale(a,i);var u=Math.max(a,i);e.setLineDash(e.getLineDash().map(function(t){return t/u})),e.lineDashOffset/=u,e.stroke(),t&&(e.setTransform.apply(e,function(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o)),e.setLineDash(s),e.lineDashOffset=l)}else e.stroke()}},{key:"getCanvasPosition",value:function(t,e){var r=this.ctx.mozCurrentTransform;return[r[0]*t+r[2]*e+r[4],r[1]*t+r[3]*e+r[5]]}},{key:"isContentVisible",value:function(){for(var t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}]),t}();function D(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}for(var N in e.CanvasGraphics=j,n.OPS)void 0!==j.prototype[N]&&(j.prototype[n.OPS[N]]=j.prototype[N])},(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=function(t){switch(t[0]){case"RadialAxial":return new g(t);case"Mesh":return new w(t);case"Dummy":return new A}throw new Error("Unknown IR type: ".concat(t[0]))};var a=r(1),i=r(3);function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){l=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,a=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var v={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function y(t,e){if(e&&!i.isNodeJS){var r=e[2]-e[0],n=e[3]-e[1],a=new Path2D;a.rect(e[0],e[1],r,n),t.clip(a)}}e.PathType=v;var m=function(){function t(){f(this,t),this.constructor===t&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}return p(t,[{key:"getPattern",value:function(){(0,a.unreachable)("Abstract method `getPattern` called.")}}]),t}(),g=function(t){l(r,t);var e=c(r);function r(t){var n;return f(this,r),(n=e.call(this))._type=t[1],n._bbox=t[2],n._colorStops=t[3],n._p0=t[4],n._p1=t[5],n._r0=t[6],n._r1=t[7],n.matrix=null,n}return p(r,[{key:"_createGradient",value:function(t){var e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var r,n=o(this._colorStops);try{for(n.s();!(r=n.n()).done;){var a=r.value;e.addColorStop(a[0],a[1])}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"getPattern",value:function(t,e,r,n){var i;if(n===v.STROKE||n===v.FILL){var o=e.current.getClippedPathBoundingBox(n,t.mozCurrentTransform)||[0,0,0,0],s=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,u=e.cachedCanvases.getCanvas("pattern",s,l,!0),c=u.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-o[0],-o[1]),r=a.Util.transform(r,[1,0,0,1,o[0],o[1]]),c.transform.apply(c,e.baseTransform),this.matrix&&c.transform.apply(c,this.matrix),y(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),i=t.createPattern(u.canvas,"no-repeat");var h=new DOMMatrix(r);try{i.setTransform(h)}catch(t){(0,a.warn)('RadialAxialShadingPattern.getPattern: "'.concat(null==t?void 0:t.message,'".'))}}else y(t,this._bbox),i=this._createGradient(t);return i}}]),r}(m);function b(t,e,r,n,a,i,o,s){var l,u=e.coords,c=e.colors,h=t.data,f=4*t.width;u[r+1]>u[n+1]&&(l=r,r=n,n=l,l=i,i=o,o=l),u[n+1]>u[a+1]&&(l=n,n=a,a=l,l=o,o=s,s=l),u[r+1]>u[n+1]&&(l=r,r=n,n=l,l=i,i=o,o=l);var d=(u[r]+e.offsetX)*e.scaleX,p=(u[r+1]+e.offsetY)*e.scaleY,v=(u[n]+e.offsetX)*e.scaleX,y=(u[n+1]+e.offsetY)*e.scaleY,m=(u[a]+e.offsetX)*e.scaleX,g=(u[a+1]+e.offsetY)*e.scaleY;if(!(p>=g))for(var b,_,w,A,k,S,x,E,P=c[i],T=c[i+1],C=c[i+2],O=c[o],M=c[o+1],F=c[o+2],R=c[s],I=c[s+1],L=c[s+2],j=Math.round(p),D=Math.round(g),N=j;N<=D;N++){if(N<y){var U;b=d-(d-v)*(U=N<p?0:(p-N)/(p-y)),_=P-(P-O)*U,w=T-(T-M)*U,A=C-(C-F)*U}else{var W;b=v-(v-m)*(W=N>g?1:y===g?0:(y-N)/(y-g)),_=O-(O-R)*W,w=M-(M-I)*W,A=F-(F-L)*W}var B=void 0;k=d-(d-m)*(B=N<p?0:N>g?1:(p-N)/(p-g)),S=P-(P-R)*B,x=T-(T-I)*B,E=C-(C-L)*B;for(var G=Math.round(Math.min(b,k)),q=Math.round(Math.max(b,k)),z=f*N+4*G,H=G;H<=q;H++)(B=(b-H)/(b-k))<0?B=0:B>1&&(B=1),h[z++]=_-(_-S)*B|0,h[z++]=w-(w-x)*B|0,h[z++]=A-(A-E)*B|0,h[z++]=255}}function _(t,e,r){var n,a,i=e.coords,o=e.colors;switch(e.type){case"lattice":var s=e.verticesPerRow,l=Math.floor(i.length/s)-1,u=s-1;for(n=0;n<l;n++)for(var c=n*s,h=0;h<u;h++,c++)b(t,r,i[c],i[c+1],i[c+s],o[c],o[c+1],o[c+s]),b(t,r,i[c+s+1],i[c+1],i[c+s],o[c+s+1],o[c+1],o[c+s]);break;case"triangles":for(n=0,a=i.length;n<a;n+=3)b(t,r,i[n],i[n+1],i[n+2],o[n],o[n+1],o[n+2]);break;default:throw new Error("illegal figure")}}var w=function(t){l(r,t);var e=c(r);function r(t){var n;return f(this,r),(n=e.call(this))._coords=t[2],n._colors=t[3],n._figures=t[4],n._bounds=t[5],n._bbox=t[7],n._background=t[8],n.matrix=null,n}return p(r,[{key:"_createMeshCanvas",value:function(t,e,r){var n=Math.floor(this._bounds[0]),a=Math.floor(this._bounds[1]),i=Math.ceil(this._bounds[2])-n,s=Math.ceil(this._bounds[3])-a,l=Math.min(Math.ceil(Math.abs(i*t[0]*1.1)),3e3),u=Math.min(Math.ceil(Math.abs(s*t[1]*1.1)),3e3),c=i/l,h=s/u,f={coords:this._coords,colors:this._colors,offsetX:-n,offsetY:-a,scaleX:1/c,scaleY:1/h},d=l+4,p=u+4,v=r.getCanvas("mesh",d,p,!1),y=v.context,m=y.createImageData(l,u);if(e)for(var g=m.data,b=0,w=g.length;b<w;b+=4)g[b]=e[0],g[b+1]=e[1],g[b+2]=e[2],g[b+3]=255;var A,k=o(this._figures);try{for(k.s();!(A=k.n()).done;)_(m,A.value,f)}catch(t){k.e(t)}finally{k.f()}return y.putImageData(m,2,2),{canvas:v.canvas,offsetX:n-2*c,offsetY:a-2*h,scaleX:c,scaleY:h}}},{key:"getPattern",value:function(t,e,r,n){var i;if(y(t,this._bbox),n===v.SHADING)i=a.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else if(i=a.Util.singularValueDecompose2dScale(e.baseTransform),this.matrix){var o=a.Util.singularValueDecompose2dScale(this.matrix);i=[i[0]*o[0],i[1]*o[1]]}var s=this._createMeshCanvas(i,n===v.SHADING?null:this._background,e.cachedCanvases);return n!==v.SHADING&&(t.setTransform.apply(t,e.baseTransform),this.matrix&&t.transform.apply(t,this.matrix)),t.translate(s.offsetX,s.offsetY),t.scale(s.scaleX,s.scaleY),t.createPattern(s.canvas,"no-repeat")}}]),r}(m),A=function(t){l(r,t);var e=c(r);function r(){return f(this,r),e.apply(this,arguments)}return p(r,[{key:"getPattern",value:function(){return"hotpink"}}]),r}(m),k=function(){function t(e,r,n,a,i){f(this,t),this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=r,this.ctx=n,this.canvasGraphicsFactory=a,this.baseTransform=i}return p(t,[{key:"createPatternCanvas",value:function(t){var e=this.operatorList,r=this.bbox,n=this.xstep,i=this.ystep,o=this.paintType,s=this.tilingType,l=this.color,u=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+s);var c=r[0],h=r[1],f=r[2],d=r[3],p=a.Util.singularValueDecompose2dScale(this.matrix),v=a.Util.singularValueDecompose2dScale(this.baseTransform),y=[p[0]*v[0],p[1]*v[1]],m=this.getSizeAndScale(n,this.ctx.canvas.width,y[0]),g=this.getSizeAndScale(i,this.ctx.canvas.height,y[1]),b=t.cachedCanvases.getCanvas("pattern",m.size,g.size,!0),_=b.context,w=u.createCanvasGraphics(_);w.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(w,o,l);var A=c,k=h,S=f,x=d;return c<0&&(A=0,S+=Math.abs(c)),h<0&&(k=0,x+=Math.abs(h)),_.translate(-m.scale*A,-g.scale*k),w.transform(m.scale,0,0,g.scale,0,0),_.save(),this.clipBbox(w,A,k,S,x),w.baseTransform=w.ctx.mozCurrentTransform.slice(),w.executeOperatorList(e),w.endDrawing(),{canvas:b.canvas,scaleX:m.scale,scaleY:g.scale,offsetX:A,offsetY:k}}},{key:"getSizeAndScale",value:function(e,r,n){e=Math.abs(e);var a=Math.max(t.MAX_PATTERN_SIZE,r),i=Math.ceil(e*n);return i>=a?i=a:n=i/e,{scale:n,size:i}}},{key:"clipBbox",value:function(t,e,r,n,a){var i=n-e,o=a-r;t.ctx.rect(e,r,i,o),t.current.updateRectMinMax(t.ctx.mozCurrentTransform,[e,r,n,a]),t.clip(),t.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function(t,e,r){var n=t.ctx,i=t.current;switch(e){case 1:var o=this.ctx;n.fillStyle=o.fillStyle,n.strokeStyle=o.strokeStyle,i.fillColor=o.fillStyle,i.strokeColor=o.strokeStyle;break;case 2:var s=a.Util.makeHexColor(r[0],r[1],r[2]);n.fillStyle=s,n.strokeStyle=s,i.fillColor=s,i.strokeColor=s;break;default:throw new a.FormatError("Unsupported paint type: ".concat(e))}}},{key:"getPattern",value:function(t,e,r,n){var i=r;n!==v.SHADING&&(i=a.Util.transform(i,e.baseTransform),this.matrix&&(i=a.Util.transform(i,this.matrix)));var o=this.createPatternCanvas(e),s=new DOMMatrix(i);s=(s=s.translate(o.offsetX,o.offsetY)).scale(1/o.scaleX,1/o.scaleY);var l=t.createPattern(o.canvas,"repeat");try{l.setTransform(s)}catch(t){(0,a.warn)('TilingPattern.getPattern: "'.concat(null==t?void 0:t.message,'".'))}return l}}],[{key:"MAX_PATTERN_SIZE",get:function(){return(0,a.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}]),t}();e.TilingPattern=k},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=function(t){var e=t.src,r=t.srcPos,i=void 0===r?0:r,o=t.dest,s=t.destPos,l=void 0===s?0:s,u=t.width,c=t.height,h=t.inverseDecode,f=void 0!==h&&h,d=n.FeatureTest.isLittleEndian?4278190080:255,p=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(f?[0,d]:[d,0],2),v=p[0],y=p[1],m=u>>3,g=7&u,b=e.length;o=new Uint32Array(o.buffer);for(var _=0;_<c;_++){for(var w=i+m;i<w;i++){var A=i<b?e[i]:255;o[l++]=128&A?y:v,o[l++]=64&A?y:v,o[l++]=32&A?y:v,o[l++]=16&A?y:v,o[l++]=8&A?y:v,o[l++]=4&A?y:v,o[l++]=2&A?y:v,o[l++]=1&A?y:v}if(0!==g)for(var k=i<b?e[i++]:255,S=0;S<g;S++)o[l++]=k&1<<7-S?y:v}return{srcPos:i,destPos:l}};var n=r(1);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}},(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;var r=Object.create(null);e.GlobalWorkerOptions=r,r.workerPort=void 0===r.workerPort?null:r.workerPort,r.workerSrc=void 0===r.workerSrc?"":r.workerSrc},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=r(1);function a(){a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new x(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return{value:void 0,done:!0}}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=A(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=h(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,o),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,i,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,i)&&(y=g);var b=v.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){function n(a,i,o,l){var u=h(t[a],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==s(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,o,l)},function(t){n("throw",t,o,l)}):e.resolve(f).then(function(t){c.value=t,o(c)},function(t){return n("throw",t,o,l)})}l(u.arg)}var a;this._invoke=function(t,r){function i(){return new e(function(e,a){n(t,r,e,a)})}return a=a?a.then(i,i):i()}}function A(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=h(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),u(w.prototype,o,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new w(c(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},_(b),u(b,l,"Generator"),u(b,i,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function i(t,e,r,n,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,a)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t){switch(t instanceof Error||"object"===s(t)&&null!==t||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new n.AbortException(t.message);case"MissingPDFException":return new n.MissingPDFException(t.message);case"PasswordException":return new n.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new n.UnknownErrorException(t.message,t.details);default:return new n.UnknownErrorException(t.message,t.toString())}}var u=function(){function t(e,r,n){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceName=e,this.targetName=r,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(t){var e=t.data;if(e.targetName===a.sourceName)if(e.stream)a._processStreamMessage(e);else if(e.callback){var r=e.callbackId,i=a.callbackCapabilities[r];if(!i)throw new Error("Cannot resolve callback ".concat(r));if(delete a.callbackCapabilities[r],1===e.callback)i.resolve(e.data);else{if(2!==e.callback)throw new Error("Unexpected callback case");i.reject(l(e.reason))}}else{var o=a.actionHandler[e.action];if(!o)throw new Error("Unknown action from worker: ".concat(e.action));if(e.callbackId){var s=a.sourceName,u=e.sourceName;new Promise(function(t){t(o(e.data))}).then(function(t){n.postMessage({sourceName:s,targetName:u,callback:1,callbackId:e.callbackId,data:t})},function(t){n.postMessage({sourceName:s,targetName:u,callback:2,callbackId:e.callbackId,reason:l(t)})})}else e.streamId?a._createStreamSink(e):o(e.data)}},n.addEventListener("message",this._onComObjOnMessage)}var e;return function(t,e,r){e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"on",value:function(t,e){var r=this.actionHandler;if(r[t])throw new Error('There is already an actionName called "'.concat(t,'"'));r[t]=e}},{key:"send",value:function(t,e,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},r)}},{key:"sendWithPromise",value:function(t,e,r){var a=this.callbackId++,i=(0,n.createPromiseCapability)();this.callbackCapabilities[a]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},r)}catch(t){i.reject(t)}return i.promise}},{key:"sendWithStream",value:function(t,e,r,a){var i=this,o=this.streamId++,s=this.sourceName,u=this.targetName,c=this.comObj;return new ReadableStream({start:function(r){var l=(0,n.createPromiseCapability)();return i.streamControllers[o]={controller:r,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:s,targetName:u,action:t,streamId:o,data:e,desiredSize:r.desiredSize},a),l.promise},pull:function(t){var e=(0,n.createPromiseCapability)();return i.streamControllers[o].pullCall=e,c.postMessage({sourceName:s,targetName:u,stream:6,streamId:o,desiredSize:t.desiredSize}),e.promise},cancel:function(t){(0,n.assert)(t instanceof Error,"cancel must have a valid reason");var e=(0,n.createPromiseCapability)();return i.streamControllers[o].cancelCall=e,i.streamControllers[o].isClosed=!0,c.postMessage({sourceName:s,targetName:u,stream:1,streamId:o,reason:l(t)}),e.promise}},r)}},{key:"_createStreamSink",value:function(t){var e=t.streamId,r=this.sourceName,a=t.sourceName,i=this.comObj,o=this,s=this.actionHandler[t.action],u={enqueue:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var l=this.desiredSize;this.desiredSize-=o,l>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:a,stream:4,streamId:e,chunk:t},s)}},close:function(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:a,stream:3,streamId:e}),delete o.streamSinks[e])},error:function(t){(0,n.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:a,stream:5,streamId:e,reason:l(t)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,new Promise(function(e){e(s(t.data,u))}).then(function(){i.postMessage({sourceName:r,targetName:a,stream:8,streamId:e,success:!0})},function(t){i.postMessage({sourceName:r,targetName:a,stream:8,streamId:e,reason:l(t)})})}},{key:"_processStreamMessage",value:function(t){var e=t.streamId,r=this.sourceName,a=t.sourceName,i=this.comObj,o=this.streamControllers[e],s=this.streamSinks[e];switch(t.stream){case 8:t.success?o.startCall.resolve():o.startCall.reject(l(t.reason));break;case 7:t.success?o.pullCall.resolve():o.pullCall.reject(l(t.reason));break;case 6:if(!s){i.postMessage({sourceName:r,targetName:a,stream:7,streamId:e,success:!0});break}s.desiredSize<=0&&t.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=t.desiredSize,new Promise(function(t){t(s.onPull&&s.onPull())}).then(function(){i.postMessage({sourceName:r,targetName:a,stream:7,streamId:e,success:!0})},function(t){i.postMessage({sourceName:r,targetName:a,stream:7,streamId:e,reason:l(t)})});break;case 4:if((0,n.assert)(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case 3:if((0,n.assert)(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this._deleteStreamController(o,e);break;case 5:(0,n.assert)(o,"error should have stream controller"),o.controller.error(l(t.reason)),this._deleteStreamController(o,e);break;case 2:t.success?o.cancelCall.resolve():o.cancelCall.reject(l(t.reason)),this._deleteStreamController(o,e);break;case 1:if(!s)break;new Promise(function(e){e(s.onCancel&&s.onCancel(l(t.reason)))}).then(function(){i.postMessage({sourceName:r,targetName:a,stream:2,streamId:e,success:!0})},function(t){i.postMessage({sourceName:r,targetName:a,stream:2,streamId:e,reason:l(t)})}),s.sinkCapability.reject(l(t.reason)),s.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(e=function(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function s(t){i(o,n,a,s,l,"next",t)}function l(t){i(o,n,a,s,l,"throw",t)}s(void 0)})}}(a().mark(function t(e,r){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled([e.startCall&&e.startCall.promise,e.pullCall&&e.pullCall.promise,e.cancelCall&&e.cancelCall.promise]);case 2:delete this.streamControllers[r];case 3:case"end":return t.stop()}},t,this)})),function(t,r){return e.apply(this,arguments)})},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]),t}();e.MessageHandler=u},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=r(1);function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function o(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,l(t,e,"get"))}function s(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,l(t,e,"set"),r),r}function l(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var u=new WeakMap,c=new WeakMap,h=function(){function t(e){var r=e.parsedData,n=e.rawData;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,u,{writable:!0,value:void 0}),i(this,c,{writable:!0,value:void 0}),s(this,u,r),s(this,c,n)}return function(t,e,r){e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"getRaw",value:function(){return o(this,c)}},{key:"get",value:function(t){var e;return null!==(e=o(this,u).get(t))&&void 0!==e?e:null}},{key:"getAll",value:function(){return(0,n.objectFromMap)(o(this,u))}},{key:"has",value:function(t){return o(this,u).has(t)}}]),t}();e.Metadata=h},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=r(1);function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=o(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){l=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}function o(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t,e,r){d(t,e),e.set(t,r)}function d(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,y(t,e,"set"),r),r}function v(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,y(t,e,"get"))}function y(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var m=Symbol("INTERNAL"),g=new WeakMap,b=function(){function t(e,r){u(this,t),f(this,g,{writable:!0,value:!0}),this.name=e,this.intent=r}return h(t,[{key:"visible",get:function(){return v(this,g)}},{key:"_setVisible",value:function(t,e){t!==m&&(0,n.unreachable)("Internal method `_setVisible` called."),p(this,g,e)}}]),t}(),_=new WeakMap,w=new WeakMap,A=new WeakMap,k=new WeakMap,S=new WeakSet,x=function(){function t(e){if(u(this,t),function(t,e){d(t,e),e.add(t)}(this,S),f(this,_,{writable:!0,value:!0}),f(this,w,{writable:!0,value:new Map}),f(this,A,{writable:!0,value:null}),f(this,k,{writable:!0,value:null}),this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,p(this,k,e.order);var r,n=i(e.groups);try{for(n.s();!(r=n.n()).done;){var o=r.value;v(this,w).set(o.id,new b(o.name,o.intent))}}catch(e){n.e(e)}finally{n.f()}if("OFF"===e.baseState){var s,l=i(v(this,w).values());try{for(l.s();!(s=l.n()).done;)s.value._setVisible(m,!1)}catch(e){l.e(e)}finally{l.f()}}var c,h=i(e.on);try{for(h.s();!(c=h.n()).done;){var y=c.value;v(this,w).get(y)._setVisible(m,!0)}}catch(e){h.e(e)}finally{h.f()}var g,x=i(e.off);try{for(x.s();!(g=x.n()).done;){var E=g.value;v(this,w).get(E)._setVisible(m,!1)}}catch(e){x.e(e)}finally{x.f()}p(this,A,new Map);var P,T=i(v(this,w));try{for(T.s();!(P=T.n()).done;){var C=a(P.value,2),O=C[0],M=C[1];v(this,A).set(O,M.visible)}}catch(e){T.e(e)}finally{T.f()}}}return h(t,[{key:"isVisible",value:function(t){if(0===v(this,w).size)return!0;if(!t)return(0,n.warn)("Optional content group not defined."),!0;if("OCG"===t.type)return v(this,w).has(t.id)?v(this,w).get(t.id).visible:((0,n.warn)("Optional content group not found: ".concat(t.id)),!0);if("OCMD"===t.type){if(t.expression)return l(this,S,E).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){var e,r=i(t.ids);try{for(r.s();!(e=r.n()).done;){var a=e.value;if(!v(this,w).has(a))return(0,n.warn)("Optional content group not found: ".concat(a)),!0;if(v(this,w).get(a).visible)return!0}}catch(t){r.e(t)}finally{r.f()}return!1}if("AllOn"===t.policy){var o,s=i(t.ids);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!v(this,w).has(u))return(0,n.warn)("Optional content group not found: ".concat(u)),!0;if(!v(this,w).get(u).visible)return!1}}catch(t){s.e(t)}finally{s.f()}return!0}if("AnyOff"===t.policy){var c,h=i(t.ids);try{for(h.s();!(c=h.n()).done;){var f=c.value;if(!v(this,w).has(f))return(0,n.warn)("Optional content group not found: ".concat(f)),!0;if(!v(this,w).get(f).visible)return!0}}catch(t){h.e(t)}finally{h.f()}return!1}if("AllOff"===t.policy){var d,p=i(t.ids);try{for(p.s();!(d=p.n()).done;){var y=d.value;if(!v(this,w).has(y))return(0,n.warn)("Optional content group not found: ".concat(y)),!0;if(v(this,w).get(y).visible)return!1}}catch(t){p.e(t)}finally{p.f()}return!0}return(0,n.warn)("Unknown optional content policy ".concat(t.policy,".")),!0}return(0,n.warn)("Unknown group type ".concat(t.type,".")),!0}},{key:"setVisibility",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];v(this,w).has(t)?(v(this,w).get(t)._setVisible(m,!!e),p(this,_,null)):(0,n.warn)("Optional content group not found: ".concat(t))}},{key:"hasInitialVisibility",get:function(){if(null!==v(this,_))return v(this,_);var t,e=i(v(this,w));try{for(e.s();!(t=e.n()).done;){var r=a(t.value,2),n=r[0],o=r[1],s=v(this,A).get(n);if(o.visible!==s)return p(this,_,!1)}}catch(t){e.e(t)}finally{e.f()}return p(this,_,!0)}},{key:"getOrder",value:function(){return v(this,w).size?v(this,k)?v(this,k).slice():function(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(v(this,w).keys()):null}},{key:"getGroups",value:function(){return v(this,w).size>0?(0,n.objectFromMap)(v(this,w)):null}},{key:"getGroup",value:function(t){return v(this,w).get(t)||null}}]),t}();function E(t){var e=t.length;if(e<2)return!0;for(var r=t[0],a=1;a<e;a++){var i=t[a],o=void 0;if(Array.isArray(i))o=l(this,S,E).call(this,i);else{if(!v(this,w).has(i))return(0,n.warn)("Optional content group not found: ".concat(i)),!0;o=v(this,w).get(i).visible}switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return"And"===r}e.OptionalContentConfig=x},(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var a=r(1),i=r(129);function o(){o=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new x(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return{value:void 0,done:!0}}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=A(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=h(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,o),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,i,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,i)&&(y=g);var b=v.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){function a(i,o,s,l){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){a("next",t,s,l)},function(t){a("throw",t,s,l)}):e.resolve(f).then(function(t){c.value=t,s(c)},function(t){return a("throw",t,s,l)})}l(u.arg)}var i;this._invoke=function(t,r){function n(){return new e(function(e,n){a(t,r,e,n)})}return i=i?i.then(n,n):n()}}function A(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=h(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),u(w.prototype,s,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new w(c(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},_(b),u(b,l,"Generator"),u(b,i,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function s(t,e,r,n,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,a)}function l(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var i=t.apply(e,r);function o(t){s(i,n,a,o,l,"next",t)}function l(t){s(i,n,a,o,l,"throw",t)}o(void 0)})}}function u(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var p=function(){function t(e,r){var n=this;h(this,t),(0,a.assert)(r,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=e.progressiveDone||!1,this._contentDispositionFilename=e.contentDispositionFilename||null;var i=e.initialData;if((null==i?void 0:i.length)>0){var o=new Uint8Array(i).buffer;this._queuedChunks.push(o)}this._pdfDataRangeTransport=r,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._contentLength=e.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(function(t,e){n._onReceiveData({begin:t,chunk:e})}),this._pdfDataRangeTransport.addProgressListener(function(t,e){n._onProgress({loaded:t,total:e})}),this._pdfDataRangeTransport.addProgressiveReadListener(function(t){n._onReceiveData({chunk:t})}),this._pdfDataRangeTransport.addProgressiveDoneListener(function(){n._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}return d(t,[{key:"_onReceiveData",value:function(t){var e=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(e):this._queuedChunks.push(e);else{var r=this._rangeReaders.some(function(r){return r._begin===t.begin&&(r._enqueue(e),!0)});(0,a.assert)(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}},{key:"_onProgress",value:function(t){if(void 0===t.total){var e=this._rangeReaders[0];null!=e&&e.onProgress&&e.onProgress({loaded:t.loaded})}else{var r=this._fullRequestReader;null!=r&&r.onProgress&&r.onProgress({loaded:t.loaded,total:t.total})}}},{key:"_onProgressiveDone",value:function(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(t){var e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}},{key:"getFullReader",value:function(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var t=this._queuedChunks;return this._queuedChunks=null,new v(this,t,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var r=new y(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(r),r}},{key:"cancelAllRequests",value:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var e,r=u(this._rangeReaders.slice(0));try{for(r.s();!(e=r.n()).done;)e.value.cancel(t)}catch(t){r.e(t)}finally{r.f()}this._pdfDataRangeTransport.abort()}}]),t}();e.PDFDataTransportStream=p;var v=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;h(this,t),this._stream=e,this._done=n||!1,this._filename=(0,i.isPdfFile)(a)?a:null,this._queuedChunks=r||[],this._loaded=0;var o,s=u(this._queuedChunks);try{for(s.s();!(o=s.n()).done;){var l=o.value;this._loaded+=l.byteLength}}catch(e){s.e(e)}finally{s.f()}this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}var e;return d(t,[{key:"_enqueue",value:function(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:(e=l(o().mark(function t(){var e,r;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this._queuedChunks.length>0)){t.next=3;break}return e=this._queuedChunks.shift(),t.abrupt("return",{value:e,done:!1});case 3:if(!this._done){t.next=5;break}return t.abrupt("return",{value:void 0,done:!0});case 5:return r=(0,a.createPromiseCapability)(),this._requests.push(r),t.abrupt("return",r.promise);case 8:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,r=u(this._requests);try{for(r.s();!(e=r.n()).done;)e.value.resolve({value:void 0,done:!0})}catch(t){r.e(t)}finally{r.f()}this._requests.length=0}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}}]),t}(),y=function(){function t(e,r,n){h(this,t),this._stream=e,this._begin=r,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}var e;return d(t,[{key:"_enqueue",value:function(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});var e,r=u(this._requests);try{for(r.s();!(e=r.n()).done;)e.value.resolve({value:void 0,done:!0})}catch(t){r.e(t)}finally{r.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(e=l(o().mark(function t(){var e,r;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._queuedChunk){t.next=4;break}return e=this._queuedChunk,this._queuedChunk=null,t.abrupt("return",{value:e,done:!1});case 4:if(!this._done){t.next=6;break}return t.abrupt("return",{value:void 0,done:!0});case 6:return r=(0,a.createPromiseCapability)(),this._requests.push(r),t.abrupt("return",r.promise);case 9:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,r=u(this._requests);try{for(r.s();!(e=r.n()).done;)e.value.resolve({value:void 0,done:!0})}catch(t){r.e(t)}finally{r.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]),t}()},(t,e)=>{"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,r){e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,null,[{key:"textContent",value:function(e){var n=[],a={items:n,styles:Object.create(null)};return function e(a){var i;if(a){var o=null,s=a.name;if("#text"===s)o=a.value;else{if(!t.shouldBuildText(s))return;null!=a&&null!==(i=a.attributes)&&void 0!==i&&i.textContent?o=a.attributes.textContent:a.value&&(o=a.value)}if(null!==o&&n.push({str:o}),a.children){var l,u=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}(a.children);try{for(u.s();!(l=u.n()).done;)e(l.value)}catch(a){u.e(a)}finally{u.f()}}}}(e),a}},{key:"shouldBuildText",value:function(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}]),t}();e.XfaText=a},(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var a=r(130);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,a=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}var f=function(t){return new Promise(function(e,r){require("fs").readFile(t,function(t,n){!t&&n?e(new Uint8Array(n)):r(new Error(t))})})},d=function(t){l(r,t);var e=c(r);function r(){return i(this,r),e.apply(this,arguments)}return s(r,[{key:"_createCanvas",value:function(t,e){return require("canvas").createCanvas(t,e)}}]),r}(a.BaseCanvasFactory);e.NodeCanvasFactory=d;var p=function(t){l(r,t);var e=c(r);function r(){return i(this,r),e.apply(this,arguments)}return s(r,[{key:"_fetchData",value:function(t,e){return f(t).then(function(t){return{cMapData:t,compressionType:e}})}}]),r}(a.BaseCMapReaderFactory);e.NodeCMapReaderFactory=p;var v=function(t){l(r,t);var e=c(r);function r(){return i(this,r),e.apply(this,arguments)}return s(r,[{key:"_fetchData",value:function(t){return f(t)}}]),r}(a.BaseStandardFontDataFactory);e.NodeStandardFontDataFactory=v},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=r(1),a=r(134),i=r(129),o=r(148),s=r(149);function l(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=u(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function u(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e){p(t,e),e.add(t)}function d(t,e,r){p(t,e),e.set(t,r)}function p(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function y(t,e,r){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),r}function m(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,b(t,e,"get"))}function g(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,b(t,e,"set"),r),r}function b(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var _=new WeakMap,w=new WeakMap,A=new WeakMap,k=new WeakMap,S=new WeakMap,x=new WeakMap,E=new WeakMap,P=new WeakMap,T=new WeakMap,C=new WeakMap,O=new WeakSet,M=new WeakSet,F=new WeakSet,R=new WeakSet,I=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,R),f(this,F),f(this,M),f(this,O),d(this,C,{get:L,set:void 0}),d(this,_,{writable:!0,value:!1}),d(this,w,{writable:!0,value:this.pointerup.bind(this)}),d(this,A,{writable:!0,value:this.pointerdown.bind(this)}),d(this,k,{writable:!0,value:new Map}),d(this,S,{writable:!0,value:!1}),d(this,x,{writable:!0,value:new WeakMap}),d(this,E,{writable:!0,value:new Map}),d(this,P,{writable:!0,value:void 0}),d(this,T,{writable:!0,value:new Set}),t._initialized||(t._initialized=!0,o.FreeTextEditor.initialize(e.l10n),s.InkEditor.initialize(e.l10n),e.uiManager.registerEditorTypes([o.FreeTextEditor,s.InkEditor])),g(this,P,e.uiManager),this.annotationStorage=e.annotationStorage,this.pageIndex=e.pageIndex,this.div=e.div,m(this,P).addLayer(this)}return function(t,e,r){e&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"textLayerElements",get:function(){var e=this.div.parentNode.getElementsByClassName("textLayer").item(0);if(!e)return(0,n.shadow)(this,"textLayerElements",null);var r=m(this,x).get(e);return r||(0===(r=e.querySelectorAll('span[role="presentation"]')).length?(0,n.shadow)(this,"textLayerElements",null):((r=Array.from(r)).sort(y(t,t,D)),m(this,x).set(e,r),r))}},{key:"updateToolbar",value:function(t){m(this,P).updateToolbar(t)}},{key:"updateMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m(this,P).getMode();v(this,R,W).call(this),t===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),m(this,P).unselectAll()}},{key:"addInkEditorIfNeeded",value:function(t){if(t||m(this,P).getMode()===n.AnnotationEditorType.INK){if(!t){var e,r=l(m(this,k).values());try{for(r.s();!(e=r.n()).done;){var a=e.value;if(a.isEmpty())return void a.setInBackground()}}catch(t){r.e(t)}finally{r.f()}}v(this,F,U).call(this,{offsetX:0,offsetY:0}).setInBackground()}}},{key:"setEditingState",value:function(t){m(this,P).setEditingState(t)}},{key:"addCommands",value:function(t){m(this,P).addCommands(t)}},{key:"enable",value:function(){this.div.style.pointerEvents="auto";var t,e=l(m(this,k).values());try{for(e.s();!(t=e.n()).done;)t.value.enableEditing()}catch(t){e.e(t)}finally{e.f()}}},{key:"disable",value:function(){this.div.style.pointerEvents="none";var t,e=l(m(this,k).values());try{for(e.s();!(t=e.n()).done;)t.value.disableEditing()}catch(t){e.e(t)}finally{e.f()}}},{key:"setActiveEditor",value:function(t){m(this,P).getActive()!==t&&m(this,P).setActiveEditor(t)}},{key:"enableClick",value:function(){this.div.addEventListener("pointerdown",m(this,A)),this.div.addEventListener("pointerup",m(this,w))}},{key:"disableClick",value:function(){this.div.removeEventListener("pointerdown",m(this,A)),this.div.removeEventListener("pointerup",m(this,w))}},{key:"attach",value:function(t){m(this,k).set(t.id,t)}},{key:"detach",value:function(t){m(this,k).delete(t.id),this.removePointerInTextLayer(t)}},{key:"remove",value:function(t){var e=this;m(this,P).removeEditor(t),this.detach(t),this.annotationStorage.removeKey(t.id),t.div.style.display="none",setTimeout(function(){t.div.style.display="",t.div.remove(),t.isAttachedToDOM=!1,document.activeElement===document.body&&m(e,P).focusMainContainer()},0),m(this,S)||this.addInkEditorIfNeeded(!1)}},{key:"onTextLayerRendered",value:function(){m(this,E).clear();var t,e=l(m(this,T));try{for(e.s();!(t=e.n()).done;){var r=t.value;r.isAttachedToDOM&&this.addPointerInTextLayer(r)}}catch(t){e.e(t)}finally{e.f()}m(this,T).clear()}},{key:"removePointerInTextLayer",value:function(t){var e;if(m(this,C)){var r=t.id,n=m(this,E).get(r);if(n){m(this,E).delete(r);var a=n.getAttribute("aria-owns");null!==(e=a)&&void 0!==e&&e.includes(r)&&((a=a.split(" ").filter(function(t){return t!==r}).join(" "))?n.setAttribute("aria-owns",a):(n.removeAttribute("aria-owns"),n.setAttribute("role","presentation")))}}else m(this,T).delete(t)}},{key:"addPointerInTextLayer",value:function(e){if(m(this,C)){this.removePointerInTextLayer(e);var r=this.textLayerElements;if(r){var n=e.contentDiv,a=e.getIdForTextLayer(),o=(0,i.binarySearchFirstItem)(r,function(e){return y(t,t,D).call(t,n,e)<0}),s=r[Math.max(0,o-1)],l=s.getAttribute("aria-owns");null!=l&&l.includes(a)||s.setAttribute("aria-owns",l?"".concat(l," ").concat(a):a),s.removeAttribute("role"),m(this,E).set(a,s)}}else m(this,T).add(e)}},{key:"moveDivInDOM",value:function(e){this.addPointerInTextLayer(e);var r=e.div,n=e.contentDiv;if(this.div.hasChildNodes()){var a=Array.from(this.div.childNodes).filter(function(t){return t!==r});if(0!==a.length){var o=(0,i.binarySearchFirstItem)(a,function(e){return y(t,t,D).call(t,n,e)<0});0===o?a[0].before(r):a[o-1].after(r)}}else this.div.append(r)}},{key:"add",value:function(t){if(v(this,O,j).call(this,t),this.addToAnnotationStorage(t),m(this,P).addEditor(t),this.attach(t),!t.isAttachedToDOM){var e=t.render();this.div.append(e),t.isAttachedToDOM=!0}this.moveDivInDOM(t),t.onceAdded()}},{key:"addToAnnotationStorage",value:function(t){t.isEmpty()||this.annotationStorage.has(t.id)||this.annotationStorage.setValue(t.id,t)}},{key:"addOrRebuild",value:function(t){t.needsToBeRebuilt()?t.rebuild():this.add(t)}},{key:"addANewEditor",value:function(t){var e=this;this.addCommands({cmd:function(){e.addOrRebuild(t)},undo:function(){t.remove()},mustExec:!0})}},{key:"addUndoableEditor",value:function(t){var e=this;this.addCommands({cmd:function(){e.addOrRebuild(t)},undo:function(){t.remove()},mustExec:!1})}},{key:"getNextId",value:function(){return m(this,P).getId()}},{key:"deserialize",value:function(t){switch(t.annotationType){case n.AnnotationEditorType.FREETEXT:return o.FreeTextEditor.deserialize(t,this);case n.AnnotationEditorType.INK:return s.InkEditor.deserialize(t,this)}return null}},{key:"setSelected",value:function(t){m(this,P).setSelected(t)}},{key:"toggleSelected",value:function(t){m(this,P).toggleSelected(t)}},{key:"isSelected",value:function(t){return m(this,P).isSelected(t)}},{key:"unselect",value:function(t){m(this,P).unselect(t)}},{key:"pointerup",value:function(t){var e=a.KeyboardManager.platform.isMac;0!==t.button||t.ctrlKey&&e||t.target===this.div&&(m(this,_)?v(this,F,U).call(this,t):g(this,_,!0))}},{key:"pointerdown",value:function(t){var e=a.KeyboardManager.platform.isMac;if(!(0!==t.button||t.ctrlKey&&e)&&t.target===this.div){var r=m(this,P).getActive();g(this,_,!r||r.isEmpty())}}},{key:"drop",value:function(t){var e=t.dataTransfer.getData("text/plain"),r=m(this,P).getEditor(e);if(r){t.preventDefault(),t.dataTransfer.dropEffect="move",v(this,O,j).call(this,r);var n=this.div.getBoundingClientRect(),a=t.clientX-n.x,i=t.clientY-n.y;r.translate(a-r.startX,i-r.startY),this.moveDivInDOM(r),r.div.focus()}}},{key:"dragover",value:function(t){t.preventDefault()}},{key:"destroy",value:function(){var t;(null===(t=m(this,P).getActive())||void 0===t?void 0:t.parent)===this&&m(this,P).setActiveEditor(null);var e,r=l(m(this,k).values());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.removePointerInTextLayer(n),n.isAttachedToDOM=!1,n.div.remove(),n.parent=null}}catch(t){r.e(t)}finally{r.f()}m(this,E).clear(),this.div=null,m(this,k).clear(),m(this,T).clear(),m(this,P).removeLayer(this)}},{key:"render",value:function(t){this.viewport=t.viewport,(0,a.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();var e,r=l(m(this,P).getEditors(this.pageIndex));try{for(r.s();!(e=r.n()).done;){var n=e.value;this.add(n)}}catch(t){r.e(t)}finally{r.f()}this.updateMode()}},{key:"update",value:function(t){this.viewport=t.viewport,this.setDimensions(),this.updateMode()}},{key:"scaleFactor",get:function(){return this.viewport.scale}},{key:"pageDimensions",get:function(){var t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||u(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.viewport.viewBox,4),e=t[0],r=t[1];return[t[2]-e,t[3]-r]}},{key:"viewportBaseDimensions",get:function(){var t=this.viewport,e=t.width,r=t.height;return t.rotation%180==0?[e,r]:[r,e]}},{key:"setDimensions",value:function(){var t=this.viewport,e=t.width,r=t.height,n=t.rotation,a=n%180!=0,i=Math.floor(e)+"px",o=Math.floor(r)+"px";this.div.style.width=a?o:i,this.div.style.height=a?i:o,this.div.setAttribute("data-main-rotation",n)}}]),t}();function L(){return!!this.div.parentNode.querySelector(".textLayer .endOfContent")}function j(t){var e;t.parent!==this&&(this.attach(t),t.pageIndex=this.pageIndex,null===(e=t.parent)||void 0===e||e.detach(t),t.parent=this,t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}function D(t,e){var r=t.getBoundingClientRect(),n=e.getBoundingClientRect();return r.y+r.height<=n.y?-1:n.y+n.height<=r.y?1:r.x+r.width/2-(n.x+n.width/2)}function N(t){switch(m(this,P).getMode()){case n.AnnotationEditorType.FREETEXT:return new o.FreeTextEditor(t);case n.AnnotationEditorType.INK:return new s.InkEditor(t)}return null}function U(t){var e=this.getNextId(),r=v(this,M,N).call(this,{parent:this,id:e,x:t.offsetX,y:t.offsetY});return r&&this.add(r),r}function W(){g(this,S,!0);var t,e=l(m(this,k).values());try{for(e.s();!(t=e.n()).done;){var r=t.value;r.isEmpty()&&r.remove()}}catch(t){e.e(t)}finally{e.f()}g(this,S,!1)}e.AnnotationEditorLayer=I,function(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(I,"_initialized",!1)},(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var a=r(1),i=r(134),o=r(133);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach(function(e){b(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(arguments.length<3?t:r):a.value}},d.apply(this,arguments)}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,a=m(t);if(e){var i=m(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}(this,r)}}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function g(t,e){w(t,e),e.add(t)}function b(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _(t,e,r){w(t,e),e.set(t,r)}function w(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function A(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,x(t,e,"get"))}function k(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function S(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,x(t,e,"set"),r),r}function x(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var E=new WeakMap,P=new WeakMap,T=new WeakMap,C=new WeakMap,O=new WeakMap,M=new WeakMap,F=new WeakMap,R=new WeakMap,I=new WeakSet,L=new WeakSet,j=new WeakSet,D=new WeakSet,N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(r,t);var e=v(r);function r(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),g(y(n=e.call(this,h(h({},t),{},{name:"freeTextEditor"}))),D),g(y(n),j),g(y(n),L),g(y(n),I),_(y(n),E,{writable:!0,value:n.editorDivBlur.bind(y(n))}),_(y(n),P,{writable:!0,value:n.editorDivFocus.bind(y(n))}),_(y(n),T,{writable:!0,value:n.editorDivKeydown.bind(y(n))}),_(y(n),C,{writable:!0,value:void 0}),_(y(n),O,{writable:!0,value:""}),_(y(n),M,{writable:!0,value:""}),_(y(n),F,{writable:!0,value:!1}),_(y(n),R,{writable:!0,value:void 0}),S(y(n),C,t.color||r._defaultColor||o.AnnotationEditor._defaultLineColor),S(y(n),R,t.fontSize||r._defaultFontSize),n}return function(t,e,r){e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(r,[{key:"updateParams",value:function(t,e){switch(t){case a.AnnotationEditorParamsType.FREETEXT_SIZE:k(this,I,U).call(this,e);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:k(this,L,W).call(this,e)}}},{key:"propertiesToUpdate",get:function(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,A(this,R)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,A(this,C)]]}},{key:"getInitialTranslation",value:function(){return[-r._internalPadding*this.parent.scaleFactor,-(r._internalPadding+A(this,R))*this.parent.scaleFactor]}},{key:"rebuild",value:function(){d(m(r.prototype),"rebuild",this).call(this),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}},{key:"enableEditMode",value:function(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),d(m(r.prototype),"enableEditMode",this).call(this),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",A(this,T)),this.editorDiv.addEventListener("focus",A(this,P)),this.editorDiv.addEventListener("blur",A(this,E)))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&(this.parent.setEditingState(!0),d(m(r.prototype),"disableEditMode",this).call(this),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",A(this,T)),this.editorDiv.removeEventListener("focus",A(this,P)),this.editorDiv.removeEventListener("blur",A(this,E)),this.div.focus(),this.isEditing=!1)}},{key:"focusin",value:function(t){d(m(r.prototype),"focusin",this).call(this,t),t.target!==this.editorDiv&&this.editorDiv.focus()}},{key:"onceAdded",value:function(){this.width||(this.enableEditMode(),this.editorDiv.focus())}},{key:"isEmpty",value:function(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}},{key:"remove",value:function(){this.isEditing=!1,this.parent.setEditingState(!0),d(m(r.prototype),"remove",this).call(this)}},{key:"commit",value:function(){d(m(r.prototype),"commit",this).call(this),A(this,F)||(S(this,F,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),S(this,M,this.editorDiv.innerHTML),S(this,O,k(this,j,B).call(this).trimEnd()),k(this,D,G).call(this)}},{key:"shouldGetKeyboardEvents",value:function(){return this.isInEditMode()}},{key:"dblclick",value:function(t){this.enableEditMode(),this.editorDiv.focus()}},{key:"keydown",value:function(t){t.target===this.div&&"Enter"===t.key&&(this.enableEditMode(),this.editorDiv.focus())}},{key:"editorDivKeydown",value:function(t){r._keyboardManager.exec(this,t)}},{key:"editorDivFocus",value:function(t){this.isEditing=!0}},{key:"editorDivBlur",value:function(t){this.isEditing=!1}},{key:"disableEditing",value:function(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"getIdForTextLayer",value:function(){return this.editorDiv.id}},{key:"render",value:function(){var t,e,n=this;if(this.div)return this.div;this.width&&(t=this.x,e=this.y),d(m(r.prototype),"render",this).call(this),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id","".concat(this.id,"-editor")),this.enableEditing(),r._l10nPromise.get("editor_free_text_aria_label").then(function(t){var e;return null===(e=n.editorDiv)||void 0===e?void 0:e.setAttribute("aria-label",t)}),r._l10nPromise.get("free_text_default_content").then(function(t){var e;return null===(e=n.editorDiv)||void 0===e?void 0:e.setAttribute("default-content",t)}),this.editorDiv.contentEditable=!0;var a=this.editorDiv.style;if(a.fontSize="calc(".concat(A(this,R),"px * var(--scale-factor))"),a.color=A(this,C),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){var o=s(this.parent.viewportBaseDimensions,2),l=o[0],u=o[1];this.setAt(t*l,e*u,this.width*l,this.height*u),this.editorDiv.innerHTML=A(this,M),this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}},{key:"contentDiv",get:function(){return this.editorDiv}},{key:"serialize",value:function(){if(this.isEmpty())return null;var t=r._internalPadding*this.parent.scaleFactor,e=this.getRect(t,t),n=o.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:a.AnnotationEditorType.FREETEXT,color:n,fontSize:A(this,R),value:A(this,O),pageIndex:this.parent.pageIndex,rect:e,rotation:this.rotation}}}],[{key:"initialize",value:function(t){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(function(e){return[e,t.get(e)]}));var e=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(e.getPropertyValue("--freetext-padding"))}},{key:"updateDefaultParams",value:function(t,e){switch(t){case a.AnnotationEditorParamsType.FREETEXT_SIZE:r._defaultFontSize=e;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:r._defaultColor=e}}},{key:"defaultPropertiesToUpdate",get:function(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,r._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,r._defaultColor||o.AnnotationEditor._defaultLineColor]]}},{key:"deserialize",value:function(t,e){var n=d(m(r),"deserialize",this).call(this,t,e);return S(n,R,t.fontSize),S(n,C,a.Util.makeHexColor.apply(a.Util,function(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.color))),S(n,O,t.value),S(n,M,t.value.split("\n").map(function(t){return"<div>".concat(t,"</div>")}).join("")),n}}]),r}(o.AnnotationEditor);function U(t){var e=this,r=function(t){e.editorDiv.style.fontSize="calc(".concat(t,"px * var(--scale-factor))"),e.translate(0,-(t-A(e,R))*e.parent.scaleFactor),S(e,R,t),k(e,D,G).call(e)},n=A(this,R);this.parent.addCommands({cmd:function(){r(t)},undo:function(){r(n)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function W(t){var e=this,r=A(this,C);this.parent.addCommands({cmd:function(){S(e,C,t),e.editorDiv.style.color=t},undo:function(){S(e,C,r),e.editorDiv.style.color=r},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function B(){var t=this.editorDiv.getElementsByTagName("div");if(0===t.length)return this.editorDiv.innerText;for(var e=[],r=0,n=t.length;r<n;r++){var a=t[r].firstChild;"#text"===(null==a?void 0:a.nodeName)?e.push(a.data):e.push("")}return e.join("\n")}function G(){var t=s(this.parent.viewportBaseDimensions,2),e=t[0],r=t[1],n=this.div.getBoundingClientRect();this.width=n.width/e,this.height=n.height/r}e.FreeTextEditor=N,b(N,"_freeTextDefaultContent",""),b(N,"_l10nPromise",void 0),b(N,"_internalPadding",0),b(N,"_defaultColor",null),b(N,"_defaultFontSize",10),b(N,"_keyboardManager",new i.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],N.prototype.commitOrRemove]]))},(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return o.fitCurve}});var a=r(1),i=r(133),o=r(150),s=r(134);function l(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=h(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function u(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach(function(e){A(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(arguments.length<3?t:r):a.value}},y.apply(this,arguments)}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,a=_(t);if(e){var i=_(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}(this,r)}}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}function w(t,e){S(t,e),e.add(t)}function A(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k(t,e,r){S(t,e),e.set(t,r)}function S(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function x(t,e,r){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),r}function E(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,T(t,e,"set"),r),r}function P(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,T(t,e,"get"))}function T(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function C(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var O=16,M=new WeakMap,F=new WeakMap,R=new WeakMap,I=new WeakMap,L=new WeakMap,j=new WeakMap,D=new WeakMap,N=new WeakMap,U=new WeakMap,W=new WeakMap,B=new WeakMap,G=new WeakMap,q=new WeakMap,z=new WeakMap,H=new WeakSet,V=new WeakSet,X=new WeakSet,Y=new WeakSet,K=new WeakSet,J=new WeakSet,Q=new WeakSet,$=new WeakSet,Z=new WeakSet,tt=new WeakSet,et=new WeakSet,rt=new WeakSet,nt=new WeakSet,at=new WeakSet,it=new WeakSet,ot=new WeakSet,st=new WeakSet,lt=new WeakSet,ut=new WeakSet,ct=new WeakSet,ht=new WeakSet,ft=new WeakSet,dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(r,t);var e=g(r);function r(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),w(b(n=e.call(this,p(p({},t),{},{name:"inkEditor"}))),ft),w(b(n),ht),w(b(n),ct),w(b(n),ut),w(b(n),lt),w(b(n),st),w(b(n),ot),w(b(n),it),w(b(n),at),w(b(n),nt),w(b(n),rt),w(b(n),et),w(b(n),tt),w(b(n),Z),w(b(n),$),w(b(n),Q),w(b(n),J),w(b(n),K),w(b(n),Y),w(b(n),X),w(b(n),V),w(b(n),H),k(b(n),M,{writable:!0,value:0}),k(b(n),F,{writable:!0,value:0}),k(b(n),R,{writable:!0,value:0}),k(b(n),I,{writable:!0,value:n.canvasPointermove.bind(b(n))}),k(b(n),L,{writable:!0,value:n.canvasPointerleave.bind(b(n))}),k(b(n),j,{writable:!0,value:n.canvasPointerup.bind(b(n))}),k(b(n),D,{writable:!0,value:n.canvasPointerdown.bind(b(n))}),k(b(n),N,{writable:!0,value:!1}),k(b(n),U,{writable:!0,value:!1}),k(b(n),W,{writable:!0,value:null}),k(b(n),B,{writable:!0,value:null}),k(b(n),G,{writable:!0,value:0}),k(b(n),q,{writable:!0,value:0}),k(b(n),z,{writable:!0,value:null}),n.color=t.color||null,n.thickness=t.thickness||null,n.opacity=t.opacity||null,n.paths=[],n.bezierPath2D=[],n.currentPath=[],n.scaleFactor=1,n.translationX=n.translationY=0,n.x=0,n.y=0,n}return function(t,e,r){e&&v(t.prototype,e),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(r,[{key:"updateParams",value:function(t,e){switch(t){case a.AnnotationEditorParamsType.INK_THICKNESS:C(this,H,pt).call(this,e);break;case a.AnnotationEditorParamsType.INK_COLOR:C(this,V,vt).call(this,e);break;case a.AnnotationEditorParamsType.INK_OPACITY:C(this,X,yt).call(this,e)}}},{key:"propertiesToUpdate",get:function(){var t;return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||r._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||r._defaultColor||i.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(null!==(t=this.opacity)&&void 0!==t?t:r._defaultOpacity))]]}},{key:"rebuild",value:function(){y(_(r.prototype),"rebuild",this).call(this),null!==this.div&&(this.canvas||(C(this,et,St).call(this),C(this,rt,xt).call(this)),this.isAttachedToDOM||(this.parent.add(this),C(this,nt,Et).call(this)),C(this,ht,Lt).call(this))}},{key:"remove",value:function(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,P(this,B).disconnect(),E(this,B,null),y(_(r.prototype),"remove",this).call(this))}},{key:"enableEditMode",value:function(){P(this,N)||null===this.canvas||(y(_(r.prototype),"enableEditMode",this).call(this),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",P(this,D)),this.canvas.addEventListener("pointerup",P(this,j)))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&null!==this.canvas&&(y(_(r.prototype),"disableEditMode",this).call(this),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",P(this,D)),this.canvas.removeEventListener("pointerup",P(this,j)))}},{key:"onceAdded",value:function(){this.div.draggable=!this.isEmpty()}},{key:"isEmpty",value:function(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}},{key:"commit",value:function(){P(this,N)||(y(_(r.prototype),"commit",this).call(this),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),E(this,N,!0),this.div.classList.add("disabled"),C(this,ht,Lt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveDivInDOM(this),this.div.focus())}},{key:"focusin",value:function(t){y(_(r.prototype),"focusin",this).call(this,t),this.enableEditMode()}},{key:"canvasPointerdown",value:function(t){0===t.button&&this.isInEditMode()&&!P(this,N)&&(this.setInForeground(),"mouse"!==t.type&&this.div.focus(),t.stopPropagation(),this.canvas.addEventListener("pointerleave",P(this,L)),this.canvas.addEventListener("pointermove",P(this,I)),C(this,J,bt).call(this,t.offsetX,t.offsetY))}},{key:"canvasPointermove",value:function(t){t.stopPropagation(),C(this,Q,_t).call(this,t.offsetX,t.offsetY)}},{key:"canvasPointerup",value:function(t){0===t.button&&this.isInEditMode()&&0!==this.currentPath.length&&(t.stopPropagation(),C(this,tt,kt).call(this,t),this.setInBackground())}},{key:"canvasPointerleave",value:function(t){C(this,tt,kt).call(this,t),this.setInBackground()}},{key:"render",value:function(){var t,e,n=this;if(this.div)return this.div;this.width&&(t=this.x,e=this.y),y(_(r.prototype),"render",this).call(this),r._l10nPromise.get("editor_ink_aria_label").then(function(t){var e;return null===(e=n.div)||void 0===e?void 0:e.setAttribute("aria-label",t)});var a=c(C(this,Y,mt).call(this),4),i=a[0],o=a[1],s=a[2],l=a[3];if(this.setAt(i,o,0,0),this.setDims(s,l),C(this,et,St).call(this),this.width){var u=c(this.parent.viewportBaseDimensions,2),h=u[0],f=u[1];this.setAt(t*h,e*f,this.width*h,this.height*f),E(this,U,!0),C(this,nt,Et).call(this),this.setDims(this.width*h,this.height*f),C(this,Z,At).call(this),C(this,ft,jt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return C(this,rt,xt).call(this),this.div}},{key:"setDimensions",value:function(t,e){var r=Math.round(t),n=Math.round(e);if(P(this,G)!==r||P(this,q)!==n){E(this,G,r),E(this,q,n),this.canvas.style.visibility="hidden",P(this,M)&&Math.abs(P(this,M)-t/e)>.01&&(e=Math.ceil(t/P(this,M)),this.setDims(t,e));var a=c(this.parent.viewportBaseDimensions,2),i=a[0],o=a[1];this.width=t/i,this.height=e/o,P(this,N)&&C(this,at,Pt).call(this,t,e),C(this,nt,Et).call(this),C(this,Z,At).call(this),this.canvas.style.visibility="visible"}}},{key:"serialize",value:function(){if(this.isEmpty())return null;var t=this.getRect(0,0),e=this.rotation%180==0?t[3]-t[1]:t[2]-t[0],r=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:r,thickness:this.thickness,opacity:this.opacity,paths:C(this,ot,Ot).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,e),pageIndex:this.parent.pageIndex,rect:t,rotation:this.rotation}}}],[{key:"initialize",value:function(t){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(function(e){return[e,t.get(e)]}))}},{key:"updateDefaultParams",value:function(t,e){switch(t){case a.AnnotationEditorParamsType.INK_THICKNESS:r._defaultThickness=e;break;case a.AnnotationEditorParamsType.INK_COLOR:r._defaultColor=e;break;case a.AnnotationEditorParamsType.INK_OPACITY:r._defaultOpacity=e/100}}},{key:"defaultPropertiesToUpdate",get:function(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,r._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,r._defaultColor||i.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*r._defaultOpacity)]]}},{key:"deserialize",value:function(t,e){var n=y(_(r),"deserialize",this).call(this,t,e);n.thickness=t.thickness,n.color=a.Util.makeHexColor.apply(a.Util,u(t.color)),n.opacity=t.opacity;var i=c(e.pageDimensions,2),o=i[0],s=i[1],h=n.width*o,f=n.height*s,d=e.scaleFactor,p=t.thickness/2;E(n,M,h/f),E(n,N,!0),E(n,G,Math.round(h)),E(n,q,Math.round(f));var v,m=l(t.paths);try{for(m.s();!(v=m.n()).done;){var g=v.value.bezier,b=[];n.paths.push(b);for(var w=d*(g[0]-p),A=d*(f-g[1]-p),k=2,S=g.length;k<S;k+=6){var P=d*(g[k]-p),T=d*(f-g[k+1]-p),O=d*(g[k+2]-p),I=d*(f-g[k+3]-p),L=d*(g[k+4]-p),j=d*(f-g[k+5]-p);b.push([[w,A],[P,T],[O,I],[L,j]]),w=L,A=j}var D=x(this,r,Ct).call(this,b);n.bezierPath2D.push(D)}}catch(t){m.e(t)}finally{m.f()}var U=C(n,ut,Rt).call(n);return E(n,R,U[2]-U[0]),E(n,F,U[3]-U[1]),C(n,at,Pt).call(n,h,f),n}}]),r}(i.AnnotationEditor);function pt(t){var e=this,r=this.thickness;this.parent.addCommands({cmd:function(){e.thickness=t,C(e,ht,Lt).call(e)},undo:function(){e.thickness=r,C(e,ht,Lt).call(e)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function vt(t){var e=this,r=this.color;this.parent.addCommands({cmd:function(){e.color=t,C(e,Z,At).call(e)},undo:function(){e.color=r,C(e,Z,At).call(e)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function yt(t){var e=this;t/=100;var r=this.opacity;this.parent.addCommands({cmd:function(){e.opacity=t,C(e,Z,At).call(e)},undo:function(){e.opacity=r,C(e,Z,At).call(e)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function mt(){var t=this.parent.viewport,e=t.width,r=t.height;switch(t.rotation){case 90:return[0,e,e,r];case 180:return[e,r,e,r];case 270:return[r,0,e,r];default:return[0,0,e,r]}}function gt(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle="".concat(this.color).concat((0,s.opacityToHex)(this.opacity))}function bt(t,e){var r,n=this;(this.isEditing=!0,P(this,U))||(E(this,U,!0),C(this,nt,Et).call(this),this.thickness||(this.thickness=dt._defaultThickness),this.color||(this.color=dt._defaultColor||i.AnnotationEditor._defaultLineColor),null!==(r=this.opacity)&&void 0!==r||(this.opacity=dt._defaultOpacity));this.currentPath.push([t,e]),E(this,W,null),C(this,K,gt).call(this),this.ctx.beginPath(),this.ctx.moveTo(t,e),E(this,z,function(){if(P(n,z)){var t;if(P(n,W))n.isEmpty()?(n.ctx.setTransform(1,0,0,1,0,0),n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height)):C(n,Z,At).call(n),(t=n.ctx).lineTo.apply(t,u(P(n,W))),E(n,W,null),n.ctx.stroke();window.requestAnimationFrame(P(n,z))}}),window.requestAnimationFrame(P(this,z))}function _t(t,e){var r=c(this.currentPath.at(-1),2),n=r[0],a=r[1];t===n&&e===a||(this.currentPath.push([t,e]),E(this,W,[t,e]))}function wt(t,e){var r=this;this.ctx.closePath(),E(this,z,null),t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height);var n,a=c(this.currentPath.at(-1),2),i=a[0],s=a[1];if(t===i&&e===s||this.currentPath.push([t,e]),1!==this.currentPath.length)n=(0,o.fitCurve)(this.currentPath,30,null);else{var l=[t,e];n=[[l,l.slice(),l.slice(),l]]}var u=x(dt,dt,Ct).call(dt,n);this.currentPath.length=0,this.parent.addCommands({cmd:function(){r.paths.push(n),r.bezierPath2D.push(u),r.rebuild()},undo:function(){r.paths.pop(),r.bezierPath2D.pop(),0===r.paths.length?r.remove():(r.canvas||(C(r,et,St).call(r),C(r,rt,xt).call(r)),C(r,ht,Lt).call(r))},mustExec:!0})}function At(){if(this.isEmpty())C(this,it,Tt).call(this);else{C(this,K,gt).call(this);var t=this.canvas,e=this.ctx;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),C(this,it,Tt).call(this);var r,n=l(this.bezierPath2D);try{for(n.s();!(r=n.n()).done;){var a=r.value;e.stroke(a)}}catch(t){n.e(t)}finally{n.f()}}}function kt(t){C(this,$,wt).call(this,t.offsetX,t.offsetY),this.canvas.removeEventListener("pointerleave",P(this,L)),this.canvas.removeEventListener("pointermove",P(this,I)),this.parent.addToAnnotationStorage(this)}function St(){var t=this;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",dt._l10nPromise.get("editor_ink_canvas_aria_label").then(function(e){var r;return null===(r=t.canvas)||void 0===r?void 0:r.setAttribute("aria-label",e)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function xt(){var t=this;E(this,B,new ResizeObserver(function(e){var r=e[0].contentRect;r.width&&r.height&&t.setDimensions(r.width,r.height)})),P(this,B).observe(this.div)}function Et(){if(P(this,U)){var t=c(this.parent.viewportBaseDimensions,2),e=t[0],r=t[1];this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*r),C(this,it,Tt).call(this)}}function Pt(t,e){var r=C(this,ct,It).call(this),n=(t-r)/P(this,R),a=(e-r)/P(this,F);this.scaleFactor=Math.min(n,a)}function Tt(){var t=C(this,ct,It).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}function Ct(t){for(var e=new Path2D,r=0,n=t.length;r<n;r++){var a=c(t[r],4),i=a[0],o=a[1],s=a[2],l=a[3];0===r&&e.moveTo.apply(e,u(i)),e.bezierCurveTo(o[0],o[1],s[0],s[1],l[0],l[1])}return e}function Ot(t,e,r,n){var a,i,o,s=[],u=this.thickness/2,h=l(this.paths);try{for(h.s();!(o=h.n()).done;){var f=o.value;a=[],i=[];for(var d=0,p=f.length;d<p;d++){var v=c(f[d],4),y=v[0],m=v[1],g=v[2],b=v[3],_=t*(y[0]+e)+u,w=n-t*(y[1]+r)-u,A=t*(m[0]+e)+u,k=n-t*(m[1]+r)-u,S=t*(g[0]+e)+u,x=n-t*(g[1]+r)-u,E=t*(b[0]+e)+u,P=n-t*(b[1]+r)-u;0===d&&(a.push(_,w),i.push(_,w)),a.push(A,k,S,x,E,P),C(this,st,Mt).call(this,_,w,A,k,S,x,E,P,4,i)}s.push({bezier:a,points:i})}}catch(t){h.e(t)}finally{h.f()}return s}function Mt(t,e,r,n,a,i,o,s,l,u){if(C(this,lt,Ft).call(this,t,e,r,n,a,i,o,s))u.push(o,s);else{for(var c=1;c<l-1;c++){var h=c/l,f=1-h,d=h*t+f*r,p=h*e+f*n,v=h*r+f*a,y=h*n+f*i;d=h*(d=h*d+f*v)+f*(v=h*v+f*(h*a+f*o)),p=h*(p=h*p+f*y)+f*(y=h*y+f*(h*i+f*s)),u.push(d,p)}u.push(o,s)}}function Ft(t,e,r,n,a,i,o,s){var l=Math.pow(3*r-2*t-o,2),u=Math.pow(3*n-2*e-s,2),c=Math.pow(3*a-t-2*o,2),h=Math.pow(3*i-e-2*s,2);return Math.max(l,c)+Math.max(u,h)<=10}function Rt(){var t,e=1/0,r=-1/0,n=1/0,i=-1/0,o=l(this.paths);try{for(o.s();!(t=o.n()).done;){var s,h=l(t.value);try{for(h.s();!(s=h.n()).done;){var f=c(s.value,4),d=f[0],p=f[1],v=f[2],y=f[3],m=a.Util.bezierBoundingBox.apply(a.Util,u(d).concat(u(p),u(v),u(y)));e=Math.min(e,m[0]),n=Math.min(n,m[1]),r=Math.max(r,m[2]),i=Math.max(i,m[3])}}catch(t){h.e(t)}finally{h.f()}}}catch(t){o.e(t)}finally{o.f()}return[e,n,r,i]}function It(){return P(this,N)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function Lt(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isEmpty())if(P(this,N)){var e=C(this,ut,Rt).call(this),r=C(this,ct,It).call(this);E(this,R,Math.max(O,e[2]-e[0])),E(this,F,Math.max(O,e[3]-e[1]));var n=Math.ceil(r+P(this,R)*this.scaleFactor),a=Math.ceil(r+P(this,F)*this.scaleFactor),i=c(this.parent.viewportBaseDimensions,2),o=i[0],s=i[1];this.width=n/o,this.height=a/s,E(this,M,n/a),C(this,ft,jt).call(this);var l=this.translationX,u=this.translationY;this.translationX=-e[0],this.translationY=-e[1],C(this,nt,Et).call(this),C(this,Z,At).call(this),E(this,G,n),E(this,q,a),this.setDims(n,a);var h=t?r/this.scaleFactor/2:0;this.translate(l-this.translationX-h,u-this.translationY-h)}else C(this,Z,At).call(this)}function jt(){var t=this.div.style;P(this,M)>=1?(t.minHeight="".concat(O,"px"),t.minWidth="".concat(Math.round(P(this,M)*O),"px")):(t.minWidth="".concat(O,"px"),t.minHeight="".concat(Math.round(O/P(this,M)),"px"))}e.InkEditor=dt,A(dt,"_defaultColor",null),A(dt,"_defaultOpacity",1),A(dt,"_defaultThickness",1),A(dt,"_l10nPromise",void 0)},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;var n=r(151);e.fitCurve=n},t=>{"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e,r,n,i){var o,c,h,f,d,v,y,m,g,b,_,w,A;if(2===t.length)return w=p.vectorLen(p.subtract(t[0],t[1]))/3,[o=[t[0],p.addArrays(t[0],p.mulItems(e,w)),p.addArrays(t[1],p.mulItems(r,w)),t[1]]];c=function(t){var e,r,n,a=[];return t.forEach(function(t,i){e=i?r+p.vectorLen(p.subtract(t,n)):0,a.push(e),r=e,n=t}),a=a.map(function(t){return t/r})}(t);var k=a(l(t,c,c,e,r,i),3);if(o=k[0],f=k[1],v=k[2],0===f||f<n)return[o];if(f<n*n)for(h=c,d=f,y=v,A=0;A<20;A++){var S=a(l(t,c,h=u(o,t,h),e,r,i),3);if(o=S[0],f=S[1],v=S[2],f<n)return[o];if(v===y){var x=f/d;if(x>.9999&&x<1.0001)break}d=f,y=v}if(_=[],(m=p.subtract(t[v-1],t[v+1])).every(function(t){return 0===t})){var E=[-(m=p.subtract(t[v-1],t[v]))[1],m[0]];m[0]=E[0],m[1]=E[1]}return g=p.normalize(m),b=p.mulItems(g,-1),(_=_.concat(s(t.slice(0,v+1),e,g,n,i))).concat(s(t.slice(v),b,r,n,i))}function l(t,e,r,n,i,o){var s,l,u;s=function(t,e,r,n){var a,i,o,s,l,u,c,h,f,d,y,m,g,b,_,w,A,k=t[0],S=t[t.length-1];for(a=[k,null,null,S],i=p.zeros_Xx2x2(e.length),g=0,b=e.length;g<b;g++)A=1-(w=e[g]),(o=i[g])[0]=p.mulItems(r,3*w*(A*A)),o[1]=p.mulItems(n,3*A*(w*w));for(s=[[0,0],[0,0]],l=[0,0],g=0,b=t.length;g<b;g++)w=e[g],o=i[g],s[0][0]+=p.dot(o[0],o[0]),s[0][1]+=p.dot(o[0],o[1]),s[1][0]+=p.dot(o[0],o[1]),s[1][1]+=p.dot(o[1],o[1]),_=p.subtract(t[g],v.q([k,k,S,S],w)),l[0]+=p.dot(o[0],_),l[1]+=p.dot(o[1],_);return u=s[0][0]*s[1][1]-s[1][0]*s[0][1],c=s[0][0]*l[1]-s[1][0]*l[0],h=l[0]*s[1][1]-l[1]*s[0][1],d=0===u?0:c/u,(f=0===u?0:h/u)<(y=1e-6*(m=p.vectorLen(p.subtract(k,S))))||d<y?(a[1]=p.addArrays(k,p.mulItems(r,m/3)),a[2]=p.addArrays(S,p.mulItems(n,m/3))):(a[1]=p.addArrays(k,p.mulItems(r,f)),a[2]=p.addArrays(S,p.mulItems(n,d))),a}(t,r,n,i);var c=function(t,e,r){var n,a,i,o,s,l,u,c;a=0,i=Math.floor(t.length/2);var d=h(e,10);for(s=0,l=t.length;s<l;s++)u=t[s],c=f(e,r[s],d,10),(n=(o=p.subtract(v.q(e,c),u))[0]*o[0]+o[1]*o[1])>a&&(a=n,i=s);return[a,i]}(t,s,e),d=a(c,2);return l=d[0],u=d[1],o&&o({bez:s,points:t,params:e,maxErr:l,maxPoint:u}),[s,l,u]}function u(t,e,r){return r.map(function(r,n){return c(t,e[n],r)})}function c(t,e,r){var n=p.subtract(v.q(t,r),e),a=v.qprime(t,r),i=p.mulMatrix(n,a),o=p.sum(p.squareItems(a))+2*p.mulMatrix(n,v.qprimeprime(t,r));return 0===o?r:r-i/o}var h=function(t,e){for(var r,n=[0],a=t[0],i=0,o=1;o<=e;o++)r=v.q(t,o/e),i+=p.vectorLen(p.subtract(r,a)),n.push(i),a=r;return n.map(function(t){return t/i})};function f(t,e,r,n){if(e<0)return 0;if(e>1)return 1;for(var a,i,o,s,l=1;l<=n;l++)if(e<=r[l]){o=(l-1)/n,i=l/n,s=(e-(a=r[l-1]))/(r[l]-a)*(i-o)+o;break}return s}function d(t,e){return p.normalize(p.subtract(t,e))}var p=function(){function t(){e(this,t)}return n(t,null,[{key:"zeros_Xx2x2",value:function(t){for(var e=[];t--;)e.push([0,0]);return e}},{key:"mulItems",value:function(t,e){return t.map(function(t){return t*e})}},{key:"mulMatrix",value:function(t,e){return t.reduce(function(t,r,n){return t+r*e[n]},0)}},{key:"subtract",value:function(t,e){return t.map(function(t,r){return t-e[r]})}},{key:"addArrays",value:function(t,e){return t.map(function(t,r){return t+e[r]})}},{key:"addItems",value:function(t,e){return t.map(function(t){return t+e})}},{key:"sum",value:function(t){return t.reduce(function(t,e){return t+e})}},{key:"dot",value:function(e,r){return t.mulMatrix(e,r)}},{key:"vectorLen",value:function(t){return Math.hypot.apply(Math,function(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t))}},{key:"divItems",value:function(t,e){return t.map(function(t){return t/e})}},{key:"squareItems",value:function(t){return t.map(function(t){return t*t})}},{key:"normalize",value:function(t){return this.divItems(t,this.vectorLen(t))}}]),t}(),v=function(){function t(){e(this,t)}return n(t,null,[{key:"q",value:function(t,e){var r=1-e,n=p.mulItems(t[0],r*r*r),a=p.mulItems(t[1],3*r*r*e),i=p.mulItems(t[2],3*r*e*e),o=p.mulItems(t[3],e*e*e);return p.addArrays(p.addArrays(n,a),p.addArrays(i,o))}},{key:"qprime",value:function(t,e){var r=1-e,n=p.mulItems(p.subtract(t[1],t[0]),3*r*r),a=p.mulItems(p.subtract(t[2],t[1]),6*r*e),i=p.mulItems(p.subtract(t[3],t[2]),3*e*e);return p.addArrays(p.addArrays(n,a),i)}},{key:"qprimeprime",value:function(t,e){return p.addArrays(p.mulItems(p.addArrays(p.subtract(t[2],p.mulItems(t[1],2)),t[0]),6*(1-e)),p.mulItems(p.addArrays(p.subtract(t[3],p.mulItems(t[2],2)),t[1]),6*e))}}]),t}();t.exports=function(t,e,r){if(!Array.isArray(t))throw new TypeError("First argument should be an array");if(t.forEach(function(e){if(!Array.isArray(e)||e.some(function(t){return"number"!=typeof t})||e.length!==t[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),(t=t.filter(function(e,r){return 0===r||!e.every(function(e,n){return e===t[r-1][n]})})).length<2)return[];var n=t.length,a=d(t[1],t[0]),i=d(t[n-2],t[n-1]);return s(t,a,i,e,r)},t.exports.fitCubic=s,t.exports.createTangent=d},(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var a=r(1),i=r(129),o=r(132),s=r(153),l=r(154);function u(t,e,r){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),r}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(arguments.length<3?t:r):a.value}},c.apply(this,arguments)}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){return function(t){if(Array.isArray(t))return w(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,a=m(t);if(e){var i=m(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}(this,r)}}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function g(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){if(t){if("string"==typeof t)return w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(t,e):void 0}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t,e,r){return e&&k(t.prototype,e),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var x=1e3,E=new WeakSet;function P(t){return{width:t[2]-t[0],height:t[3]-t[1]}}var T=function(){function t(){A(this,t)}return S(t,null,[{key:"create",value:function(t){switch(t.data.annotationType){case a.AnnotationType.LINK:return new O(t);case a.AnnotationType.TEXT:return new M(t);case a.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new R(t);case"Btn":return t.data.radioButton?new L(t):t.data.checkBox?new I(t):new j(t);case"Ch":return new D(t)}return new F(t);case a.AnnotationType.POPUP:return new N(t);case a.AnnotationType.FREETEXT:return new W(t);case a.AnnotationType.LINE:return new B(t);case a.AnnotationType.SQUARE:return new G(t);case a.AnnotationType.CIRCLE:return new q(t);case a.AnnotationType.POLYLINE:return new z(t);case a.AnnotationType.CARET:return new V(t);case a.AnnotationType.INK:return new X(t);case a.AnnotationType.POLYGON:return new H(t);case a.AnnotationType.HIGHLIGHT:return new Y(t);case a.AnnotationType.UNDERLINE:return new K(t);case a.AnnotationType.SQUIGGLY:return new J(t);case a.AnnotationType.STRIKEOUT:return new Q(t);case a.AnnotationType.STAMP:return new $(t);case a.AnnotationType.FILEATTACHMENT:return new Z(t);default:return new C(t)}}}]),t}(),C=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.isRenderable,a=void 0!==n&&n,i=r.ignoreBorder,o=void 0!==i&&i,s=r.createQuadrilaterals,l=void 0!==s&&s;A(this,t),this.isRenderable=a,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this._mouseState=e.mouseState,a&&(this.container=this._createContainer(o)),l&&(this.quadrilaterals=this._createQuadrilaterals(o))}return S(t,[{key:"_createContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.data,r=this.page,n=this.viewport,i=document.createElement("section"),o=P(e.rect),s=o.width,l=o.height,u=b(n.viewBox,4),c=u[0],h=u[1],f=u[2]-c,d=u[3]-h;i.setAttribute("data-annotation-id",e.id);var p=a.Util.normalizeRect([e.rect[0],r.view[3]-e.rect[1]+r.view[1],e.rect[2],r.view[3]-e.rect[3]+r.view[1]]);if(!t&&e.borderStyle.width>0){i.style.borderWidth="".concat(e.borderStyle.width,"px");var v=e.borderStyle.horizontalCornerRadius,y=e.borderStyle.verticalCornerRadius;if(v>0||y>0){var m="calc(".concat(v,"px * var(--scale-factor)) / calc(").concat(y,"px * var(--scale-factor))");i.style.borderRadius=m}switch(e.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:i.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:i.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:i.style.borderBottomStyle="solid"}var g=e.borderColor||null;g?i.style.borderColor=a.Util.makeHexColor(0|g[0],0|g[1],0|g[2]):i.style.borderWidth=0}i.style.left="".concat(100*(p[0]-c)/f,"%"),i.style.top="".concat(100*(p[1]-h)/d,"%");var _=e.rotation;return e.hasOwnCanvas||0===_?(i.style.width="".concat(100*s/f,"%"),i.style.height="".concat(100*l/d,"%")):this.setRotation(_,i),i}},{key:"setRotation",value:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container,a=b(this.viewport.viewBox,4),i=a[0],o=a[1],s=a[2]-i,l=a[3]-o,u=P(this.data.rect),c=u.width,h=u.height;t%180==0?(e=100*c/s,r=100*h/l):(e=100*h/s,r=100*c/l),n.style.width="".concat(e,"%"),n.style.height="".concat(r,"%"),n.setAttribute("data-main-rotation",(360-t)%360)}},{key:"_commonActions",get:function(){var t=this,e=function(t,e,r){var n=r.detail[t];r.target.style[e]=s.ColorConverters["".concat(n[0],"_HTML")](n.slice(1))};return(0,a.shadow)(this,"_commonActions",{display:function(e){var r=e.detail.display%2==1;t.container.style.visibility=r?"hidden":"visible",t.annotationStorage.setValue(t.data.id,{hidden:r,print:0===e.detail.display||3===e.detail.display})},print:function(e){t.annotationStorage.setValue(t.data.id,{print:e.detail.print})},hidden:function(e){t.container.style.visibility=e.detail.hidden?"hidden":"visible",t.annotationStorage.setValue(t.data.id,{hidden:e.detail.hidden})},focus:function(t){setTimeout(function(){return t.target.focus({preventScroll:!1})},0)},userName:function(t){t.target.title=t.detail.userName},readonly:function(t){t.detail.readonly?t.target.setAttribute("readonly",""):t.target.removeAttribute("readonly")},required:function(e){t._setRequired(e.target,e.detail.required)},bgColor:function(t){e("bgColor","backgroundColor",t)},fillColor:function(t){e("fillColor","backgroundColor",t)},fgColor:function(t){e("fgColor","color",t)},textColor:function(t){e("textColor","color",t)},borderColor:function(t){e("borderColor","borderColor",t)},strokeColor:function(t){e("strokeColor","borderColor",t)},rotation:function(e){var r=e.detail.rotation;t.setRotation(r),t.annotationStorage.setValue(t.data.id,{rotation:r})}})}},{key:"_dispatchEventFromSandbox",value:function(t,e){for(var r=this._commonActions,n=0,a=Object.keys(e.detail);n<a.length;n++){var i=a[n],o=t[i]||r[i];o&&o(e)}}},{key:"_setDefaultPropertiesFromJS",value:function(t){if(this.enableScripting){var e=this.annotationStorage.getRawValue(this.data.id);if(e)for(var r=this._commonActions,n=0,a=Object.entries(e);n<a.length;n++){var i=b(a[n],2),o=i[0],s=i[1],l=r[o];l&&(l({detail:s,target:t}),delete e[o])}}}},{key:"_createQuadrilaterals",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.data.quadPoints)return null;var e,r=[],n=this.data.rect,a=g(this.data.quadPoints);try{for(a.s();!(e=a.n()).done;){var i=e.value;this.data.rect=[i[2].x,i[2].y,i[1].x,i[1].y],r.push(this._createContainer(t))}}catch(t){a.e(t)}finally{a.f()}return this.data.rect=n,r}},{key:"_createPopup",value:function(t,e){var r=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,r=this.quadrilaterals[0]),t||((t=document.createElement("div")).className="popupTriggerArea",r.append(t));var n=new U({container:r,trigger:t,color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,hideWrapper:!0}).render();n.style.left="100%",r.append(n)}},{key:"_renderQuadrilaterals",value:function(t){var e,r=g(this.quadrilaterals);try{for(r.s();!(e=r.n()).done;)e.value.className=t}catch(t){r.e(t)}finally{r.f()}return this.quadrilaterals}},{key:"render",value:function(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[];if(this._fieldObjects){var n=this._fieldObjects[t];if(n){var i,o=g(n);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=s.page,u=s.id,c=s.exportValues;if(-1!==l&&u!==e){var h="string"==typeof c?c:null,f=document.querySelector('[data-element-id="'.concat(u,'"]'));!f||E.has(f)?r.push({id:u,exportValue:h,domElement:f}):(0,a.warn)("_getElementsByName - element not allowed: ".concat(u))}}}catch(t){o.e(t)}finally{o.f()}}return r}var d,p=g(document.getElementsByName(t));try{for(p.s();!(d=p.n()).done;){var v=d.value,y=v.id,m=v.exportValue;y!==e&&E.has(v)&&r.push({id:y,exportValue:m,domElement:v})}}catch(t){p.e(t)}finally{p.f()}return r}}],[{key:"platform",get:function(){var t="undefined"!=typeof navigator?navigator.platform:"";return(0,a.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}]),t}(),O=function(t){d(r,t);var e=v(r);function r(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return A(this,r),(n=e.call(this,t,{isRenderable:!0,ignoreBorder:!(null==a||!a.ignoreBorder),createQuadrilaterals:!0})).isTooltipOnly=t.data.isTooltipOnly,n}return S(r,[{key:"render",value:function(){var t=this.data,e=this.linkService,r=document.createElement("a");r.setAttribute("data-element-id",t.id);var n=!1;return t.url?(e.addLinkAttributes(r,t.url,t.newWindow),n=!0):t.action?(this._bindNamedAction(r,t.action),n=!0):t.dest?(this._bindLink(r,t.dest),n=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),n=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(r,""),n=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(function(t,e){var n=0===e?r:r.cloneNode();return t.append(n),t}):(this.container.className="linkAnnotation",n&&this.container.append(r),this.container)}},{key:"_bindLink",value:function(t,e){var r=this;t.href=this.linkService.getDestinationHash(e),t.onclick=function(){return e&&r.linkService.goToDestination(e),!1},(e||""===e)&&(t.className="internalLink")}},{key:"_bindNamedAction",value:function(t,e){var r=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return r.linkService.executeNamedAction(e),!1},t.className="internalLink"}},{key:"_bindJSAction",value:function(t,e){var r=this;t.href=this.linkService.getAnchorUrl("");for(var n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),a=function(){var a=o[i],s=n.get(a);if(!s)return"continue";t[s]=function(){var t;return null===(t=r.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:r,detail:{id:e.id,name:a}}),!1}},i=0,o=Object.keys(e.actions);i<o.length;i++)a();t.onclick||(t.onclick=function(){return!1}),t.className="internalLink"}},{key:"_bindResetFormAction",value:function(t,e){var r=this,n=t.onclick;n||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",this._fieldObjects?t.onclick=function(){n&&n();var t,i=e.fields,o=e.refs,s=e.include,l=[];if(0!==i.length||0!==o.length){var u,c=new Set(o),h=g(i);try{for(h.s();!(u=h.n()).done;){var d,p=u.value,v=g(r._fieldObjects[p]||[]);try{for(v.s();!(d=v.n()).done;){var y=d.value.id;c.add(y)}}catch(i){v.e(i)}finally{v.f()}}}catch(i){h.e(i)}finally{h.f()}for(var m=0,b=Object.values(r._fieldObjects);m<b.length;m++){var _,w=g(b[m]);try{for(w.s();!(_=w.n()).done;){var A=_.value;c.has(A.id)===s&&l.push(A)}}catch(i){w.e(i)}finally{w.f()}}}else for(var k=0,S=Object.values(r._fieldObjects);k<S.length;k++){var x=S[k];l.push.apply(l,f(x))}for(var P=r.annotationStorage,T=[],C=0,O=l;C<O.length;C++){var M=O[C],F=M.id;switch(T.push(F),M.type){case"text":var R=M.defaultValue||"";P.setValue(F,{value:R});break;case"checkbox":case"radiobutton":var I=M.defaultValue===M.exportValues;P.setValue(F,{value:I});break;case"combobox":case"listbox":var L=M.defaultValue||"";P.setValue(F,{value:L});break;default:continue}var j=document.querySelector('[data-element-id="'.concat(F,'"]'));j&&(E.has(j)?j.dispatchEvent(new Event("resetform")):(0,a.warn)("_bindResetFormAction - element not allowed: ".concat(F)))}r.enableScripting&&(null===(t=r.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:r,detail:{id:"app",ids:T,name:"ResetForm"}}));return!1}:((0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=function(){return!1}))}}]),r}(C),M=function(t){d(r,t);var e=v(r);function r(t){var n,a,i;A(this,r);var o=!!(t.data.hasPopup||null!==(n=t.data.titleObj)&&void 0!==n&&n.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o})}return S(r,[{key:"render",value:function(){this.container.className="textAnnotation";var t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.append(t),this.container}}]),r}(C),F=function(t){d(r,t);var e=v(r);function r(){return A(this,r),e.apply(this,arguments)}return S(r,[{key:"render",value:function(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}},{key:"_getKeyModifier",value:function(t){var e=C.platform,r=e.isWin,n=e.isMac;return r&&t.ctrlKey||n&&t.metaKey}},{key:"_setEventListener",value:function(t,e,r,n){var a=this;e.includes("mouse")?t.addEventListener(e,function(t){var e;null===(e=a.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:a,detail:{id:a.data.id,name:r,value:n(t),shift:t.shiftKey,modifier:a._getKeyModifier(t)}})}):t.addEventListener(e,function(t){var e;null===(e=a.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:a,detail:{id:a.data.id,name:r,value:n(t)}})})}},{key:"_setEventListeners",value:function(t,e,r){var n,a=g(e);try{for(a.s();!(n=a.n()).done;){var i,o=b(n.value,2),s=o[0],l=o[1];("Action"===l||null!==(i=this.data.actions)&&void 0!==i&&i[l])&&this._setEventListener(t,s,l,r)}}catch(t){a.e(t)}finally{a.f()}}},{key:"_setBackgroundColor",value:function(t){var e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":a.Util.makeHexColor(e[0],e[1],e[2])}},{key:"_setTextStyle",value:function(t){var e,r=this.data.defaultAppearanceData.fontColor,n=this.data.defaultAppearanceData.fontSize||9,i=t.style;if(this.data.multiLine){var o=Math.abs(this.data.rect[3]-this.data.rect[1]),s=o/(Math.round(o/(a.LINE_FACTOR*n))||1);e=Math.min(n,Math.round(s/a.LINE_FACTOR))}else{var l=Math.abs(this.data.rect[3]-this.data.rect[1]);e=Math.min(n,Math.round(l/a.LINE_FACTOR))}i.fontSize="calc(".concat(e,"px * var(--scale-factor))"),i.color=a.Util.makeHexColor(r[0],r[1],r[2]),null!==this.data.textAlignment&&(i.textAlign=["left","center","right"][this.data.textAlignment])}},{key:"_setRequired",value:function(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}]),r}(C),R=function(t){d(r,t);var e=v(r);function r(t){A(this,r);var n=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;return e.call(this,t,{isRenderable:n})}return S(r,[{key:"setPropertyOnSiblings",value:function(t,e,r,n){var a,i=this.annotationStorage,o=g(this._getElementsByName(t.name,t.id));try{for(o.s();!(a=o.n()).done;){var s=a.value;s.domElement&&(s.domElement[e]=r),i.setValue(s.id,h({},n,r))}}catch(t){o.e(t)}finally{o.f()}}},{key:"render",value:function(){var t=this,e=this.annotationStorage,r=this.data.id;this.container.className="textWidgetAnnotation";var n=null;if(this.renderForms){var a=e.getValue(r,{value:this.data.fieldValue}),i=a.formattedValue||a.value||"",o={userValue:i,formattedValue:null,valueOnFocus:""};this.data.multiLine?((n=document.createElement("textarea")).textContent=i,this.data.doNotScroll&&(n.style.overflowY="hidden")):((n=document.createElement("input")).type="text",n.setAttribute("value",i),this.data.doNotScroll&&(n.style.overflowX="hidden")),E.add(n),n.setAttribute("data-element-id",r),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=x,this._setRequired(n,this.data.required),n.addEventListener("input",function(a){e.setValue(r,{value:a.target.value}),t.setPropertyOnSiblings(n,"value",a.target.value,"value")}),n.addEventListener("resetform",function(e){var r,a=null!==(r=t.data.defaultFieldValue)&&void 0!==r?r:"";n.value=o.userValue=a,o.formattedValue=null});var s=function(t){var e=o.formattedValue;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var l;n.addEventListener("focus",function(t){o.userValue&&(t.target.value=o.userValue),o.valueOnFocus=t.target.value}),n.addEventListener("updatefromsandbox",function(n){var a={value:function(t){var n;o.userValue=null!==(n=t.detail.value)&&void 0!==n?n:"",e.setValue(r,{value:o.userValue.toString()}),t.target.value=o.userValue},formattedValue:function(t){var n=t.detail.formattedValue;o.formattedValue=n,null!=n&&t.target!==document.activeElement&&(t.target.value=n),e.setValue(r,{formattedValue:n})},selRange:function(t){var e;(e=t.target).setSelectionRange.apply(e,f(t.detail.selRange))}};t._dispatchEventFromSandbox(a,n)}),n.addEventListener("keydown",function(e){var n,a=-1;if("Escape"===e.key?a=0:"Enter"===e.key?a=2:"Tab"===e.key&&(a=3),-1!==a){var i=e.target.value;o.valueOnFocus!==i&&(o.userValue=i,null===(n=t.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:t,detail:{id:r,name:"Keystroke",value:i,willCommit:!0,commitKey:a,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}});var u=s;s=null,n.addEventListener("blur",function(e){var n,a=e.target.value;(o.userValue=a,t._mouseState.isDown&&o.valueOnFocus!==a)&&(null===(n=t.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:t,detail:{id:r,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));u(e)}),null!==(l=this.data.actions)&&void 0!==l&&l.Keystroke&&n.addEventListener("beforeinput",function(e){var n,a=e.data,i=e.target,o=i.value,s=i.selectionStart,l=i.selectionEnd,u=s,c=l;switch(e.inputType){case"deleteWordBackward":var h=o.substring(0,s).match(/\w*[^\w]*$/);h&&(u-=h[0].length);break;case"deleteWordForward":var f=o.substring(s).match(/^[^\w]*\w*/);f&&(c+=f[0].length);break;case"deleteContentBackward":s===l&&(u-=1);break;case"deleteContentForward":s===l&&(c+=1)}e.preventDefault(),null===(n=t.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:t,detail:{id:r,name:"Keystroke",value:o,change:a||"",willCommit:!1,selStart:u,selEnd:c}})}),this._setEventListeners(n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(t){return t.target.value})}if(s&&n.addEventListener("blur",s),null!==this.data.maxLen&&(n.maxLength=this.data.maxLen),this.data.comb){var c=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(c,"px * var(--scale-factor) - 1ch)")}}else(n=document.createElement("div")).textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell";return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}]),r}(F),I=function(t){d(r,t);var e=v(r);function r(t){return A(this,r),e.call(this,t,{isRenderable:t.renderForms})}return S(r,[{key:"render",value:function(){var t=this,e=this.annotationStorage,r=this.data,n=r.id,a=e.getValue(n,{value:r.exportValue===r.fieldValue}).value;"string"==typeof a&&(a="Off"!==a,e.setValue(n,{value:a})),this.container.className="buttonWidgetAnnotation checkBox";var i=document.createElement("input");return E.add(i),i.setAttribute("data-element-id",n),i.disabled=r.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=r.fieldName,a&&i.setAttribute("checked",!0),i.setAttribute("exportValue",r.exportValue),i.tabIndex=x,i.addEventListener("change",function(a){var i,o=a.target,s=o.name,l=o.checked,u=g(t._getElementsByName(s,n));try{for(u.s();!(i=u.n()).done;){var c=i.value,h=l&&c.exportValue===r.exportValue;c.domElement&&(c.domElement.checked=h),e.setValue(c.id,{value:h})}}catch(t){u.e(t)}finally{u.f()}e.setValue(n,{value:l})}),i.addEventListener("resetform",function(t){var e=r.defaultFieldValue||"Off";t.target.checked=e===r.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",function(r){var a={value:function(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};t._dispatchEventFromSandbox(a,r)}),this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(t){return t.target.checked})),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}]),r}(F),L=function(t){d(r,t);var e=v(r);function r(t){return A(this,r),e.call(this,t,{isRenderable:t.renderForms})}return S(r,[{key:"render",value:function(){var t=this;this.container.className="buttonWidgetAnnotation radioButton";var e=this.annotationStorage,r=this.data,n=r.id,a=e.getValue(n,{value:r.fieldValue===r.buttonValue}).value;"string"==typeof a&&(a=a!==r.buttonValue,e.setValue(n,{value:a}));var i=document.createElement("input");if(E.add(i),i.setAttribute("data-element-id",n),i.disabled=r.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=r.fieldName,a&&i.setAttribute("checked",!0),i.tabIndex=x,i.addEventListener("change",function(r){var a,i=r.target,o=i.name,s=i.checked,l=g(t._getElementsByName(o,n));try{for(l.s();!(a=l.n()).done;){var u=a.value;e.setValue(u.id,{value:!1})}}catch(t){l.e(t)}finally{l.f()}e.setValue(n,{value:s})}),i.addEventListener("resetform",function(t){var e=r.defaultFieldValue;t.target.checked=null!=e&&e===r.buttonValue}),this.enableScripting&&this.hasJSActions){var o=r.buttonValue;i.addEventListener("updatefromsandbox",function(r){var a={value:function(r){var a,i=o===r.detail.value,s=g(t._getElementsByName(r.target.name));try{for(s.s();!(a=s.n()).done;){var l=a.value,u=i&&l.id===n;l.domElement&&(l.domElement.checked=u),e.setValue(l.id,{value:u})}}catch(t){s.e(t)}finally{s.f()}}};t._dispatchEventFromSandbox(a,r)}),this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(t){return t.target.checked})}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}]),r}(F),j=function(t){d(r,t);var e=v(r);function r(t){return A(this,r),e.call(this,t,{ignoreBorder:t.data.hasAppearance})}return S(r,[{key:"render",value:function(){var t=this,e=c(m(r.prototype),"render",this).call(this);e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText);var n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",function(e){t._dispatchEventFromSandbox({},e)})),e}}]),r}(O),D=function(t){d(r,t);var e=v(r);function r(t){return A(this,r),e.call(this,t,{isRenderable:t.renderForms})}return S(r,[{key:"render",value:function(){var t=this;this.container.className="choiceWidgetAnnotation";var e=this.annotationStorage,r=this.data.id,n=e.getValue(r,{value:this.data.fieldValue}),a=document.createElement("select");E.add(a),a.setAttribute("data-element-id",r),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=x;var i=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",function(e){var r,n=t.data.defaultFieldValue,i=g(a.options);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.selected=o.value===n}}catch(t){i.e(t)}finally{i.f()}});var o,s=g(this.data.options);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=document.createElement("option");u.textContent=l.displayValue,u.value=l.exportValue,n.value.includes(l.exportValue)&&(u.setAttribute("selected",!0),i=!1),a.append(u)}}catch(t){s.e(t)}finally{s.f()}var c=null;if(i){var h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),a.prepend(h),c=function(){h.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}var f=function(t,e){var r=e?"value":"textContent",n=t.target.options;return t.target.multiple?Array.prototype.filter.call(n,function(t){return t.selected}).map(function(t){return t[r]}):-1===n.selectedIndex?null:n[n.selectedIndex][r]},d=function(t){var e=t.target.options;return Array.prototype.map.call(e,function(t){return{displayValue:t.textContent,exportValue:t.value}})};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",function(n){var i={value:function(t){var n;null===(n=c)||void 0===n||n();var i,o=t.detail.value,s=new Set(Array.isArray(o)?o:[o]),l=g(a.options);try{for(l.s();!(i=l.n()).done;){var u=i.value;u.selected=s.has(u.value)}}catch(t){l.e(t)}finally{l.f()}e.setValue(r,{value:f(t,!0)})},multipleSelection:function(t){a.multiple=!0},remove:function(t){var n=a.options,i=t.detail.remove;if(n[i].selected=!1,a.remove(i),n.length>0){var o=Array.prototype.findIndex.call(n,function(t){return t.selected});-1===o&&(n[0].selected=!0)}e.setValue(r,{value:f(t,!0),items:d(t)})},clear:function(t){for(;0!==a.length;)a.remove(0);e.setValue(r,{value:null,items:[]})},insert:function(t){var n=t.detail.insert,i=n.index,o=n.displayValue,s=n.exportValue,l=a.children[i],u=document.createElement("option");u.textContent=o,u.value=s,l?l.before(u):a.append(u),e.setValue(r,{value:f(t,!0),items:d(t)})},items:function(t){for(var n=t.detail.items;0!==a.length;)a.remove(0);var i,o=g(n);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=s.displayValue,u=s.exportValue,c=document.createElement("option");c.textContent=l,c.value=u,a.append(c)}}catch(t){o.e(t)}finally{o.f()}a.options.length>0&&(a.options[0].selected=!0),e.setValue(r,{value:f(t,!0),items:d(t)})},indices:function(t){var n,a=new Set(t.detail.indices),i=g(t.target.options);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.selected=a.has(o.index)}}catch(t){i.e(t)}finally{i.f()}e.setValue(r,{value:f(t,!0)})},editable:function(t){t.target.disabled=!t.detail.editable}};t._dispatchEventFromSandbox(i,n)}),a.addEventListener("input",function(n){var a,i=f(n,!0),o=f(n,!1);e.setValue(r,{value:i}),null===(a=t.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:t,detail:{id:r,name:"Keystroke",value:o,changeEx:i,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],function(t){return t.target.checked})):a.addEventListener("input",function(t){e.setValue(r,{value:f(t,!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}]),r}(F),N=function(t){d(r,t);var e=v(r);function r(t){var n,a,i;A(this,r);var o=!!(null!==(n=t.data.titleObj)&&void 0!==n&&n.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o})}return S(r,[{key:"render",value:function(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var t='[data-annotation-id="'.concat(this.data.parentId,'"]'),e=this.layer.querySelectorAll(t);if(0===e.length)return this.container;var r=new U({container:this.container,trigger:Array.from(e),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),n=this.page,i=a.Util.normalizeRect([this.data.parentRect[0],n.view[3]-this.data.parentRect[1]+n.view[1],this.data.parentRect[2],n.view[3]-this.data.parentRect[3]+n.view[1]]),o=i[0]+this.data.parentRect[2]-this.data.parentRect[0],s=i[1],l=b(this.viewport.viewBox,4),u=l[0],c=l[1],h=l[2]-u,f=l[3]-c;return this.container.style.left="".concat(100*(o-u)/h,"%"),this.container.style.top="".concat(100*(s-c)/f,"%"),this.container.append(r.render()),this.container}}]),r}(C),U=function(){function t(e){A(this,t),this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.titleObj=e.titleObj,this.modificationDate=e.modificationDate,this.contentsObj=e.contentsObj,this.richText=e.richText,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}return S(t,[{key:"render",value:function(){var t,e,r=document.createElement("div");r.className="popupWrapper",this.hideElement=this.hideWrapper?r:this.container,this.hideElement.hidden=!0;var n=document.createElement("div");n.className="popup";var o=this.color;if(o){var s=.7*(255-o[0])+o[0],u=.7*(255-o[1])+o[1],c=.7*(255-o[2])+o[2];n.style.backgroundColor=a.Util.makeHexColor(0|s,0|u,0|c)}var h=document.createElement("h1");h.dir=this.titleObj.dir,h.textContent=this.titleObj.str,n.append(h);var f=i.PDFDateString.toDateObject(this.modificationDate);if(f){var d=document.createElement("span");d.className="popupDate",d.textContent="{{date}}, {{time}}",d.dataset.l10nId="annotation_date_string",d.dataset.l10nArgs=JSON.stringify({date:f.toLocaleDateString(),time:f.toLocaleTimeString()}),n.append(d)}if(null===(t=this.richText)||void 0===t||!t.str||null!==(e=this.contentsObj)&&void 0!==e&&e.str&&this.contentsObj.str!==this.richText.str){var p=this._formatContents(this.contentsObj);n.append(p)}else l.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:n}),n.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);var v,y=g(this.trigger);try{for(y.s();!(v=y.n()).done;){var m=v.value;m.addEventListener("click",this._toggle.bind(this)),m.addEventListener("mouseover",this._show.bind(this,!1)),m.addEventListener("mouseout",this._hide.bind(this,!1))}}catch(t){y.e(t)}finally{y.f()}return n.addEventListener("click",this._hide.bind(this,!0)),r.append(n),r}},{key:"_formatContents",value:function(t){var e=t.str,r=t.dir,n=document.createElement("p");n.className="popupContent",n.dir=r;for(var a=e.split(/(?:\r\n?|\n)/),i=0,o=a.length;i<o;++i){var s=a[i];n.append(document.createTextNode(s)),i<o-1&&n.append(document.createElement("br"))}return n}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}},{key:"_hide",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}]),t}(),W=function(t){d(r,t);var e=v(r);function r(t){var n,a,i;A(this,r);var o=!!(t.data.hasPopup||null!==(n=t.data.titleObj)&&void 0!==n&&n.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0})}return S(r,[{key:"render",value:function(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),r}(C),B=function(t){d(r,t);var e=v(r);function r(t){var n,a,i;A(this,r);var o=!!(t.data.hasPopup||null!==(n=t.data.titleObj)&&void 0!==n&&n.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0})}return S(r,[{key:"render",value:function(){this.container.className="lineAnnotation";var t=this.data,e=P(t.rect),r=e.width,n=e.height,a=this.svgFactory.create(r,n,!0),i=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),i.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),i.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),i.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),i.setAttribute("stroke-width",t.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),a.append(i),this.container.append(a),this._createPopup(i,t),this.container}}]),r}(C),G=function(t){d(r,t);var e=v(r);function r(t){var n,a,i;A(this,r);var o=!!(t.data.hasPopup||null!==(n=t.data.titleObj)&&void 0!==n&&n.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0})}return S(r,[{key:"render",value:function(){this.container.className="squareAnnotation";var t=this.data,e=P(t.rect),r=e.width,n=e.height,a=this.svgFactory.create(r,n,!0),i=t.borderStyle.width,o=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",i/2),o.setAttribute("y",i/2),o.setAttribute("width",r-i),o.setAttribute("height",n-i),o.setAttribute("stroke-width",i||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),this._createPopup(o,t),this.container}}]),r}(C),q=function(t){d(r,t);var e=v(r);function r(t){var n,a,i;A(this,r);var o=!!(t.data.hasPopup||null!==(n=t.data.titleObj)&&void 0!==n&&n.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0})}return S(r,[{key:"render",value:function(){this.container.className="circleAnnotation";var t=this.data,e=P(t.rect),r=e.width,n=e.height,a=this.svgFactory.create(r,n,!0),i=t.borderStyle.width,o=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",r/2),o.setAttribute("cy",n/2),o.setAttribute("rx",r/2-i/2),o.setAttribute("ry",n/2-i/2),o.setAttribute("stroke-width",i||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),this._createPopup(o,t),this.container}}]),r}(C),z=function(t){d(r,t);var e=v(r);function r(t){var n,a,i,o;A(this,r);var s=!!(t.data.hasPopup||null!==(n=t.data.titleObj)&&void 0!==n&&n.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return(o=e.call(this,t,{isRenderable:s,ignoreBorder:!0})).containerClassName="polylineAnnotation",o.svgElementName="svg:polyline",o}return S(r,[{key:"render",value:function(){this.container.className=this.containerClassName;var t,e=this.data,r=P(e.rect),n=r.width,a=r.height,i=this.svgFactory.create(n,a,!0),o=[],s=g(e.vertices);try{for(s.s();!(t=s.n()).done;){var l=t.value,u=l.x-e.rect[0],c=e.rect[3]-l.y;o.push(u+","+c)}}catch(t){s.e(t)}finally{s.f()}o=o.join(" ");var h=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",o),h.setAttribute("stroke-width",e.borderStyle.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),i.append(h),this.container.append(i),this._createPopup(h,e),this.container}}]),r}(C),H=function(t){d(r,t);var e=v(r);function r(t){var n;return A(this,r),(n=e.call(this,t)).containerClassName="polygonAnnotation",n.svgElementName="svg:polygon",n}return S(r)}(z),V=function(t){d(r,t);var e=v(r);function r(t){var n,a,i;A(this,r);var o=!!(t.data.hasPopup||null!==(n=t.data.titleObj)&&void 0!==n&&n.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0})}return S(r,[{key:"render",value:function(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),r}(C),X=function(t){d(r,t);var e=v(r);function r(t){var n,a,i,o;A(this,r);var s=!!(t.data.hasPopup||null!==(n=t.data.titleObj)&&void 0!==n&&n.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return(o=e.call(this,t,{isRenderable:s,ignoreBorder:!0})).containerClassName="inkAnnotation",o.svgElementName="svg:polyline",o}return S(r,[{key:"render",value:function(){this.container.className=this.containerClassName;var t,e=this.data,r=P(e.rect),n=r.width,a=r.height,i=this.svgFactory.create(n,a,!0),o=g(e.inkLists);try{for(o.s();!(t=o.n()).done;){var s,l=t.value,u=[],c=g(l);try{for(c.s();!(s=c.n()).done;){var h=s.value,f=h.x-e.rect[0],d=e.rect[3]-h.y;u.push("".concat(f,",").concat(d))}}catch(t){c.e(t)}finally{c.f()}u=u.join(" ");var p=this.svgFactory.createElement(this.svgElementName);p.setAttribute("points",u),p.setAttribute("stroke-width",e.borderStyle.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),this._createPopup(p,e),i.append(p)}}catch(t){o.e(t)}finally{o.f()}return this.container.append(i),this.container}}]),r}(C),Y=function(t){d(r,t);var e=v(r);function r(t){var n,a,i;A(this,r);var o=!!(t.data.hasPopup||null!==(n=t.data.titleObj)&&void 0!==n&&n.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}return S(r,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}]),r}(C),K=function(t){d(r,t);var e=v(r);function r(t){var n,a,i;A(this,r);var o=!!(t.data.hasPopup||null!==(n=t.data.titleObj)&&void 0!==n&&n.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}return S(r,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}]),r}(C),J=function(t){d(r,t);var e=v(r);function r(t){var n,a,i;A(this,r);var o=!!(t.data.hasPopup||null!==(n=t.data.titleObj)&&void 0!==n&&n.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}return S(r,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}]),r}(C),Q=function(t){d(r,t);var e=v(r);function r(t){var n,a,i;A(this,r);var o=!!(t.data.hasPopup||null!==(n=t.data.titleObj)&&void 0!==n&&n.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}return S(r,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}]),r}(C),$=function(t){d(r,t);var e=v(r);function r(t){var n,a,i;A(this,r);var o=!!(t.data.hasPopup||null!==(n=t.data.titleObj)&&void 0!==n&&n.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0})}return S(r,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),r}(C),Z=function(t){d(r,t);var e=v(r);function r(t){var n,a;A(this,r);var o=(a=e.call(this,t,{isRenderable:!0})).data.file,s=o.filename,l=o.content;return a.filename=(0,i.getFilenameFromUrl)(s),a.content=l,null===(n=a.linkService.eventBus)||void 0===n||n.dispatch("fileattachmentannotation",{source:y(a),filename:s,content:l}),a}return S(r,[{key:"render",value:function(){var t,e;this.container.className="fileAttachmentAnnotation";var r=document.createElement("div");return r.className="popupTriggerArea",r.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(null!==(t=this.data.titleObj)&&void 0!==t&&t.str||null!==(e=this.data.contentsObj)&&void 0!==e&&e.str||this.data.richText)&&this._createPopup(r,this.data),this.container.append(r),this.container}},{key:"_download",value:function(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.container,this.content,this.filename)}}]),r}(C),tt=function(){function t(){A(this,t)}return S(t,null,[{key:"render",value:function(e){var r=e.annotations,n=e.div,s=e.viewport;u(this,t,et).call(this,n,s);var l,c=[],h=[],f=g(r);try{for(f.s();!(l=f.n()).done;){var d=l.value;if(d)if(d.annotationType!==a.AnnotationType.POPUP){var p=P(d.rect),v=p.width,y=p.height;v<=0||y<=0||c.push(d)}else h.push(d)}}catch(e){f.e(e)}finally{f.f()}h.length&&c.push.apply(c,h);for(var m=0,b=c;m<b.length;m++){var _=b[m],w=T.create({data:_,layer:n,page:e.page,viewport:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new i.DOMSVGFactory,annotationStorage:e.annotationStorage||new o.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,mouseState:e.mouseState||{isDown:!1}});if(w.isRenderable){var A=w.render();if(_.hidden&&(A.style.visibility="hidden"),Array.isArray(A)){var k,S=g(A);try{for(S.s();!(k=S.n()).done;){var x=k.value;n.append(x)}}catch(e){S.e(e)}finally{S.f()}}else w instanceof N?n.prepend(A):n.append(A)}}u(this,t,rt).call(this,n,e.annotationCanvasMap)}},{key:"update",value:function(e){var r=e.annotationCanvasMap,n=e.div,a=e.viewport;u(this,t,et).call(this,n,a),u(this,t,rt).call(this,n,r),n.hidden=!1}}]),t}();function et(t,e){var r=e.width,n=e.height,a=e.rotation,i=t.style,o=a%180!=0,s=Math.floor(r)+"px",l=Math.floor(n)+"px";i.width=o?l:s,i.height=o?s:l,t.setAttribute("data-main-rotation",a)}function rt(t,e){if(e){var r,n=g(e);try{for(n.s();!(r=n.n()).done;){var a=b(r.value,2),i=a[0],o=a[1],s=t.querySelector('[data-annotation-id="'.concat(i,'"]'));if(s){var l=s.firstChild;l?"CANVAS"===l.nodeName?l.replaceWith(o):l.before(o):s.append(o)}}}catch(t){n.e(t)}finally{n.f()}e.clear()}}e.AnnotationLayer=tt},(t,e)=>{"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,r){e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,null,[{key:"CMYK_G",value:function(t){var e=r(t,4),n=e[0],a=e[1],i=e[2],o=e[3];return["G",1-Math.min(1,.3*n+.59*i+.11*a+o)]}},{key:"G_CMYK",value:function(t){return["CMYK",0,0,0,1-r(t,1)[0]]}},{key:"G_RGB",value:function(t){var e=r(t,1)[0];return["RGB",e,e,e]}},{key:"G_HTML",value:function(t){var e=i(r(t,1)[0]);return"#".concat(e).concat(e).concat(e)}},{key:"RGB_G",value:function(t){var e=r(t,3);return["G",.3*e[0]+.59*e[1]+.11*e[2]]}},{key:"RGB_HTML",value:function(t){var e=r(t,3),n=e[0],a=e[1],o=e[2],s=i(n),l=i(a),u=i(o);return"#".concat(s).concat(l).concat(u)}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"CMYK_RGB",value:function(t){var e=r(t,4),n=e[0],a=e[1],i=e[2],o=e[3];return["RGB",1-Math.min(1,n+o),1-Math.min(1,i+o),1-Math.min(1,a+o)]}},{key:"CMYK_HTML",value:function(t){var e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}},{key:"RGB_CMYK",value:function(t){var e=r(t,3),n=1-e[0],a=1-e[1],i=1-e[2];return["CMYK",n,a,i,Math.min(n,a,i)]}}]),t}();e.ColorConverters=o},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=r(145);function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=o(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){l=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}function o(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,r){e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,null,[{key:"setupStorage",value:function(t,e,r,n,a){var o=n.getValue(e,{value:null});switch(r.name){case"textarea":if(null!==o.value&&(t.textContent=o.value),"print"===a)break;t.addEventListener("input",function(t){n.setValue(e,{value:t.target.value})});break;case"input":if("radio"===r.attributes.type||"checkbox"===r.attributes.type){if(o.value===r.attributes.xfaOn?t.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&t.removeAttribute("checked"),"print"===a)break;t.addEventListener("change",function(t){n.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})})}else{if(null!==o.value&&t.setAttribute("value",o.value),"print"===a)break;t.addEventListener("input",function(t){n.setValue(e,{value:t.target.value})})}break;case"select":if(null!==o.value){var s,l=i(r.children);try{for(l.s();!(s=l.n()).done;){var u=s.value;u.attributes.value===o.value&&(u.attributes.selected=!0)}}catch(t){l.e(t)}finally{l.f()}}t.addEventListener("input",function(t){var r=t.target.options,a=-1===r.selectedIndex?"":r[r.selectedIndex].value;n.setValue(e,{value:a})})}}},{key:"setAttributes",value:function(t){var e=t.html,r=t.element,n=t.storage,i=void 0===n?null:n,o=t.intent,s=t.linkService,l=r.attributes,u=e instanceof HTMLAnchorElement;"radio"===l.type&&(l.name="".concat(l.name,"-").concat(o));for(var c=0,h=Object.entries(l);c<h.length;c++){var f=a(h[c],2),d=f[0],p=f[1];if(null!=p)switch(d){case"class":p.length&&e.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!u||"href"!==d&&"newWindow"!==d)&&e.setAttribute(d,p)}}u&&s.addLinkAttributes(e,l.href,l.newWindow),i&&l.dataId&&this.setupStorage(e,l.dataId,r,i)}},{key:"render",value:function(t){var e=t.annotationStorage,r=t.linkService,o=t.xfaHtml,s=t.intent||"display",l=document.createElement(o.name);o.attributes&&this.setAttributes({html:l,element:o,intent:s,linkService:r});var u=[[o,-1,l]],c=t.div;if(c.append(l),t.viewport){var h="matrix(".concat(t.viewport.transform.join(","),")");c.style.transform=h}"richText"!==s&&c.setAttribute("class","xfaLayer xfaFont");for(var f=[];u.length>0;){var d,p=a(u.at(-1),3),v=p[0],y=p[1],m=p[2];if(y+1!==v.children.length){var g=v.children[++u.at(-1)[1]];if(null!==g){var b=g.name;if("#text"!==b){var _=void 0;if(_=null!=g&&null!==(d=g.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(g.attributes.xmlns,b):document.createElement(b),m.append(_),g.attributes&&this.setAttributes({html:_,element:g,storage:e,intent:s,linkService:r}),g.children&&g.children.length>0)u.push([g,-1,_]);else if(g.value){var w=document.createTextNode(g.value);n.XfaText.shouldBuildText(b)&&f.push(w),_.append(w)}}else{var A=document.createTextNode(g.value);f.push(A),m.append(A)}}}else u.pop()}var k,S=i(c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"));try{for(S.s();!(k=S.n()).done;)k.value.setAttribute("readOnly",!0)}catch(t){S.e(t)}finally{S.f()}return{textDivs:f}}},{key:"update",value:function(t){var e="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=e,t.div.hidden=!1}}]),t}();e.XfaLayer=u},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=function(t){var e=new y({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return e._render(t.timeout),e};var n=r(1),a=r(129);function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){l=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l=30,u=new Map,c=/^\s+$/g;function h(t,e,r,a){var i=document.createElement("span"),o=t._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};t._textDivs.push(i);var s=n.Util.transform(t._viewport.transform,e.transform),h=Math.atan2(s[1],s[0]),f=r[e.fontName];f.vertical&&(h+=Math.PI/2);var d,p,v=Math.hypot(s[2],s[3]),y=v*function(t,e){var r=u.get(t);if(r)return r;e.save(),e.font="".concat(l,"px ").concat(t);var n=e.measureText(""),a=n.fontBoundingBoxAscent,i=Math.abs(n.fontBoundingBoxDescent);if(a){e.restore();var o=a/(a+i);return u.set(t,o),o}e.strokeStyle="red",e.clearRect(0,0,l,l),e.strokeText("g",0,0);var s=e.getImageData(0,0,l,l).data;i=0;for(var c=s.length-1-3;c>=0;c-=4)if(s[c]>0){i=Math.ceil(c/4/l);break}e.clearRect(0,0,l,l),e.strokeText("A",0,l),a=0;for(var h=0,f=(s=e.getImageData(0,0,l,l).data).length;h<f;h+=4)if(s[h]>0){a=l-Math.floor(h/4/l);break}if(e.restore(),a){var d=a/(a+i);return u.set(t,d),d}return u.set(t,.8),.8}(f.fontFamily,a);0===h?(d=s[4],p=s[5]-y):(d=s[4]+y*Math.sin(h),p=s[5]-y*Math.cos(h)),i.style.left="".concat(d,"px"),i.style.top="".concat(p,"px"),i.style.fontSize="".concat(v,"px"),i.style.fontFamily=f.fontFamily,o.fontSize=v,i.setAttribute("role","presentation"),i.textContent=e.str,i.dir=e.dir,t._fontInspectorEnabled&&(i.dataset.fontName=e.fontName),0!==h&&(o.angle=h*(180/Math.PI));var m=!1;if(e.str.length>1||t._enhanceTextSelection&&c.test(e.str))m=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){var g=Math.abs(e.transform[0]),b=Math.abs(e.transform[3]);g!==b&&Math.max(g,b)/Math.min(g,b)>1.5&&(m=!0)}if(m&&(f.vertical?o.canvasWidth=e.height*t._viewport.scale:o.canvasWidth=e.width*t._viewport.scale),t._textDivProperties.set(i,o),t._textContentStream&&t._layoutText(i),t._enhanceTextSelection&&o.hasText){var _=1,w=0;0!==h&&(_=Math.cos(h),w=Math.sin(h));var A,k,S=(f.vertical?e.height:e.width)*t._viewport.scale,x=v;0!==h?(A=[_,w,-w,_,d,p],k=n.Util.getAxialAlignedBoundingBox([0,0,S,x],A)):k=[d,p,d+S,p+x],t._bounds.push({left:k[0],top:k[1],right:k[2],bottom:k[3],div:i,size:[S,x],m:A})}}function f(t){if(!t._canceled){var e=t._textDivs,r=t._capability,n=e.length;if(n>1e5)t._renderingDone=!0,r.resolve();else{if(!t._textContentStream)for(var a=0;a<n;a++)t._layoutText(e[a]);t._renderingDone=!0,r.resolve()}}}function d(t,e,r){for(var n=0,a=0;a<r;a++){var i=t[e++];i>0&&(n=n?Math.min(i,n):i)}return n}function p(t){for(var e=t._bounds,r=t._viewport,a=function(t,e,r){var n=r.map(function(t,e){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:void 0,x2New:void 0}});v(t,n);var a,i=new Array(r.length),s=o(n);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.index;i[u]={left:l.x1New,top:0,right:l.x2New,bottom:0}}}catch(t){s.e(t)}finally{s.f()}r.map(function(e,r){var a=i[r],o=n[r];o.x1=e.top,o.y1=t-a.right,o.x2=e.bottom,o.y2=t-a.left,o.index=r,o.x1New=void 0,o.x2New=void 0}),v(e,n);var c,h=o(n);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=f.index;i[d].top=f.x1New,i[d].bottom=f.x2New}}catch(t){h.e(t)}finally{h.f()}return i}(r.width,r.height,e),i=0;i<a.length;i++){var s=e[i].div,l=t._textDivProperties.get(s);if(0!==l.angle){for(var u=a[i],c=e[i],h=c.m,f=h[0],p=h[1],y=[[0,0],[0,c.size[1]],[c.size[0],0],c.size],m=new Float64Array(64),g=0,b=y.length;g<b;g++){var _=n.Util.applyTransform(y[g],h);m[g+0]=f&&(u.left-_[0])/f,m[g+4]=p&&(u.top-_[1])/p,m[g+8]=f&&(u.right-_[0])/f,m[g+12]=p&&(u.bottom-_[1])/p,m[g+16]=p&&(u.left-_[0])/-p,m[g+20]=f&&(u.top-_[1])/f,m[g+24]=p&&(u.right-_[0])/-p,m[g+28]=f&&(u.bottom-_[1])/f,m[g+32]=f&&(u.left-_[0])/-f,m[g+36]=p&&(u.top-_[1])/-p,m[g+40]=f&&(u.right-_[0])/-f,m[g+44]=p&&(u.bottom-_[1])/-p,m[g+48]=p&&(u.left-_[0])/p,m[g+52]=f&&(u.top-_[1])/-f,m[g+56]=p&&(u.right-_[0])/p,m[g+60]=f&&(u.bottom-_[1])/-f}var w=1+Math.min(Math.abs(f),Math.abs(p));l.paddingLeft=d(m,32,16)/w,l.paddingTop=d(m,48,16)/w,l.paddingRight=d(m,0,16)/w,l.paddingBottom=d(m,16,16)/w,t._textDivProperties.set(s,l)}else l.paddingLeft=e[i].left-a[i].left,l.paddingTop=e[i].top-a[i].top,l.paddingRight=a[i].right-e[i].right,l.paddingBottom=a[i].bottom-e[i].bottom,t._textDivProperties.set(s,l)}}function v(t,e){e.sort(function(t,e){return t.x1-e.x1||t.index-e.index});var r,n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}],a=o(e);try{for(a.s();!(r=a.n()).done;){for(var i=r.value,s=0;s<n.length&&n[s].end<=i.y1;)s++;for(var l=n.length-1;l>=0&&n[l].start>=i.y2;)l--;var u=void 0,c=void 0,h=void 0,f=void 0,d=-1/0;for(h=s;h<=l;h++){c=(u=n[h]).boundary;var p;(p=c.x2>i.x1?c.index>i.index?c.x1New:i.x1:void 0===c.x2New?(c.x2+i.x1)/2:c.x2New)>d&&(d=p)}for(i.x1New=d,h=s;h<=l;h++)void 0===(c=(u=n[h]).boundary).x2New?c.x2>i.x1?c.index>i.index&&(c.x2New=c.x2):c.x2New=d:c.x2New>d&&(c.x2New=Math.max(d,c.x2));var v=[],y=null;for(h=s;h<=l;h++){var m=(c=(u=n[h]).boundary).x2>i.x2?c:i;y===m?v.at(-1).end=u.end:(v.push({start:u.start,end:u.end,boundary:m}),y=m)}for(n[s].start<i.y1&&(v[0].start=i.y1,v.unshift({start:n[s].start,end:i.y1,boundary:n[s].boundary})),i.y2<n[l].end&&(v.at(-1).end=i.y2,v.push({start:i.y2,end:n[l].end,boundary:n[l].boundary})),h=s;h<=l;h++)if(void 0===(c=(u=n[h]).boundary).x2New){var g=!1;for(f=s-1;!g&&f>=0&&n[f].start>=c.y1;f--)g=n[f].boundary===c;for(f=l+1;!g&&f<n.length&&n[f].end<=c.y2;f++)g=n[f].boundary===c;for(f=0;!g&&f<v.length;f++)g=v[f].boundary===c;g||(c.x2New=d)}Array.prototype.splice.apply(n,[s,l-s+1].concat(v))}}catch(t){a.e(t)}finally{a.f()}for(var b=0,_=n;b<_.length;b++){var w=_[b].boundary;void 0===w.x2New&&(w.x2New=Math.max(t,w.x2))}}var y=function(){function t(e){var r,i=this,o=e.textContent,s=e.textContentStream,l=e.container,u=e.viewport,c=e.textDivs,h=e.textContentItemsStr,f=e.enhanceTextSelection;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f&&(0,a.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=o,this._textContentStream=s,this._container=l,this._document=l.ownerDocument,this._viewport=u,this._textDivs=c||[],this._textContentItemsStr=h||[],this._enhanceTextSelection=!!f,this._fontInspectorEnabled=!(null===(r=globalThis.FontInspector)||void 0===r||!r.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(function(){i._enhanceTextSelection||(i._textDivProperties=null),i._layoutTextCtx&&(i._layoutTextCtx.canvas.width=0,i._layoutTextCtx.canvas.height=0,i._layoutTextCtx=null)}).catch(function(){})}return function(t,e,r){e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"promise",get:function(){return this._capability.promise}},{key:"cancel",value:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(function(){}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}},{key:"_processItems",value:function(t,e){for(var r=0,n=t.length;r<n;r++)if(void 0!==t[r].str)this._textContentItemsStr.push(t[r].str),h(this,t[r],e,this._layoutTextCtx);else if("beginMarkedContentProps"===t[r].type||"beginMarkedContent"===t[r].type){var a=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==t[r].id&&this._container.setAttribute("id","".concat(t[r].id)),a.append(this._container)}else"endMarkedContent"===t[r].type&&(this._container=this._container.parentNode)}},{key:"_layoutText",value:function(t){var e=this._textDivProperties.get(t),r="";if(0!==e.canvasWidth&&e.hasText){var n=t.style.fontFamily,a=e.fontSize;a===this._layoutTextLastFontSize&&n===this._layoutTextLastFontFamily||(this._layoutTextCtx.font="".concat(a*this._devicePixelRatio,"px ").concat(n),this._layoutTextLastFontSize=a,this._layoutTextLastFontFamily=n);var i=this._layoutTextCtx.measureText(t.textContent).width;if(i>0){var o=this._devicePixelRatio*e.canvasWidth/i;this._enhanceTextSelection&&(e.scale=o),r="scaleX(".concat(o,")")}}if(0!==e.angle&&(r="rotate(".concat(e.angle,"deg) ").concat(r)),r.length>0&&(this._enhanceTextSelection&&(e.originalTransform=r),t.style.transform=r),e.hasText&&this._container.append(t),e.hasEOL){var s=document.createElement("br");s.setAttribute("role","presentation"),this._container.append(s)}}},{key:"_render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=(0,n.createPromiseCapability)(),a=Object.create(null),i=this._document.createElement("canvas");if(i.height=i.width=l,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent){var o=this._textContent.items,s=this._textContent.styles;this._processItems(o,s),r.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');this._reader=this._textContentStream.getReader(),function e(){t._reader.read().then(function(n){var i=n.value;n.done?r.resolve():(Object.assign(a,i.styles),t._processItems(i.items,a),e())},r.reject)}()}r.promise.then(function(){a=null,e?t._renderTimer=setTimeout(function(){f(t),t._renderTimer=null},e):f(t)},this._capability.reject)}},{key:"expandTextDivs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(p(this),this._bounds=null);for(var e=[],r=[],n=0,a=this._textDivs.length;n<a;n++){var i=this._textDivs[n],o=this._textDivProperties.get(i);o.hasText&&(t?(e.length=0,r.length=0,o.originalTransform&&e.push(o.originalTransform),o.paddingTop>0?(r.push("".concat(o.paddingTop,"px")),e.push("translateY(".concat(-o.paddingTop,"px)"))):r.push(0),o.paddingRight>0?r.push("".concat(o.paddingRight/o.scale,"px")):r.push(0),o.paddingBottom>0?r.push("".concat(o.paddingBottom,"px")):r.push(0),o.paddingLeft>0?(r.push("".concat(o.paddingLeft/o.scale,"px")),e.push("translateX(".concat(-o.paddingLeft/o.scale,"px)"))):r.push(0),i.style.padding=r.join(" "),e.length&&(i.style.transform=e.join(" "))):(i.style.padding=null,i.style.transform=o.originalTransform))}}}}]),t}();e.TextLayerRenderTask=y},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=r(129),a=r(1),i=r(3);function o(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||u(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=u(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function u(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=f(function t(){d(this,t),(0,a.unreachable)("Not implemented: SVGGraphics")});e.SVGGraphics=p;var v=function(t){if(Number.isInteger(t))return t.toString();var e=t.toFixed(10),r=e.length-1;if("0"!==e[r])return e;do{r--}while("0"===e[r]);return e.substring(0,"."===e[r]?r:r+1)},y=function(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":"scale(".concat(v(t[0])," ").concat(v(t[3]),")");if(t[0]===t[3]&&t[1]===-t[2]){var e=180*Math.acos(t[0])/Math.PI;return"rotate(".concat(v(e),")")}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return"translate(".concat(v(t[4])," ").concat(v(t[5]),")");return"matrix(".concat(v(t[0])," ").concat(v(t[1])," ").concat(v(t[2])," ").concat(v(t[3])," ").concat(v(t[4])," ")+"".concat(v(t[5]),")")},m="normal",g="normal",b="#000000",_=["butt","round","square"],w=["miter","round","bevel"],A=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&"undefined"!=typeof Blob&&!r)return URL.createObjectURL(new Blob([t],{type:e}));for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="data:".concat(e,";base64,"),i=0,o=t.length;i<o;i+=3){var s=255&t[i],l=255&t[i+1],u=255&t[i+2];a+=n[s>>2]+n[(3&s)<<4|l>>4]+n[i+1<o?(15&l)<<2|u>>6:64]+n[i+2<o?63&u:64]}return a},k=function(){for(var t=new Uint8Array([137,80,78,71,13,10,26,10]),e=new Int32Array(256),r=0;r<256;r++){for(var n=r,o=0;o<8;o++)n=1&n?3988292384^n>>1&2147483647:n>>1&2147483647;e[r]=n}function s(t,r,n,a){var i=a,o=r.length;n[i]=o>>24&255,n[i+1]=o>>16&255,n[i+2]=o>>8&255,n[i+3]=255&o,n[i+=4]=255&t.charCodeAt(0),n[i+1]=255&t.charCodeAt(1),n[i+2]=255&t.charCodeAt(2),n[i+3]=255&t.charCodeAt(3),i+=4,n.set(r,i);var s=function(t,r,n){for(var a=-1,i=r;i<n;i++){var o=255&(a^t[i]);a=a>>>8^e[o]}return-1^a}(n,a+4,i+=r.length);n[i]=s>>24&255,n[i+1]=s>>16&255,n[i+2]=s>>8&255,n[i+3]=255&s}function l(t){var e=t.length,r=65535,n=Math.ceil(e/r),a=new Uint8Array(2+e+5*n+4),i=0;a[i++]=120,a[i++]=156;for(var o=0;e>r;)a[i++]=0,a[i++]=255,a[i++]=255,a[i++]=0,a[i++]=0,a.set(t.subarray(o,o+r),i),i+=r,o+=r,e-=r;a[i++]=1,a[i++]=255&e,a[i++]=e>>8&255,a[i++]=255&~e,a[i++]=(65535&~e)>>8&255,a.set(t.subarray(o),i),i+=t.length-o;var s=function(t,e,r){for(var n=1,a=0,i=e;i<r;++i)a=(a+(n=(n+(255&t[i]))%65521))%65521;return a<<16|n}(t,0,t.length);return a[i++]=s>>24&255,a[i++]=s>>16&255,a[i++]=s>>8&255,a[i++]=255&s,a}function u(e,r,n,o){var u,c,h,f=e.width,d=e.height,p=e.data;switch(r){case a.ImageKind.GRAYSCALE_1BPP:c=0,u=1,h=f+7>>3;break;case a.ImageKind.RGB_24BPP:c=2,u=8,h=3*f;break;case a.ImageKind.RGBA_32BPP:c=6,u=8,h=4*f;break;default:throw new Error("invalid format")}for(var v=new Uint8Array((1+h)*d),y=0,m=0,g=0;g<d;++g)v[y++]=0,v.set(p.subarray(m,m+h),y),m+=h,y+=h;if(r===a.ImageKind.GRAYSCALE_1BPP&&o){y=0;for(var b=0;b<d;b++){y++;for(var _=0;_<h;_++)v[y++]^=255}}var w=new Uint8Array([f>>24&255,f>>16&255,f>>8&255,255&f,d>>24&255,d>>16&255,d>>8&255,255&d,u,c,0,0,0]),k=function(t){if(!i.isNodeJS)return l(t);try{var e;e=parseInt(process.versions.node)>=8?t:Buffer.from(t);var r=require("zlib").deflateSync(e,{level:9});return r instanceof Uint8Array?r:new Uint8Array(r)}catch(t){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return l(t)}(v),S=t.length+36+w.length+k.length,x=new Uint8Array(S),E=0;return x.set(t,E),s("IHDR",w,x,E+=t.length),s("IDATA",k,x,E+=12+w.length),E+=12+k.length,s("IEND",new Uint8Array(0),x,E),A(x,"image/png",n)}return function(t,e,r){return u(t,void 0===t.kind?a.ImageKind.GRAYSCALE_1BPP:t.kind,e,r)}}(),S=function(){function t(){d(this,t),this.fontSizeScale=1,this.fontWeight=g,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=b,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return f(t,[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function(t,e){this.x=t,this.y=e}}]),t}(),x=0,E=0,P=0;e.SVGGraphics=p=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var o in d(this,t),(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new S,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=r,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!i,this._operatorIdMapping=[],a.OPS)this._operatorIdMapping[a.OPS[o]]=o}return f(t,[{key:"save",value:function(){this.transformStack.push(this.transformMatrix);var t=this.current;this.extraStack.push(t),this.current=t.clone()}},{key:"restore",value:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function(t){this.save(),this.executeOpTree(t),this.restore()}},{key:"loadDependencies",value:function(t){for(var e=this,r=t.fnArray,n=t.argsArray,i=0,o=r.length;i<o;i++)if(r[i]===a.OPS.dependency){var s,u=l(n[i]);try{var c=function(){var t=s.value,r=t.startsWith("g_")?e.commonObjs:e.objs,n=new Promise(function(e){r.get(t,e)});e.current.dependencies.push(n)};for(u.s();!(s=u.n()).done;)c()}catch(t){u.e(t)}finally{u.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function(t,e,r,n,i,o){var s=[t,e,r,n,i,o];this.transformMatrix=a.Util.transform(this.transformMatrix,s),this.tgrp=null}},{key:"getSVG",value:function(t,e){var r=this;this.viewport=e;var n=this._initialize(e);return this.loadDependencies(t).then(function(){return r.transformMatrix=a.IDENTITY_MATRIX,r.executeOpTree(r.convertOpList(t)),n})}},{key:"convertOpList",value:function(t){for(var e=this._operatorIdMapping,r=t.argsArray,n=t.fnArray,a=[],i=0,o=n.length;i<o;i++){var s=n[i];a.push({fnId:s,fn:e[s],args:r[i]})}return function(t){var e,r=[],n=[],a=l(t);try{for(a.s();!(e=a.n()).done;){var i=e.value;"save"!==i.fn?"restore"===i.fn?r=n.pop():r.push(i):(r.push({fnId:92,fn:"group",items:[]}),n.push(r),r=r.at(-1).items)}}catch(t){a.e(t)}finally{a.f()}return r}(a)}},{key:"executeOpTree",value:function(t){var e,r=l(t);try{for(r.s();!(e=r.n()).done;){var n=e.value,i=n.fn,o=n.fnId,s=n.args;switch(0|o){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(s);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(s[0],s[1]);break;case a.OPS.setFont:this.setFont(s);break;case a.OPS.showText:case a.OPS.showSpacedText:this.showText(s[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(s[0],s[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(s[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(s[0]);break;case a.OPS.setHScale:this.setHScale(s[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(s[0],s[1],s[2],s[3],s[4],s[5]);break;case a.OPS.setTextRise:this.setTextRise(s[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(s[0]);break;case a.OPS.setLineWidth:this.setLineWidth(s[0]);break;case a.OPS.setLineJoin:this.setLineJoin(s[0]);break;case a.OPS.setLineCap:this.setLineCap(s[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(s[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(s[0],s[1],s[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(s[0],s[1],s[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(s);break;case a.OPS.setFillColorN:this.setFillColorN(s);break;case a.OPS.shadingFill:this.shadingFill(s[0]);break;case a.OPS.setDash:this.setDash(s[0],s[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(s[0]);break;case a.OPS.setFlatness:this.setFlatness(s[0]);break;case a.OPS.setGState:this.setGState(s[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(s[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(s[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(s[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(s[0],s[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(s[0],s[1],s[2],s[3],s[4],s[5]);break;case a.OPS.constructPath:this.constructPath(s[0],s[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(n.items);break;default:(0,a.warn)("Unimplemented operator ".concat(i))}}}catch(t){r.e(t)}finally{r.f()}}},{key:"setWordSpacing",value:function(t){this.current.wordSpacing=t}},{key:"setCharSpacing",value:function(t){this.current.charSpacing=t}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function(t,e,r,n,a,i){var o=this.current;o.textMatrix=o.lineMatrix=[t,e,r,n,a,i],o.textMatrixScale=Math.hypot(t,e),o.x=o.lineX=0,o.y=o.lineY=0,o.xcoords=[],o.ycoords=[],o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size","".concat(v(o.fontSize),"px")),o.tspan.setAttributeNS(null,"y",v(-o.y)),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtElement.append(o.tspan)}},{key:"beginText",value:function(){var t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=a.IDENTITY_MATRIX,t.lineMatrix=a.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}},{key:"moveText",value:function(t,e){var r=this.current;r.x=r.lineX+=t,r.y=r.lineY+=e,r.xcoords=[],r.ycoords=[],r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size","".concat(v(r.fontSize),"px")),r.tspan.setAttributeNS(null,"y",v(-r.y))}},{key:"showText",value:function(t){var e=this.current,r=e.font,n=e.fontSize;if(0!==n){var i,o=e.fontSizeScale,s=e.charSpacing,u=e.wordSpacing,c=e.fontDirection,h=e.textHScale*c,f=r.vertical,d=f?1:-1,p=r.defaultVMetrics,_=n*e.fontMatrix[0],w=0,A=l(t);try{for(A.s();!(i=A.n()).done;){var k=i.value;if(null!==k)if("number"!=typeof k){var S=(k.isSpace?u:0)+s,x=k.fontChar,E=void 0,P=void 0,T=k.width;if(f){var C=void 0,O=k.vmetric||p;C=-(C=k.vmetric?O[1]:.5*T)*_;var M=O[2]*_;T=O?-O[0]:T,E=C/o,P=(w+M)/o}else E=w/o,P=0;(k.isInFont||r.missingFile)&&(e.xcoords.push(e.x+E),f&&e.ycoords.push(-e.y+P),e.tspan.textContent+=x),w+=f?T*_-S*c:T*_+S*c}else w+=d*k*n/1e3;else w+=c*u}}catch(t){A.e(t)}finally{A.f()}e.tspan.setAttributeNS(null,"x",e.xcoords.map(v).join(" ")),f?e.tspan.setAttributeNS(null,"y",e.ycoords.map(v).join(" ")):e.tspan.setAttributeNS(null,"y",v(-e.y)),f?e.y-=w:e.x+=w*h,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size","".concat(v(e.fontSize),"px")),e.fontStyle!==m&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==g&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);var F=e.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(F===a.TextRenderingMode.FILL||F===a.TextRenderingMode.FILL_STROKE?(e.fillColor!==b&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?e.tspan.setAttributeNS(null,"fill","transparent"):e.tspan.setAttributeNS(null,"fill","none"),F===a.TextRenderingMode.STROKE||F===a.TextRenderingMode.FILL_STROKE){var R=1/(e.textMatrixScale||1);this._setStrokeAttributes(e.tspan,R)}var I=e.textMatrix;0!==e.textRise&&((I=I.slice())[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform","".concat(y(I)," scale(").concat(v(h),", -1)")),e.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.txtElement.append(e.tspan),e.txtgrp.append(e.txtElement),this._ensureTransformGroup().append(e.txtElement)}}},{key:"setLeadingMoveText",value:function(t,e){this.setLeading(-e),this.moveText(t,e)}},{key:"addFontStyle",value:function(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));var e=A(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(t.loadedName,'";')+" src: url(".concat(e,"); }\n")}},{key:"setFont",value:function(t){var e=this.current,r=this.commonObjs.get(t[0]),n=t[1];e.font=r,!this.embedFonts||r.missingFile||this.embeddedFonts[r.loadedName]||(this.addFontStyle(r),this.embeddedFonts[r.loadedName]=r),e.fontMatrix=r.fontMatrix||a.FONT_IDENTITY_MATRIX;var i="normal";r.black?i="900":r.bold&&(i="bold");var o=r.italic?"italic":"normal";n<0?(n=-n,e.fontDirection=-1):e.fontDirection=1,e.fontSize=n,e.fontFamily=r.loadedName,e.fontWeight=i,e.fontStyle=o,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",v(-e.y)),e.xcoords=[],e.ycoords=[]}},{key:"endText",value:function(){var t,e=this.current;e.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(t=e.txtElement)&&void 0!==t&&t.hasChildNodes()&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function(t){t>0&&(this.current.lineWidth=t)}},{key:"setLineCap",value:function(t){this.current.lineCap=_[t]}},{key:"setLineJoin",value:function(t){this.current.lineJoin=w[t]}},{key:"setMiterLimit",value:function(t){this.current.miterLimit=t}},{key:"setStrokeAlpha",value:function(t){this.current.strokeAlpha=t}},{key:"setStrokeRGBColor",value:function(t,e,r){this.current.strokeColor=a.Util.makeHexColor(t,e,r)}},{key:"setFillAlpha",value:function(t){this.current.fillAlpha=t}},{key:"setFillRGBColor",value:function(t,e,r){this.current.fillColor=a.Util.makeHexColor(t,e,r),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}},{key:"setStrokeColorN",value:function(t){this.current.strokeColor=this._makeColorN_Pattern(t)}},{key:"setFillColorN",value:function(t){this.current.fillColor=this._makeColorN_Pattern(t)}},{key:"shadingFill",value:function(t){var e=this.viewport.width,r=this.viewport.height,n=a.Util.inverseTransform(this.transformMatrix),i=a.Util.applyTransform([0,0],n),o=a.Util.applyTransform([0,r],n),s=a.Util.applyTransform([e,0],n),l=a.Util.applyTransform([e,r],n),u=Math.min(i[0],o[0],s[0],l[0]),c=Math.min(i[1],o[1],s[1],l[1]),h=Math.max(i[0],o[0],s[0],l[0]),f=Math.max(i[1],o[1],s[1],l[1]),d=this.svgFactory.createElement("svg:rect");d.setAttributeNS(null,"x",u),d.setAttributeNS(null,"y",c),d.setAttributeNS(null,"width",h-u),d.setAttributeNS(null,"height",f-c),d.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&d.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(d)}},{key:"_makeColorN_Pattern",value:function(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}},{key:"_makeTilingPattern",value:function(t){var e=t[1],r=t[2],n=t[3]||a.IDENTITY_MATRIX,i=s(t[4],4),l=i[0],u=i[1],c=i[2],h=i[3],f=t[5],d=t[6],p=t[7],v="shading".concat(P++),y=s(a.Util.normalizeRect([].concat(o(a.Util.applyTransform([l,u],n)),o(a.Util.applyTransform([c,h],n)))),4),m=y[0],g=y[1],b=y[2],_=y[3],w=s(a.Util.singularValueDecompose2dScale(n),2),A=f*w[0],k=d*w[1],S=this.svgFactory.createElement("svg:pattern");S.setAttributeNS(null,"id",v),S.setAttributeNS(null,"patternUnits","userSpaceOnUse"),S.setAttributeNS(null,"width",A),S.setAttributeNS(null,"height",k),S.setAttributeNS(null,"x","".concat(m)),S.setAttributeNS(null,"y","".concat(g));var x=this.svg,E=this.transformMatrix,T=this.current.fillColor,C=this.current.strokeColor,O=this.svgFactory.create(b-m,_-g);if(this.svg=O,this.transformMatrix=n,2===p){var M=a.Util.makeHexColor.apply(a.Util,o(e));this.current.fillColor=M,this.current.strokeColor=M}return this.executeOpTree(this.convertOpList(r)),this.svg=x,this.transformMatrix=E,this.current.fillColor=T,this.current.strokeColor=C,S.append(O.childNodes[0]),this.defs.append(S),"url(#".concat(v,")")}},{key:"_makeShadingPattern",value:function(t){switch("string"==typeof t&&(t=this.objs.get(t)),t[0]){case"RadialAxial":var e,r="shading".concat(P++),n=t[3];switch(t[1]){case"axial":var i=t[4],o=t[5];(e=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",r),e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),e.setAttributeNS(null,"x1",i[0]),e.setAttributeNS(null,"y1",i[1]),e.setAttributeNS(null,"x2",o[0]),e.setAttributeNS(null,"y2",o[1]);break;case"radial":var s=t[4],u=t[5],c=t[6],h=t[7];(e=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",r),e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),e.setAttributeNS(null,"cx",u[0]),e.setAttributeNS(null,"cy",u[1]),e.setAttributeNS(null,"r",h),e.setAttributeNS(null,"fx",s[0]),e.setAttributeNS(null,"fy",s[1]),e.setAttributeNS(null,"fr",c);break;default:throw new Error("Unknown RadialAxial type: ".concat(t[1]))}var f,d=l(n);try{for(d.s();!(f=d.n()).done;){var p=f.value,v=this.svgFactory.createElement("svg:stop");v.setAttributeNS(null,"offset",p[0]),v.setAttributeNS(null,"stop-color",p[1]),e.append(v)}}catch(t){d.e(t)}finally{d.f()}return this.defs.append(e),"url(#".concat(r,")");case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(t[0]))}}},{key:"setDash",value:function(t,e){this.current.dashArray=t,this.current.dashPhase=e}},{key:"constructPath",value:function(t,e){var r,n=this.current,i=n.x,o=n.y,s=[],u=0,c=l(t);try{for(c.s();!(r=c.n()).done;)switch(0|r.value){case a.OPS.rectangle:i=e[u++],o=e[u++];var h=e[u++],f=e[u++],d=i+h,p=o+f;s.push("M",v(i),v(o),"L",v(d),v(o),"L",v(d),v(p),"L",v(i),v(p),"Z");break;case a.OPS.moveTo:i=e[u++],o=e[u++],s.push("M",v(i),v(o));break;case a.OPS.lineTo:i=e[u++],o=e[u++],s.push("L",v(i),v(o));break;case a.OPS.curveTo:i=e[u+4],o=e[u+5],s.push("C",v(e[u]),v(e[u+1]),v(e[u+2]),v(e[u+3]),v(i),v(o)),u+=6;break;case a.OPS.curveTo2:s.push("C",v(i),v(o),v(e[u]),v(e[u+1]),v(e[u+2]),v(e[u+3])),i=e[u+2],o=e[u+3],u+=4;break;case a.OPS.curveTo3:i=e[u+2],o=e[u+3],s.push("C",v(e[u]),v(e[u+1]),v(i),v(o),v(i),v(o)),u+=4;break;case a.OPS.closePath:s.push("Z")}}catch(t){c.e(t)}finally{c.f()}s=s.join(" "),n.path&&t.length>0&&t[0]!==a.OPS.rectangle&&t[0]!==a.OPS.moveTo?s=n.path.getAttributeNS(null,"d")+s:(n.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(n.path)),n.path.setAttributeNS(null,"d",s),n.path.setAttributeNS(null,"fill","none"),n.element=n.path,n.setCurrentPoint(i,o)}},{key:"endPath",value:function(){var t=this.current;if(t.path=null,this.pendingClip)if(t.element){var e="clippath".concat(x++),r=this.svgFactory.createElement("svg:clipPath");r.setAttributeNS(null,"id",e),r.setAttributeNS(null,"transform",y(this.transformMatrix));var n=t.element.cloneNode(!0);if("evenodd"===this.pendingClip?n.setAttributeNS(null,"clip-rule","evenodd"):n.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,r.append(n),this.defs.append(r),t.activeClipUrl){t.clipGroup=null;var a,i=l(this.extraStack);try{for(i.s();!(a=i.n()).done;)a.value.clipGroup=null}catch(t){i.e(t)}finally{i.f()}r.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl="url(#".concat(e,")"),this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function(t){this.pendingClip=t}},{key:"closePath",value:function(){var t=this.current;if(t.path){var e="".concat(t.path.getAttributeNS(null,"d"),"Z");t.path.setAttributeNS(null,"d",e)}}},{key:"setLeading",value:function(t){this.current.leading=-t}},{key:"setTextRise",value:function(t){this.current.textRise=t}},{key:"setTextRenderingMode",value:function(t){this.current.textRenderingMode=t}},{key:"setHScale",value:function(t){this.current.textHScale=t/100}},{key:"setRenderingIntent",value:function(t){}},{key:"setFlatness",value:function(t){}},{key:"setGState",value:function(t){var e,r=l(t);try{for(r.s();!(e=r.n()).done;){var n=s(e.value,2),i=n[0],o=n[1];switch(i){case"LW":this.setLineWidth(o);break;case"LC":this.setLineCap(o);break;case"LJ":this.setLineJoin(o);break;case"ML":this.setMiterLimit(o);break;case"D":this.setDash(o[0],o[1]);break;case"RI":this.setRenderingIntent(o);break;case"FL":this.setFlatness(o);break;case"Font":this.setFont(o);break;case"CA":this.setStrokeAlpha(o);break;case"ca":this.setFillAlpha(o);break;default:(0,a.warn)("Unimplemented graphic state operator ".concat(i))}}}catch(t){r.e(t)}finally{r.f()}}},{key:"fill",value:function(){var t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}},{key:"stroke",value:function(){var t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.current,n=r.dashArray;1!==e&&n.length>0&&(n=n.map(function(t){return e*t})),t.setAttributeNS(null,"stroke",r.strokeColor),t.setAttributeNS(null,"stroke-opacity",r.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",v(r.miterLimit)),t.setAttributeNS(null,"stroke-linecap",r.lineCap),t.setAttributeNS(null,"stroke-linejoin",r.lineJoin),t.setAttributeNS(null,"stroke-width",v(e*r.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",n.map(v).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",v(e*r.dashPhase)+"px")}},{key:"eoFill",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function(){var t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}},{key:"paintImageXObject",value:function(t){var e=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);e?this.paintInlineImageXObject(e):(0,a.warn)("Dependent image with object ID ".concat(t," is not ready yet"))}},{key:"paintInlineImageXObject",value:function(t,e){var r=t.width,n=t.height,a=k(t,this.forceDataSchema,!!e),i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width",v(r)),i.setAttributeNS(null,"height",v(n)),this.current.element=i,this.clip("nonzero");var o=this.svgFactory.createElement("svg:image");o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y",v(-n)),o.setAttributeNS(null,"width",v(r)+"px"),o.setAttributeNS(null,"height",v(n)+"px"),o.setAttributeNS(null,"transform","scale(".concat(v(1/r)," ").concat(v(-1/n),")")),e?e.append(o):this._ensureTransformGroup().append(o)}},{key:"paintImageMaskXObject",value:function(t){var e=this.current,r=t.width,n=t.height,a=e.fillColor;e.maskId="mask".concat(E++);var i=this.svgFactory.createElement("svg:mask");i.setAttributeNS(null,"id",e.maskId);var o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width",v(r)),o.setAttributeNS(null,"height",v(n)),o.setAttributeNS(null,"fill",a),o.setAttributeNS(null,"mask","url(#".concat(e.maskId,")")),this.defs.append(i),this._ensureTransformGroup().append(o),this.paintInlineImageXObject(t,i)}},{key:"paintFormXObjectBegin",value:function(t,e){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){var r=e[2]-e[0],n=e[3]-e[1],a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x",e[0]),a.setAttributeNS(null,"y",e[1]),a.setAttributeNS(null,"width",v(r)),a.setAttributeNS(null,"height",v(n)),this.current.element=a,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){}},{key:"_initialize",value:function(t){var e=this.svgFactory.create(t.width,t.height),r=this.svgFactory.createElement("svg:defs");e.append(r),this.defs=r;var n=this.svgFactory.createElement("svg:g");return n.setAttributeNS(null,"transform",y(t.transform)),e.append(n),this.svg=n,e}},{key:"_ensureClipGroup",value:function(){if(!this.current.clipGroup){var t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",y(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}]),t}()},(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var a=r(1),i=r(158);function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,a=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function c(){c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new x(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return{value:void 0,done:!0}}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=A(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=h(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,o),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function d(){}function p(){}function v(){}var y={};l(y,i,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,i)&&(y=g);var b=v.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){function a(i,o,s,l){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){a("next",t,s,l)},function(t){a("throw",t,s,l)}):e.resolve(f).then(function(t){c.value=t,s(c)},function(t){return a("throw",t,s,l)})}l(u.arg)}var i;this._invoke=function(t,r){function n(){return new e(function(e,n){a(t,r,e,n)})}return i=i?i.then(n,n):n()}}function A(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=h(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=v,l(b,"constructor",v),l(v,"constructor",p),p.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),l(w.prototype,o,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new w(u(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},_(b),l(b,s,"Generator"),l(b,i,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function h(t,e,r,n,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,a)}function f(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var i=t.apply(e,r);function o(t){h(i,n,a,o,s,"next",t)}function s(t){h(i,n,a,o,s,"throw",t)}o(void 0)})}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e,r){return e&&v(t.prototype,e),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var m=require("fs"),g=require("http"),b=require("https"),_=require("url"),w=/^file:\/\/\/[a-zA-Z]:\//,A=function(){function t(e){p(this,t),this.source=e,this.url=function(t){var e=_.parse(t);return"file:"===e.protocol||e.host?e:/^[a-z]:[/\\]/i.test(t)?_.parse("file:///".concat(t)):(e.host||(e.protocol="file:"),e)}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return y(t,[{key:"_progressiveDataLength",get:function(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new T(this):new E(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var r=this.isFsUrl?new C(this,t,e):new P(this,t,e);return this._rangeRequestReaders.push(r),r}},{key:"cancelAllRequests",value:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(this._rangeRequestReaders.slice(0));try{for(r.s();!(e=r.n()).done;)e.value.cancel(t)}catch(t){r.e(t)}finally{r.f()}}}]),t}();e.PDFNodeStream=A;var k=function(){function t(e){p(this,t),this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;var r=e.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=(0,a.createPromiseCapability)(),this._headersCapability=(0,a.createPromiseCapability)()}var e;return y(t,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(e=f(c().mark(function t(){var e,r;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:if(!this._done){t.next=4;break}return t.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){t.next=6;break}throw this._storedError;case 6:if(null!==(e=this._readableStream.read())){t.next=10;break}return this._readCapability=(0,a.createPromiseCapability)(),t.abrupt("return",this.read());case 10:return this._loaded+=e.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),r=new Uint8Array(e).buffer,t.abrupt("return",{value:r,done:!1});case 14:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",function(){e._readCapability.resolve()}),t.on("end",function(){t.destroy(),e._done=!0,e._readCapability.resolve()}),t.on("error",function(t){e._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]),t}(),S=function(){function t(e){p(this,t),this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,a.createPromiseCapability)();var r=e.source;this._isStreamingSupported=!r.disableStream}var e;return y(t,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(e=f(c().mark(function t(){var e,r;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:if(!this._done){t.next=4;break}return t.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){t.next=6;break}throw this._storedError;case 6:if(null!==(e=this._readableStream.read())){t.next=10;break}return this._readCapability=(0,a.createPromiseCapability)(),t.abrupt("return",this.read());case 10:return this._loaded+=e.length,this.onProgress&&this.onProgress({loaded:this._loaded}),r=new Uint8Array(e).buffer,t.abrupt("return",{value:r,done:!1});case 14:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",function(){e._readCapability.resolve()}),t.on("end",function(){t.destroy(),e._done=!0,e._readCapability.resolve()}),t.on("error",function(t){e._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}]),t}();function x(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}var E=function(t){o(r,t);var e=l(r);function r(t){var n;p(this,r);var o=function(e){if(404!==e.statusCode){n._headersCapability.resolve(),n._setReadableStream(e);var r=function(t){return n._readableStream.headers[t.toLowerCase()]},o=(0,i.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:t.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),s=o.allowRangeRequests,l=o.suggestedLength;n._isRangeSupported=s,n._contentLength=l||n._contentLength,n._filename=(0,i.extractFilenameFromHeader)(r)}else{var u=new a.MissingPDFException('Missing PDF "'.concat(n._url,'".'));n._storedError=u,n._headersCapability.reject(u)}};return(n=e.call(this,t))._request=null,"http:"===n._url.protocol?n._request=g.request(x(n._url,t.httpHeaders),o):n._request=b.request(x(n._url,t.httpHeaders),o),n._request.on("error",function(t){n._storedError=t,n._headersCapability.reject(t)}),n._request.end(),n}return y(r)}(k),P=function(t){o(r,t);var e=l(r);function r(t,n,i){var o;for(var s in p(this,r),(o=e.call(this,t))._httpHeaders={},t.httpHeaders){var l=t.httpHeaders[s];void 0!==l&&(o._httpHeaders[s]=l)}o._httpHeaders.Range="bytes=".concat(n,"-").concat(i-1);var u=function(t){if(404!==t.statusCode)o._setReadableStream(t);else{var e=new a.MissingPDFException('Missing PDF "'.concat(o._url,'".'));o._storedError=e}};return o._request=null,"http:"===o._url.protocol?o._request=g.request(x(o._url,o._httpHeaders),u):o._request=b.request(x(o._url,o._httpHeaders),u),o._request.on("error",function(t){o._storedError=t}),o._request.end(),o}return y(r)}(S),T=function(t){o(r,t);var e=l(r);function r(t){var n;p(this,r),n=e.call(this,t);var i=decodeURIComponent(n._url.path);return w.test(n._url.href)&&(i=i.replace(/^\//,"")),m.lstat(i,function(t,e){t?("ENOENT"===t.code&&(t=new a.MissingPDFException('Missing PDF "'.concat(i,'".'))),n._storedError=t,n._headersCapability.reject(t)):(n._contentLength=e.size,n._setReadableStream(m.createReadStream(i)),n._headersCapability.resolve())}),n}return y(r)}(k),C=function(t){o(r,t);var e=l(r);function r(t,n,a){var i;p(this,r),i=e.call(this,t);var o=decodeURIComponent(i._url.path);return w.test(i._url.href)&&(o=o.replace(/^\//,"")),i._setReadableStream(m.createReadStream(o,{start:n,end:a-1})),i}return y(r)}(S)},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=function(t,e){return 404===t||0===t&&e.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+e+'".'):new n.UnexpectedResponseException("Unexpected server response (".concat(t,') while retrieving PDF "').concat(e,'".'),t)},e.extractFilenameFromHeader=function(t){var e=t("Content-Disposition");if(e){var r=(0,a.getFilenameFromContentDispositionHeader)(e);if(r.includes("%"))try{r=decodeURIComponent(r)}catch(t){}if((0,i.isPdfFile)(r))return r}return null},e.validateRangeRequestCapabilities=function(t){var e=t.getResponseHeader,r=t.isHttp,n=t.rangeChunkSize,a=t.disableRange,i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(e("Content-Length"),10);return Number.isInteger(o)?(i.suggestedLength=o,o<=2*n||a||!r||"bytes"!==e("Accept-Ranges")||"identity"!==(e("Content-Encoding")||"identity")||(i.allowRangeRequests=!0),i):i},e.validateResponseStatus=function(t){return 200===t||206===t};var n=r(1),a=r(159),i=r(129)},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=function(t){var e=!0,r=s("filename\\*","i").exec(t);if(r){var i=c(r=r[1]);return u(i=f(i=h(i=unescape(i))))}if(r=function(t){for(var e,r=[],n=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");null!==(e=n.exec(t));){var i=a(e,4),o=i[1],l=i[2],u=i[3];if((o=parseInt(o,10))in r){if(0===o)break}else r[o]=[l,u]}for(var f=[],d=0;d<r.length&&d in r;++d){var p=a(r[d],2),v=p[0],y=p[1];y=c(y),v&&(y=unescape(y),0===d&&(y=h(y))),f.push(y)}return f.join("")}(t))return u(f(r));if(r=s("filename","i").exec(t)){var o=c(r=r[1]);return u(o=f(o))}function s(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function l(t,r){if(t){if(!/^[\x00-\xFF]+$/.test(r))return r;try{var a=new TextDecoder(t,{fatal:!0}),i=(0,n.stringToBytes)(r);r=a.decode(i),e=!1}catch(t){}}return r}function u(t){return e&&/[\x80-\xff]/.test(t)&&(t=l("utf-8",t),e&&(t=l("iso-8859-1",t))),t}function c(t){if(t.startsWith('"')){for(var e=t.slice(1).split('\\"'),r=0;r<e.length;++r){var n=e[r].indexOf('"');-1!==n&&(e[r]=e[r].slice(0,n),e.length=r+1),e[r]=e[r].replace(/\\(.)/g,"$1")}t=e.join('"')}return t}function h(t){var e=t.indexOf("'");return-1===e?t:l(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function f(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(t,e,r,n){if("q"===r||"Q"===r)return l(e,n=(n=n.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}));try{n=atob(n)}catch(t){}return l(e,n)})}return""};var n=r(1);function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}},(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var a=r(1),i=r(158);function o(){o=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new x(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return{value:void 0,done:!0}}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=A(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=h(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,o),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,i,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,i)&&(y=g);var b=v.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){function a(i,o,s,l){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){a("next",t,s,l)},function(t){a("throw",t,s,l)}):e.resolve(f).then(function(t){c.value=t,s(c)},function(t){return a("throw",t,s,l)})}l(u.arg)}var i;this._invoke=function(t,r){function n(){return new e(function(e,n){a(t,r,e,n)})}return i=i?i.then(n,n):n()}}function A(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=h(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),u(w.prototype,s,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new w(c(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},_(b),u(b,l,"Generator"),u(b,i,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function s(t,e,r,n,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,a)}function l(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var i=t.apply(e,r);function o(t){s(i,n,a,o,l,"next",t)}function l(t){s(i,n,a,o,l,"throw",t)}o(void 0)})}}function u(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var p=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,t),this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&r.httpHeaders||Object.create(null),this.withCredentials=r.withCredentials||!1,this.getXhr=r.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return d(t,[{key:"requestRange",value:function(t,e,r){var n={begin:t,end:e};for(var a in r)n[a]=r[a];return this.request(n)}},{key:"requestFull",value:function(t){return this.request(t)}},{key:"request",value:function(t){var e=this.getXhr(),r=this.currXhrId++,n=this.pendingRequests[r]={xhr:e};for(var a in e.open("GET",this.url),e.withCredentials=this.withCredentials,this.httpHeaders){var i=this.httpHeaders[a];void 0!==i&&e.setRequestHeader(a,i)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1)),n.expectedStatus=206):n.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,r),e.onprogress=this.onProgress.bind(this,r),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),r}},{key:"onProgress",value:function(t,e){var r,n=this.pendingRequests[t];n&&(null===(r=n.onProgress)||void 0===r||r.call(n,e))}},{key:"onStateChange",value:function(t,e){var r=this.pendingRequests[t];if(r){var n=r.xhr;if(n.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),4===n.readyState&&t in this.pendingRequests)if(delete this.pendingRequests[t],0===n.status&&this.isHttp){var i;null===(i=r.onError)||void 0===i||i.call(r,n.status)}else{var o=n.status||200;if(200===o&&206===r.expectedStatus||o===r.expectedStatus){var s=function(t){var e=t.response;return"string"!=typeof e?e:(0,a.stringToBytes)(e).buffer}(n);if(206===o){var l=n.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);r.onDone({begin:parseInt(u[1],10),chunk:s})}else if(s)r.onDone({begin:0,chunk:s});else{var c;null===(c=r.onError)||void 0===c||c.call(r,n.status)}}else{var h;null===(h=r.onError)||void 0===h||h.call(r,n.status)}}}}},{key:"getRequestXhr",value:function(t){return this.pendingRequests[t].xhr}},{key:"isPendingRequest",value:function(t){return t in this.pendingRequests}},{key:"abortRequest",value:function(t){var e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}]),t}(),v=function(){function t(e){h(this,t),this._source=e,this._manager=new p(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return d(t,[{key:"_onRangeRequestReaderClosed",value:function(t){var e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}},{key:"getFullReader",value:function(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new y(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){var r=new m(this._manager,t,e);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}},{key:"cancelAllRequests",value:function(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);var r,n=u(this._rangeRequestReaders.slice(0));try{for(n.s();!(r=n.n()).done;)r.value.cancel(t)}catch(t){n.e(t)}finally{n.f()}}}]),t}();e.PDFNetworkStream=v;var y=function(){function t(e,r){h(this,t),this._manager=e;var n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=r.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=(0,a.createPromiseCapability)(),this._disableRange=r.disableRange||!1,this._contentLength=r.length,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}var e;return d(t,[{key:"_onHeadersReceived",value:function(){var t=this._fullRequestId,e=this._manager.getRequestXhr(t),r=function(t){return e.getResponseHeader(t)},n=(0,i.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),a=n.allowRangeRequests,o=n.suggestedLength;a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){var e,r=u(this._requests);try{for(r.s();!(e=r.n()).done;)e.value.resolve({value:void 0,done:!0})}catch(t){r.e(t)}finally{r.f()}this._requests.length=0}}},{key:"_onError",value:function(t){this._storedError=(0,i.createResponseStatusError)(t,this._url),this._headersReceivedCapability.reject(this._storedError);var e,r=u(this._requests);try{for(r.s();!(e=r.n()).done;)e.value.reject(this._storedError)}catch(t){r.e(t)}finally{r.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function(t){var e;null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}},{key:"read",value:(e=l(o().mark(function t(){var e,r;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._storedError){t.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){t.next=5;break}return e=this._cachedChunks.shift(),t.abrupt("return",{value:e,done:!1});case 5:if(!this._done){t.next=7;break}return t.abrupt("return",{value:void 0,done:!0});case 7:return r=(0,a.createPromiseCapability)(),this._requests.push(r),t.abrupt("return",r.promise);case 10:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0,this._headersReceivedCapability.reject(t);var e,r=u(this._requests);try{for(r.s();!(e=r.n()).done;)e.value.resolve({value:void 0,done:!0})}catch(t){r.e(t)}finally{r.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]),t}(),m=function(){function t(e,r,n){h(this,t),this._manager=e;var a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(r,n,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}var e;return d(t,[{key:"_close",value:function(){var t;null===(t=this.onClosed)||void 0===t||t.call(this,this)}},{key:"_onDone",value:function(t){var e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;var r,n=u(this._requests);try{for(n.s();!(r=n.n()).done;)r.value.resolve({value:void 0,done:!0})}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._close()}},{key:"_onError",value:function(t){this._storedError=(0,i.createResponseStatusError)(t,this._url);var e,r=u(this._requests);try{for(r.s();!(e=r.n()).done;)e.value.reject(this._storedError)}catch(t){r.e(t)}finally{r.f()}this._requests.length=0,this._queuedChunk=null}},{key:"_onProgress",value:function(t){var e;this.isStreamingSupported||(null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded}))}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(e=l(o().mark(function t(){var e,r;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._storedError){t.next=2;break}throw this._storedError;case 2:if(null===this._queuedChunk){t.next=6;break}return e=this._queuedChunk,this._queuedChunk=null,t.abrupt("return",{value:e,done:!1});case 6:if(!this._done){t.next=8;break}return t.abrupt("return",{value:void 0,done:!0});case 8:return r=(0,a.createPromiseCapability)(),this._requests.push(r),t.abrupt("return",r.promise);case 11:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,r=u(this._requests);try{for(r.s();!(e=r.n()).done;)e.value.resolve({value:void 0,done:!0})}catch(t){r.e(t)}finally{r.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]),t}()},(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var a=r(1),i=r(158);function o(){o=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new x(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return{value:void 0,done:!0}}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=A(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=h(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,o),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,i,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,i)&&(y=g);var b=v.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){function a(i,o,s,l){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){a("next",t,s,l)},function(t){a("throw",t,s,l)}):e.resolve(f).then(function(t){c.value=t,s(c)},function(t){return a("throw",t,s,l)})}l(u.arg)}var i;this._invoke=function(t,r){function n(){return new e(function(e,n){a(t,r,e,n)})}return i=i?i.then(n,n):n()}}function A(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=h(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),u(w.prototype,s,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new w(c(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},_(b),u(b,l,"Generator"),u(b,i,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function s(t,e,r,n,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,a)}function l(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var i=t.apply(e,r);function o(t){s(i,n,a,o,l,"next",t)}function l(t){s(i,n,a,o,l,"throw",t)}o(void 0)})}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t,e,r){return{method:"GET",headers:t,signal:null==r?void 0:r.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function p(t){var e=new Headers;for(var r in t){var n=t[r];void 0!==n&&e.append(r,n)}return e}var v=function(){function t(e){c(this,t),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return f(t,[{key:"_progressiveDataLength",get:function(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new y(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var r=new m(this,t,e);return this._rangeRequestReaders.push(r),r}},{key:"cancelAllRequests",value:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(this._rangeRequestReaders.slice(0));try{for(r.s();!(e=r.n()).done;)e.value.cancel(t)}catch(t){r.e(t)}finally{r.f()}}}]),t}();e.PDFFetchStream=v;var y=function(){function t(e){var r=this;c(this,t),this._stream=e,this._reader=null,this._loaded=0,this._filename=null;var n=e.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=(0,a.createPromiseCapability)(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._headers=p(this._stream.httpHeaders);var o=n.url;fetch(o,d(this._headers,this._withCredentials,this._abortController)).then(function(t){if(!(0,i.validateResponseStatus)(t.status))throw(0,i.createResponseStatusError)(t.status,o);r._reader=t.body.getReader(),r._headersCapability.resolve();var e=function(e){return t.headers.get(e)},n=(0,i.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:r._stream.isHttp,rangeChunkSize:r._rangeChunkSize,disableRange:r._disableRange}),s=n.allowRangeRequests,l=n.suggestedLength;r._isRangeSupported=s,r._contentLength=l||r._contentLength,r._filename=(0,i.extractFilenameFromHeader)(e),!r._isStreamingSupported&&r._isRangeSupported&&r.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}var e;return f(t,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(e=l(o().mark(function t(){var e,r,n,a;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._headersCapability.promise;case 2:return t.next=4,this._reader.read();case 4:if(e=t.sent,r=e.value,!(n=e.done)){t.next=9;break}return t.abrupt("return",{value:r,done:n});case 9:return this._loaded+=r.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),a=new Uint8Array(r).buffer,t.abrupt("return",{value:a,done:!1});case 13:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}]),t}(),m=function(){function t(e,r,n){var o=this;c(this,t),this._stream=e,this._reader=null,this._loaded=0;var s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=(0,a.createPromiseCapability)(),this._isStreamingSupported=!s.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=p(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(r,"-").concat(n-1));var l=s.url;fetch(l,d(this._headers,this._withCredentials,this._abortController)).then(function(t){if(!(0,i.validateResponseStatus)(t.status))throw(0,i.createResponseStatusError)(t.status,l);o._readCapability.resolve(),o._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}var e;return f(t,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(e=l(o().mark(function t(){var e,r,n,a;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:return t.next=4,this._reader.read();case 4:if(e=t.sent,r=e.value,!(n=e.done)){t.next=9;break}return t.abrupt("return",{value:r,done:n});case 9:return this._loaded+=r.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),a=new Uint8Array(r).buffer,t.abrupt("return",{value:a,done:!1});case 13:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}]),t}()}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return(()=>{"use strict";var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return a.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return i.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return o.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return s.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return n.LoopbackPort}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return c.SVGGraphics}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return h.XfaLayer}}),Object.defineProperty(t,"binarySearchFirstItem",{enumerable:!0,get:function(){return r.binarySearchFirstItem}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),r=__w_pdfjs_require__(129),n=__w_pdfjs_require__(131),a=__w_pdfjs_require__(147),i=__w_pdfjs_require__(134),o=__w_pdfjs_require__(152),s=__w_pdfjs_require__(140),l=__w_pdfjs_require__(3),u=__w_pdfjs_require__(155),c=__w_pdfjs_require__(156),h=__w_pdfjs_require__(154);if(l.isNodeJS){var f=__w_pdfjs_require__(157).PDFNodeStream;(0,n.setPDFNetworkStreamFactory)(function(t){return new f(t)})}else{var d=__w_pdfjs_require__(160).PDFNetworkStream,p=__w_pdfjs_require__(161).PDFFetchStream;(0,n.setPDFNetworkStreamFactory)(function(t){return(0,r.isValidFetchUrl)(t.url)?new p(t):new d(t)})}})(),__webpack_exports__})());